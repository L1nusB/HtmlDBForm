{
  "requesterUsername": "L1nusB",
  "requesterAvatarIconUri": {
    "$mid": 1,
    "path": "/u/47142578",
    "scheme": "https",
    "authority": "avatars.githubusercontent.com",
    "query": "v=4"
  },
  "responderUsername": "GitHub Copilot",
  "responderAvatarIconUri": {
    "id": "copilot"
  },
  "initialLocation": "editing-session",
  "requests": [
    {
      "requestId": "request_21461595-b9bf-4ccd-8685-0558708a644d",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 96
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 97
            },
            "text": "I want to create additional pages/overviews following a similar pattern and approach as done in ",
            "kind": "text"
          },
          {
            "range": {
              "start": 96,
              "endExclusive": 115
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 97,
              "endLineNumber": 1,
              "endColumn": 116
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 115,
              "endExclusive": 382
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 116,
              "endLineNumber": 1,
              "endColumn": 383
            },
            "text": "  .The first one should be for the locations which are stored in the table 'USEAP_RPA_Standort'. For the overview I want all the columns to be shown except the primary key column 'pk_RPA_Standort' i.e. I want the columns 'Standort' and 'Standort_Kuerzel'. Similar to ",
            "kind": "text"
          },
          {
            "range": {
              "start": 382,
              "endExclusive": 401
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 383,
              "endLineNumber": 1,
              "endColumn": 402
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 401,
              "endExclusive": 776
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 402,
              "endLineNumber": 1,
              "endColumn": 777
            },
            "text": "  I want columns with an edit button and a delete button with the corresponding confirmation modals and corresponding styling e.g. not having full width for those columns etc. Please add the needed files in the codebase in a well structures manner. For now you do not have to focus on the functionality of the edit and delete button as we will implement them in a later step.",
            "kind": "text"
          }
        ],
        "text": "I want to create additional pages/overviews following a similar pattern and approach as done in #file:institute.php  .The first one should be for the locations which are stored in the table 'USEAP_RPA_Standort'. For the overview I want all the columns to be shown except the primary key column 'pk_RPA_Standort' i.e. I want the columns 'Standort' and 'Standort_Kuerzel'. Similar to #file:institute.php  I want columns with an edit button and a delete button with the corresponding confirmation modals and corresponding styling e.g. not having full width for those columns etc. Please add the needed files in the codebase in a well structures manner. For now you do not have to focus on the functionality of the edit and delete button as we will implement them in a later step."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 382,
              "endExclusive": 401
            },
            "value": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 96,
              "endExclusive": 115
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you create a locations overview page following the same pattern as institute.php. Here's the solution:\n\n### [location.php](file:///DatabaseManager/location.php)\n\nCreate a new file for the locations overview:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Location Management</title>\n    <!-- Bootstrap CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <!-- Bootstrap Icons -->\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\n    <!-- DataTables CSS -->\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\n    <!-- Custom styles -->\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\n</head>\n\n<body>\n    <div class=\"container mt-5\">\n        <h2>Location Management</h2>\n        <div class=\"action-buttons mb-3\">\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-table\"></i> Process Overview\n            </a>\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\n                <i class=\"bi bi-plus-lg\"></i> Add Location\n            </button>\n        </div>\n        <!-- Add a div with max-width to constrain table width -->\n        <div style=\"max-width: 800px;\">\n            <table id=\"locationTable\" class=\"table table-striped\">\n                <thead>\n                    <tr>\n                        <th>Location</th>\n                        <th>Abbreviation</th>\n                        <th>Modify</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <!-- Data will be populated by DataTables -->\n                </tbody>\n            </table>\n        </div>\n        <?php include './toast/toast.html'; ?>\n\n        <!-- Add/Edit Location Modal -->\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form id=\"locationForm\" novalidate>\n                            <input type=\"hidden\" id=\"locationId\">\n                            <div class=\"mb-3\">\n                                <label for=\"location\" class=\"form-label\">Location</label>\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide a location name.\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- jQuery -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\n    <!-- Bootstrap Bundle with Popper -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n    <!-- DataTables -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\n    <!-- Utils -->\n    <script src=\"./js/utils.js\"></script>\n\n    <script>\n        let table;\n\n        $(document).ready(function() {\n            // Initialize DataTable\n            table = $('#locationTable').DataTable({\n                ajax: {\n                    url: './db/get_locations.php',\n                    dataSrc: ''\n                },\n                columns: [{\n                        data: 'Standort',\n                        width: '400px'\n                    },\n                    {\n                        data: 'Standort_Kuerzel',\n                        width: '200px'\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-pencil\"></i>\n                                </button>\n                            `;\n                        }\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-trash\"></i>\n                                </button>\n                            `;\n                        }\n                    }\n                ],\n                order: [\n                    [0, 'asc']\n                ],\n                layout: {\n                    topStart: ['pageLength'],\n                    topEnd: ['buttons', 'search'],\n                },\n                buttons: [{\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                    action: function(e, dt, node, config) {\n                        dt.ajax.reload();\n                    },\n                }],\n            });\n        });\n    </script>\n</body>\n\n</html>\n```\n\n### [get_locations.php](file:///DatabaseManager/db/get_locations.php)\n\nCreate a new file to fetch location data:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1073741825,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1073741825,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1073741825,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1073741825,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1073741825,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1073741825,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1073741825,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1073741825,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1073741825,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1073741825,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1073741825,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1073741825,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1073741825,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1073741825,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1073741825,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1073741825,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1073741825,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1073741825,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1073741825,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1073741825,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1073741825,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1073741825,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1073741825,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1073741825,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1073741825,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1073741825,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1073741825,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1073741825,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1073741825,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1073741825,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1073741825,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1073741825,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1073741825,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1073741825,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        </form>",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1073741825,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1073741825,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1073741825,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1073741825,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1073741825,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1073741825,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                </div>",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1073741825,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            </div>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1073741825,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        </div>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1073741825,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1073741825,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1073741825,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1073741825,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1073741825,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1073741825,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1073741825,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1073741825,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1073741825,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1073741825,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1073741825,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1073741825,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1073741825,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1073741825,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1073741825,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1073741825,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    </div>",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1073741825,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                </div>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1073741825,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            </div>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1073741825,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        </div>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1073741825,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1073741825,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1073741825,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1073741825,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1073741825,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1073741825,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1073741825,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1073741825,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1073741825,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1073741825,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1073741825,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <!-- Utils -->",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1073741825,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1073741825,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1073741825,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    <script>",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1073741825,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        let table;",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1073741825,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1073741825,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1073741825,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Initialize DataTable",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1073741825,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1073741825,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                ajax: {",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1073741825,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1073741825,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    dataSrc: ''",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1073741825,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                },",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1073741825,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                columns: [{",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1073741825,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        data: 'Standort',",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1073741825,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        width: '400px'",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1073741825,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1073741825,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    {",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1073741825,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1073741825,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        width: '200px'",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1073741825,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1073741825,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    {",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1073741825,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        data: null,",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1073741825,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        orderable: false,",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1073741825,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        className: 'text-center',",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1073741825,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        width: '50px',",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1073741825,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1073741825,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            return `",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1073741825,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1073741825,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1073741825,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                </button>",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1073741825,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            `;",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1073741825,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        }",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1073741825,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1073741825,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    {",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1073741825,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        data: null,",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1073741825,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        orderable: false,",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1073741825,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        className: 'text-center',",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1073741825,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        width: '50px',",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1073741825,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1073741825,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            return `",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1073741825,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1073741825,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1073741825,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                </button>",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1073741825,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            `;",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1073741825,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        }",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1073741825,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1073741825,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                ],",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1073741825,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                order: [",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1073741825,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    [0, 'asc']",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1073741825,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                ],",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1073741825,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                layout: {",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1073741825,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1073741825,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1073741825,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                },",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1073741825,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                buttons: [{",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1073741825,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1073741825,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1073741825,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1073741825,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1073741825,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                }],",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1073741825,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1073741825,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        });",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1073741825,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1073741825,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1073741825,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1073741825,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1073741825,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1073741825,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nrequire_once 'connection.php';\n\ntry {\n    $stmt = $pdo->query(\"SELECT * FROM USEAP_RPA_Standort\");\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    header('Content-Type: application/json');\n    echo json_encode($locations);\n} catch (PDOException $e) {\n    header('HTTP/1.1 500 Internal Server Error');\n    echo json_encode(['error' => $e->getMessage()]);\n}\n\n$pdo = null;\n?>\n```\n\nThis implementation follows the same pattern as the institute page, with a few key differences:\n\n1. The table structure is simpler, showing just the Location (Standort) and Abbreviation (Standort_Kuerzel) columns\n2. The table is constrained to 800px width like the institute table\n3. The modify and delete columns are styled with fixed widths of 50px each\n4. The main data column (Location) has a width of 400px and the Abbreviation column 200px\n\nThe following components are in place but need implementation:\n1. Add location functionality\n2. Edit location functionality\n3. Delete location functionality\n4. Form validation\n5. Success/error toasts\n\nWould you like me to implement any of these functionalities next?",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'connection.php';",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = $pdo->query(\"SELECT * FROM USEAP_RPA_Standort\");",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    header('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode($locations);",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (PDOException $e) {",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    header('HTTP/1.1 500 Internal Server Error');",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode(['error' => $e->getMessage()]);",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n$pdo = null;",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n?>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_228777db-76f8-4339-b014-3ac6fa36a60f",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 7139,
          "totalElapsed": 61883
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <div class=\"action-buttons btn-group\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2 rounded\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 407,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <div class=\"action-buttons btn-group\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2 rounded\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nI want to create additional pages/overviews following a similar pattern and approach as done in #file:institute.php  .The first one should be for the locations which are stored in the table 'USEAP_RPA_Standort'. For the overview I want all the columns to be shown except the primary key column 'pk_RPA_Standort' i.e. I want the columns 'Standort' and 'Standort_Kuerzel'. Similar to #file:institute.php  I want columns with an edit button and a delete button with the corresponding confirmation modals and corresponding styling e.g. not having full width for those columns etc. Please add the needed files in the codebase in a well structures manner. For now you do not have to focus on the functionality of the edit and delete button as we will implement them in a later step.\n</prompt>",
            "response": "I'll help you create a locations overview page following the same pattern as institute.php. Here's the solution:\n\n### /DatabaseManager/location.php\n\nCreate a new file for the locations overview:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Location Management</title>\n    <!-- Bootstrap CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <!-- Bootstrap Icons -->\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\n    <!-- DataTables CSS -->\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\n    <!-- Custom styles -->\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\n</head>\n\n<body>\n    <div class=\"container mt-5\">\n        <h2>Location Management</h2>\n        <div class=\"action-buttons mb-3\">\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-table\"></i> Process Overview\n            </a>\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\n                <i class=\"bi bi-plus-lg\"></i> Add Location\n            </button>\n        </div>\n        <!-- Add a div with max-width to constrain table width -->\n        <div style=\"max-width: 800px;\">\n            <table id=\"locationTable\" class=\"table table-striped\">\n                <thead>\n                    <tr>\n                        <th>Location</th>\n                        <th>Abbreviation</th>\n                        <th>Modify</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <!-- Data will be populated by DataTables -->\n                </tbody>\n            </table>\n        </div>\n        <?php include './toast/toast.html'; ?>\n\n        <!-- Add/Edit Location Modal -->\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form id=\"locationForm\" novalidate>\n                            <input type=\"hidden\" id=\"locationId\">\n                            <div class=\"mb-3\">\n                                <label for=\"location\" class=\"form-label\">Location</label>\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide a location name.\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- jQuery -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\n    <!-- Bootstrap Bundle with Popper -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n    <!-- DataTables -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\n    <!-- Utils -->\n    <script src=\"./js/utils.js\"></script>\n\n    <script>\n        let table;\n\n        $(document).ready(function() {\n            // Initialize DataTable\n            table = $('#locationTable').DataTable({\n                ajax: {\n                    url: './db/get_locations.php',\n                    dataSrc: ''\n                },\n                columns: [{\n                        data: 'Standort',\n                        width: '400px'\n                    },\n                    {\n                        data: 'Standort_Kuerzel',\n                        width: '200px'\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-pencil\"></i>\n                                </button>\n                            `;\n                        }\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-trash\"></i>\n                                </button>\n                            `;\n                        }\n                    }\n                ],\n                order: [\n                    [0, 'asc']\n                ],\n                layout: {\n                    topStart: ['pageLength'],\n                    topEnd: ['buttons', 'search'],\n                },\n                buttons: [{\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                    action: function(e, dt, node, config) {\n                        dt.ajax.reload();\n                    },\n                }],\n            });\n        });\n    </script>\n</body>\n\n</html>\n```\n\n### /DatabaseManager/db/get_locations.php\n\nCreate a new file to fetch location data:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\nrequire_once 'connection.php';\n\ntry {\n    $stmt = $pdo->query(\"SELECT * FROM USEAP_RPA_Standort\");\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    header('Content-Type: application/json');\n    echo json_encode($locations);\n} catch (PDOException $e) {\n    header('HTTP/1.1 500 Internal Server Error');\n    echo json_encode(['error' => $e->getMessage()]);\n}\n\n$pdo = null;\n?>\n```\n\nThis implementation follows the same pattern as the institute page, with a few key differences:\n\n1. The table structure is simpler, showing just the Location (Standort) and Abbreviation (Standort_Kuerzel) columns\n2. The table is constrained to 800px width like the institute table\n3. The modify and delete columns are styled with fixed widths of 50px each\n4. The main data column (Location) has a width of 400px and the Abbreviation column 200px\n\nThe following components are in place but need implementation:\n1. Add location functionality\n2. Edit location functionality\n3. Delete location functionality\n4. Form validation\n5. Success/error toasts\n\nWould you like me to implement any of these functionalities next?"
          },
          "codeBlocks": [
            {
              "code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Location Management</title>\n    <!-- Bootstrap CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <!-- Bootstrap Icons -->\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\n    <!-- DataTables CSS -->\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\n    <!-- Custom styles -->\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\n</head>\n\n<body>\n    <div class=\"container mt-5\">\n        <h2>Location Management</h2>\n        <div class=\"action-buttons mb-3\">\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-table\"></i> Process Overview\n            </a>\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\n                <i class=\"bi bi-plus-lg\"></i> Add Location\n            </button>\n        </div>\n        <!-- Add a div with max-width to constrain table width -->\n        <div style=\"max-width: 800px;\">\n            <table id=\"locationTable\" class=\"table table-striped\">\n                <thead>\n                    <tr>\n                        <th>Location</th>\n                        <th>Abbreviation</th>\n                        <th>Modify</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <!-- Data will be populated by DataTables -->\n                </tbody>\n            </table>\n        </div>\n        <?php include './toast/toast.html'; ?>\n\n        <!-- Add/Edit Location Modal -->\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form id=\"locationForm\" novalidate>\n                            <input type=\"hidden\" id=\"locationId\">\n                            <div class=\"mb-3\">\n                                <label for=\"location\" class=\"form-label\">Location</label>\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide a location name.\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- jQuery -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\n    <!-- Bootstrap Bundle with Popper -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n    <!-- DataTables -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\n    <!-- Utils -->\n    <script src=\"./js/utils.js\"></script>\n\n    <script>\n        let table;\n\n        $(document).ready(function() {\n            // Initialize DataTable\n            table = $('#locationTable').DataTable({\n                ajax: {\n                    url: './db/get_locations.php',\n                    dataSrc: ''\n                },\n                columns: [{\n                        data: 'Standort',\n                        width: '400px'\n                    },\n                    {\n                        data: 'Standort_Kuerzel',\n                        width: '200px'\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-pencil\"></i>\n                                </button>\n                            `;\n                        }\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-trash\"></i>\n                                </button>\n                            `;\n                        }\n                    }\n                ],\n                order: [\n                    [0, 'asc']\n                ],\n                layout: {\n                    topStart: ['pageLength'],\n                    topEnd: ['buttons', 'search'],\n                },\n                buttons: [{\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                    action: function(e, dt, node, config) {\n                        dt.ajax.reload();\n                    },\n                }],\n            });\n        });\n    </script>\n</body>\n\n</html>\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you create a locations overview page following the same pattern as institute.php. Here's the solution:\n\n### [location.php](file:///DatabaseManager/location.php)\n\nCreate a new file for the locations overview:\n\n"
            },
            {
              "code": "<?php\nrequire_once 'connection.php';\n\ntry {\n    $stmt = $pdo->query(\"SELECT * FROM USEAP_RPA_Standort\");\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    header('Content-Type: application/json');\n    echo json_encode($locations);\n} catch (PDOException $e) {\n    header('HTTP/1.1 500 Internal Server Error');\n    echo json_encode(['error' => $e->getMessage()]);\n}\n\n$pdo = null;\n?>\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [get_locations.php](file:///DatabaseManager/db/get_locations.php)\n\nCreate a new file to fetch location data:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "I want to create additional pages/overviews following a similar pattern and approach as done in #file:institute.php  .The first one should be for the locations which are stored in the table 'USEAP_RPA_Standort'. For the overview I want all the columns to be shown except the primary key column 'pk_RPA_Standort' i.e. I want the columns 'Standort' and 'Standort_Kuerzel'. Similar to #file:institute.php  I want columns with an edit button and a delete button with the corresponding confirmation modals and corresponding styling e.g. not having full width for those columns etc. Please add the needed files in the codebase in a well structures manner. For now you do not have to focus on the functionality of the edit and delete button as we will implement them in a later step."
            },
            {
              "role": "assistant",
              "content": "I'll help you create a locations overview page following the same pattern as institute.php. Here's the solution:\n\n### /DatabaseManager/location.php\n\nCreate a new file for the locations overview:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Location Management</title>\n    <!-- Bootstrap CSS -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\n    <!-- Bootstrap Icons -->\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\n    <!-- DataTables CSS -->\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\n    <!-- Custom styles -->\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\n</head>\n\n<body>\n    <div class=\"container mt-5\">\n        <h2>Location Management</h2>\n        <div class=\"action-buttons mb-3\">\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-table\"></i> Process Overview\n            </a>\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\n                <i class=\"bi bi-plus-lg\"></i> Add Location\n            </button>\n        </div>\n        <!-- Add a div with max-width to constrain table width -->\n        <div style=\"max-width: 800px;\">\n            <table id=\"locationTable\" class=\"table table-striped\">\n                <thead>\n                    <tr>\n                        <th>Location</th>\n                        <th>Abbreviation</th>\n                        <th>Modify</th>\n                        <th>Delete</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <!-- Data will be populated by DataTables -->\n                </tbody>\n            </table>\n        </div>\n        <?php include './toast/toast.html'; ?>\n\n        <!-- Add/Edit Location Modal -->\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form id=\"locationForm\" novalidate>\n                            <input type=\"hidden\" id=\"locationId\">\n                            <div class=\"mb-3\">\n                                <label for=\"location\" class=\"form-label\">Location</label>\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide a location name.\n                                </div>\n                            </div>\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- jQuery -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\n    <!-- Bootstrap Bundle with Popper -->\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\n    <!-- DataTables -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\n    <!-- Utils -->\n    <script src=\"./js/utils.js\"></script>\n\n    <script>\n        let table;\n\n        $(document).ready(function() {\n            // Initialize DataTable\n            table = $('#locationTable').DataTable({\n                ajax: {\n                    url: './db/get_locations.php',\n                    dataSrc: ''\n                },\n                columns: [{\n                        data: 'Standort',\n                        width: '400px'\n                    },\n                    {\n                        data: 'Standort_Kuerzel',\n                        width: '200px'\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-pencil\"></i>\n                                </button>\n                            `;\n                        }\n                    },\n                    {\n                        data: null,\n                        orderable: false,\n                        className: 'text-center',\n                        width: '50px',\n                        render: function(data, type, row) {\n                            return `\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\n                                    <i class=\"bi bi-trash\"></i>\n                                </button>\n                            `;\n                        }\n                    }\n                ],\n                order: [\n                    [0, 'asc']\n                ],\n                layout: {\n                    topStart: ['pageLength'],\n                    topEnd: ['buttons', 'search'],\n                },\n                buttons: [{\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                    action: function(e, dt, node, config) {\n                        dt.ajax.reload();\n                    },\n                }],\n            });\n        });\n    </script>\n</body>\n\n</html>\n```\n\n### /DatabaseManager/db/get_locations.php\n\nCreate a new file to fetch location data:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\nrequire_once 'connection.php';\n\ntry {\n    $stmt = $pdo->query(\"SELECT * FROM USEAP_RPA_Standort\");\n    $locations = $stmt->fetchAll(PDO::FETCH_ASSOC);\n    \n    header('Content-Type: application/json');\n    echo json_encode($locations);\n} catch (PDOException $e) {\n    header('HTTP/1.1 500 Internal Server Error');\n    echo json_encode(['error' => $e->getMessage()]);\n}\n\n$pdo = null;\n?>\n```\n\nThis implementation follows the same pattern as the institute page, with a few key differences:\n\n1. The table structure is simpler, showing just the Location (Standort) and Abbreviation (Standort_Kuerzel) columns\n2. The table is constrained to 800px width like the institute table\n3. The modify and delete columns are styled with fixed widths of 50px each\n4. The main data column (Location) has a width of 400px and the Abbreviation column 200px\n\nThe following components are in place but need implementation:\n1. Add location functionality\n2. Edit location functionality\n3. Delete location functionality\n4. Form validation\n5. Success/error toasts\n\nWould you like me to implement any of these functionalities next?"
            }
          ],
          "modelMessageId": "c32bd888-4704-4874-8748-681895001e63",
          "responseId": "0202a164-c5c9-46f9-8ac5-a0eae10251bf",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738244733635
    },
    {
      "requestId": "request_99379a41-a3f4-4e51-8038-547ed4e4c35f",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 25
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 26
            },
            "text": "I modified your code for ",
            "kind": "text"
          },
          {
            "range": {
              "start": 25,
              "endExclusive": 48
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 26,
              "endLineNumber": 1,
              "endColumn": 49
            },
            "text": "#file:get_locations.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 48,
              "endExclusive": 181
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 49,
              "endLineNumber": 1,
              "endColumn": 182
            },
            "text": " to be more consistent with the other files in my codebase. Can you please add a navigation element to this location management from ",
            "kind": "text"
          },
          {
            "range": {
              "start": 181,
              "endExclusive": 196
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 182,
              "endLineNumber": 1,
              "endColumn": 197
            },
            "text": "#file:index.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 196,
              "endExclusive": 540
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 197,
              "endLineNumber": 1,
              "endColumn": 541
            },
            "text": " ? Currently there is a navigation to the institute management next to the other buttons there but since we are adding new navigation items now lets move all the navigation buttons to a separate row above the buttons for adding, deleting and modifying elements. Also choose an appropriate icon for the navigation button to the locations please.",
            "kind": "text"
          }
        ],
        "text": "I modified your code for #file:get_locations.php to be more consistent with the other files in my codebase. Can you please add a navigation element to this location management from #file:index.php ? Currently there is a navigation to the institute management next to the other buttons there but since we are adding new navigation items now lets move all the navigation buttons to a separate row above the buttons for adding, deleting and modifying elements. Also choose an appropriate icon for the navigation button to the locations please."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:index.php",
            "range": {
              "start": 181,
              "endExclusive": 196
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:get_locations.php",
            "range": {
              "start": 25,
              "endExclusive": 48
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you update the navigation in index.php. Here's the solution:\n\n### [index.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php)\n\nAdd a new navigation row above the existing action buttons and move the institute management link there.\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
            "scheme": "file"
          }
        },
        {
          "value": "<!DOCTYPE html>\n// ...existing code...\n    <div class=\"container mt-5\">\n        <h2>Institute Process Overview</h2>\n        <!-- Add new navigation row -->\n        <div class=\"navigation-buttons mb-3\">\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-building\"></i> Manage Institutes\n            </a>\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\n            </a>\n        </div>\n        <div class=\"action-buttons btn-group\">\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                <i class=\"bi bi-gear\"></i>\n            </button>\n            <!-- Rest of the action buttons -->\n// ...existing code...\n```\n\nI used the `bi-geo-alt` icon from Bootstrap Icons which represents a location pin marker, making it clear that this button leads to location management. The navigation buttons are now grouped in their own div with the class `navigation-buttons` and separated from the action buttons below.\n\nThis creates a clearer visual hierarchy:\n1. Page title\n2. Navigation options (to other management pages)\n3. Action buttons (for the current page's functionality)\n\nThe styling remains consistent with the existing buttons, using the same `btn-outline-primary` class as the institute management link.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Institute Process Overview</title>",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Select2 CSS -->",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Institute Process Overview</h2>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add new navigation row -->",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"navigation-buttons mb-3\">",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-building\"></i> Manage Institutes",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-geo-alt\"></i> Manage Locations",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons btn-group\">",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"d-flex justify-content-center\">",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"form-check form-switch\">",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <!-- Title for the dropdown -->",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <li class=\"dropdown-header text-center\">",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <span class=\"fw-bold\">Prozesse</span>",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <hr class=\"dropdown-divider\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </li>",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <!-- Checkboxes will be populated dynamically -->",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </ul>",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-trash\"></i> Delete",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-check-lg\"></i> Confirm",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-x-lg\"></i> Cancel",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-pencil\"></i> Modify",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-check-lg\"></i> Save",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-x-lg\"></i> Cancel",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"table-responsive full-width-table\">",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"institutesTable\" class=\"table table-striped\" >",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th class=\"delete-checkbox-cell d-none\">#</th>",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>RZBK</th>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Name</th>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Standort</th>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <!-- Dynamic process columns will be added here -->",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/confirmationModal.html'; ?>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/addModal.html'; ?>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/modifyDetailsModal.html'; ?>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Select2 JS -->",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/dataOverview.js\"></script>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/retrieveData.js\"></script>",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/toggleButtons.js\"></script>",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/createAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/deleteAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/updateAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/addMode.js\"></script>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/deleteMode.js\"></script>",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/editMode.js\"></script>",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/populateAddModal.js\"></script>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/editDetailsModal.js\"></script>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Embed PHP variables as JavaScript -->",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines instituteMappingTest -->",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/create_bankenmap.php'; ?>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines locationMapping and locationAssignment -->",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/check_standort.php'; ?>",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines processMapping and processNames -->",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/get_processes.php'; ?>",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // let testMode = false;",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let testMode = true;",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let data;",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // let processNames;",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let originalData = null;",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let modifiedRows = [];",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let editMode = false;",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Add new deletion-related variables",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deleteMode = false;",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let rowsToDelete = new Set();",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Temporary storage for new entries",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let tempEntries = [];",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Interval for reloading the table",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let reloadInterval;",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // First, fetch the data to create dynamic columns",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $.ajax({",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                url: './db/get_data.php',",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                method: 'GET',",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                dataType: 'json',",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                success: function(data) {",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Process data to create dynamic columns",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // processNames = [...new Set(data.map(item => item.Prozessname))];",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Create header columns for processes",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    processNames.forEach(process => {",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable thead tr').append(`<th>${process}</th>`);",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#processMenu').append(`",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <li class=\"dropdown-item form-check\">",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"form-check\">",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </li>",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        `);",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Initialize DataTable with dynamic columns",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    table = $('#institutesTable').DataTable({",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ajax: {",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            url: './db/get_data.php',",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            dataSrc: prepareDatabaseData,",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        initComplete: function(settings, json) {",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            data = table.rows().data().toArray();",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            // Start auto-reload after initialization every 30 seconds",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            // reloadInterval = startAutoReload(table, reloadInterval);",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        columns: [{",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: null,",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: '#',",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'delete-checkbox-cell d-none',",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                visible: false,",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                },",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                width: '40px'",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'RZBK',",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'RZBK'",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'Name',",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Name'",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'Standort',",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Standort',",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            ...processNames.map(process => ({",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: process,",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'checkbox-cell text-center',",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    // Check the state of the toggle switch",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const showDates = $('#toggleDates').is(':checked');",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const date = data.startDate;",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const enabled = data.checked;",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return `",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled ",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" ",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-process=\"${process}\" data-row=\"${meta.row}\"",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            ${showDates ? ",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                true ? ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                `<input type=\"date\" style=\"width: 105px;\" ",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                value=\"${formatDateStringToISO(date)}\" ",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                class=\"form-control form-control-sm process-date-input\" ",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-process=\"${process}\" data-row=\"${meta.row}\"",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                disabled",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                >` ",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                : '' ",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            : ''}",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                        </div>",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    `;",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                }",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            })),",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: null,",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Revert',",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'revert-cell d-none',",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                visible: false,",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                }",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ],",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        order: [",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            [1, 'asc']",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ],",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Do not allow ordering as it messes up in editing and deleting.",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ordering: false,",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        layout: {",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        buttons: [{",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                dt.ajax.reload();",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                refreshInstitutes();",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }, {",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            extend: 'colvis',",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            text: 'Visibility',",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            className: 'btn-secondary'",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }],",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Enable the buttons after the table is initialized",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    enableButtons();",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Populate the Add Modal with process names",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    popuplateAddModal();",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    table.on('page', handlePageChange);",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // table.on('order', handleOrderingChange);",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Edit Mode ----- ////",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modify button click to enter Edit mode",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyBtn').click(enterEditMode);",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Save button click",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifySaveBtn').click(handleSave);",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Cancel button click",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyCancelBtn').click(handleCancel);",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modal Save confirmation ",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyConfirmSave').click(confirmSave);",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modal Cancel confirmation",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyConfirmCancel').click(confirmCancel);",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle checkbox changes (set checkbox state in data)",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.process-checkbox', function() {",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const checkbox = $(this);",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            toggleCheckbox(checkbox);",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.process-date-input', function() {",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const dateInput = $(this);",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            updateDateInput(dateInput);",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle revert button clicks",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('click', '.revert-btn', function() {",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const rowIndex = $(this).data('row');",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            revertRow(rowIndex);",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle modify button clicks",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('click', '.edit-field-btn', function() {",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const modifyButton = $(this);",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            modifyProcessDetails(modifyButton);",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Add Mode/Modal ----- ////",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Add button click handler to enter Add mode",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addEntriesBtn').click(enterAddMode);",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Add Entry button click in Modal",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addToTempBtn').click(addToTempEntries);",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle remove temporary entry in Modal",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Save All Entries button click to finalize adding entries",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#saveNewEntriesBtn').click(saveAddedEntries);",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle modal hidden event",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle checkbox changes",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            checkbox.addEventListener('change', handleProcessCheckboxChanges);",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#toggleUniformLocation').change(toggleUniformLocation);",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#newEntryLocationUniform').change(updateAllLocations);",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Deletion Mode ----- ////",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Delete button click handler to enter Delete mode",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteBtn').click(enterDeleteMode);",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        //// Exit Deletion Mode ////",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Cancel delete button click handler (default für DB reload is false)",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#cancelDeleteBtn').click(exitDeleteMode);",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Confirm delete button click handler",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#confirmDeleteModeBtn').click(function() {",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (rowsToDelete.size === 0) {",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // (default für DB reload is false)",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                exitDeleteMode();",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                return;",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#confirmDeleteModal').modal('show');",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        //// Confirmation Modals Delete Mode ////",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Final delete confirmation handler",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#finalConfirmDeleteBtn').click(processDeletion);",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Delete checkbox change handler",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Initialize Bootstrap tooltips",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('[data-toggle=\"tooltip\"]').tooltip();",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#toggleDates').change(function() {",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.rows().invalidate().draw(); // Redraw the table to reflect changes",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Event listener for the checkboxes in the dropdown",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#processMenu input[type=\"checkbox\"]').change(function() {",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return $(this).val();",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }).get(); // Get selected process names",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Loop through all columns and set visibility based on selection",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        const columns = table.columns().indexes(); // Get all column indexes",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        columns.each(function(index) {",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const columnName = table.column(index).header().textContent;",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (selectedProcesses.includes(columnName)) {",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                table.column(index).visible(true);",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                table.column(index).visible(false);",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                error: function(xhr, status, error) {",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    console.error('Error fetching data:', error);",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        });",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1073741825,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1073741825,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1073741825,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1073741825,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1073741825,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1073741825,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_7725e2ba-9fe1-4a9b-b303-8eb64d97b81d",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 5965,
          "totalElapsed": 20183
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <div class=\"action-buttons btn-group\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2 rounded\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 407,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 178,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <div class=\"action-buttons btn-group\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2 rounded\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nI modified your code for #file:get_locations.php to be more consistent with the other files in my codebase. Can you please add a navigation element to this location management from #file:index.php ? Currently there is a navigation to the institute management next to the other buttons there but since we are adding new navigation items now lets move all the navigation buttons to a separate row above the buttons for adding, deleting and modifying elements. Also choose an appropriate icon for the navigation button to the locations please.\n</prompt>",
            "response": "I'll help you update the navigation in index.php. Here's the solution:\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n\nAdd a new navigation row above the existing action buttons and move the institute management link there.\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!DOCTYPE html>\n// ...existing code...\n    <div class=\"container mt-5\">\n        <h2>Institute Process Overview</h2>\n        <!-- Add new navigation row -->\n        <div class=\"navigation-buttons mb-3\">\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-building\"></i> Manage Institutes\n            </a>\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\n            </a>\n        </div>\n        <div class=\"action-buttons btn-group\">\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                <i class=\"bi bi-gear\"></i>\n            </button>\n            <!-- Rest of the action buttons -->\n// ...existing code...\n```\n\nI used the `bi-geo-alt` icon from Bootstrap Icons which represents a location pin marker, making it clear that this button leads to location management. The navigation buttons are now grouped in their own div with the class `navigation-buttons` and separated from the action buttons below.\n\nThis creates a clearer visual hierarchy:\n1. Page title\n2. Navigation options (to other management pages)\n3. Action buttons (for the current page's functionality)\n\nThe styling remains consistent with the existing buttons, using the same `btn-outline-primary` class as the institute management link."
          },
          "codeBlocks": [
            {
              "code": "<!DOCTYPE html>\n// ...existing code...\n    <div class=\"container mt-5\">\n        <h2>Institute Process Overview</h2>\n        <!-- Add new navigation row -->\n        <div class=\"navigation-buttons mb-3\">\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-building\"></i> Manage Institutes\n            </a>\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\n            </a>\n        </div>\n        <div class=\"action-buttons btn-group\">\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                <i class=\"bi bi-gear\"></i>\n            </button>\n            <!-- Rest of the action buttons -->\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you update the navigation in index.php. Here's the solution:\n\n### [index.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php)\n\nAdd a new navigation row above the existing action buttons and move the institute management link there.\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "I modified your code for #file:get_locations.php to be more consistent with the other files in my codebase. Can you please add a navigation element to this location management from #file:index.php ? Currently there is a navigation to the institute management next to the other buttons there but since we are adding new navigation items now lets move all the navigation buttons to a separate row above the buttons for adding, deleting and modifying elements. Also choose an appropriate icon for the navigation button to the locations please."
            },
            {
              "role": "assistant",
              "content": "I'll help you update the navigation in index.php. Here's the solution:\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n\nAdd a new navigation row above the existing action buttons and move the institute management link there.\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!DOCTYPE html>\n// ...existing code...\n    <div class=\"container mt-5\">\n        <h2>Institute Process Overview</h2>\n        <!-- Add new navigation row -->\n        <div class=\"navigation-buttons mb-3\">\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-building\"></i> Manage Institutes\n            </a>\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\n            </a>\n        </div>\n        <div class=\"action-buttons btn-group\">\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                <i class=\"bi bi-gear\"></i>\n            </button>\n            <!-- Rest of the action buttons -->\n// ...existing code...\n```\n\nI used the `bi-geo-alt` icon from Bootstrap Icons which represents a location pin marker, making it clear that this button leads to location management. The navigation buttons are now grouped in their own div with the class `navigation-buttons` and separated from the action buttons below.\n\nThis creates a clearer visual hierarchy:\n1. Page title\n2. Navigation options (to other management pages)\n3. Action buttons (for the current page's functionality)\n\nThe styling remains consistent with the existing buttons, using the same `btn-outline-primary` class as the institute management link."
            }
          ],
          "modelMessageId": "91416ffa-70db-43a1-9379-dc77673899c2",
          "responseId": "1d9551b8-80a6-41c8-97db-e09a4ae8f8b3",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738245162776
    },
    {
      "requestId": "request_e288fba4-c95a-4013-946a-5979134c2b88",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 321
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 322
            },
            "text": "Great thanks. Now lets go back to the location management and implement some functionality. Lets start with adding new locations. Each location is specified by its full name and an abbreviation which match to the columns 'Standort' and 'Standort_Kuerzel' in the database respectively. Please follow the same structure as ",
            "kind": "text"
          },
          {
            "range": {
              "start": 321,
              "endExclusive": 340
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 322,
              "endLineNumber": 1,
              "endColumn": 341
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 340,
              "endExclusive": 495
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 341,
              "endLineNumber": 1,
              "endColumn": 496
            },
            "text": " through the use of a modal and having some validation that all fields are filled in addition to some duplicate detection similar to what is achieved with ",
            "kind": "text"
          },
          {
            "range": {
              "start": 495,
              "endExclusive": 520
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 496,
              "endLineNumber": 1,
              "endColumn": 521
            },
            "text": "#file:check_duplicate.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 520,
              "endExclusive": 958
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 521,
              "endLineNumber": 1,
              "endColumn": 959
            },
            "text": " . However for the locations the duplicates are identified a bit differently. It is allowed to have a location with the same full name (field 'Standort') but a different abbreviation (field 'Standort_Kuerzel') although the user needs to confirm this again explicitly. It is not allowed to have multiple locations with the same abbrevation ('Standort_Kuerzel') regardless of its full name. In this case again display an error for the user.",
            "kind": "text"
          }
        ],
        "text": "Great thanks. Now lets go back to the location management and implement some functionality. Lets start with adding new locations. Each location is specified by its full name and an abbreviation which match to the columns 'Standort' and 'Standort_Kuerzel' in the database respectively. Please follow the same structure as #file:institute.php through the use of a modal and having some validation that all fields are filled in addition to some duplicate detection similar to what is achieved with #file:check_duplicate.php . However for the locations the duplicates are identified a bit differently. It is allowed to have a location with the same full name (field 'Standort') but a different abbreviation (field 'Standort_Kuerzel') although the user needs to confirm this again explicitly. It is not allowed to have multiple locations with the same abbrevation ('Standort_Kuerzel') regardless of its full name. In this case again display an error for the user."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:check_duplicate.php",
            "range": {
              "start": 495,
              "endExclusive": 520
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 321,
              "endExclusive": 340
            },
            "value": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you implement the add functionality for locations. Here's the step-by-step solution:\n\n1. Create a new file to handle duplicate checks\n2. Add a save location endpoint\n3. Update the location.php JavaScript to handle the add functionality\n\n### [check_location_duplicate.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php)\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // First check for abbreviation duplicate (not allowed)\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"abbreviation\",\n            \"existingLocation\" => $row['Standort']\n        ]);\n        exit;\n    }\n\n    // Then check for name duplicate (needs confirmation)\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"location\",\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\n        ]);\n    } else {\n        echo json_encode([\n            \"exists\" => false\n        ]);\n    }\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### [save_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php)\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Get JSON data",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $data = json_decode(file_get_contents('php://input'));",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!isset($data->location) || !isset($data->abbreviation)) {",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Missing required fields\");",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // First check for abbreviation duplicate (not allowed)",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($row) {",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        echo json_encode([",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"exists\" => true,",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"type\" => \"abbreviation\",",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"existingLocation\" => $row['Standort']",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ]);",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        exit;",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Then check for name duplicate (needs confirmation)",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $query, array($data->location));",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1073741825,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1073741825,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1073741825,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1073741825,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($row) {",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1073741825,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        echo json_encode([",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1073741825,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"exists\" => true,",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1073741825,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"type\" => \"location\",",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1073741825,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1073741825,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ]);",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1073741825,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    } else {",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1073741825,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        echo json_encode([",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1073741825,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"exists\" => false",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1073741825,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ]);",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1073741825,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1073741825,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1073741825,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1073741825,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    http_response_code(500);",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1073741825,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1073741825,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => false,",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1073741825,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"error\",",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1073741825,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1073741825,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1073741825,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1073741825,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1073741825,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1073741825,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1073741825,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\n    $params = array($data->location, $data->abbreviation);\n    \n    $stmt = sqlsrv_query($conn, $query, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location added successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\nUpdate the JavaScript section:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Get JSON data",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $data = json_decode(file_get_contents('php://input'));",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!isset($data->location) || !isset($data->abbreviation)) {",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Missing required fields\");",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $params = array($data->location, $data->abbreviation);",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $query, $params);",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => true,",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"success\",",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => \"Location added successfully\"",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    http_response_code(500);",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => false,",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"error\",",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1073741825,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1073741825,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1073741825,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null; // Store pending save data for duplicate confirmation\n\n        $(document).ready(function() {\n            // ... existing DataTable initialization code ...\n\n            // Add Location button click\n            $('#addLocationBtn').click(function() {\n                $('#modalTitle').text('Add Location');\n                $('#locationForm')[0].reset();\n                $('#locationModal').modal('show');\n            });\n\n            // Handle modal hidden event\n            $('#locationModal').on('hidden.bs.modal', function() {\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // Clear error state when inputs change\n            $('#location, #abbreviation').on('input', function() {\n                $(this).removeClass('is-invalid');\n            });\n\n            // Save Location\n            $('#saveLocationBtn').click(function() {\n                // Reset validation states\n                $('.is-invalid').removeClass('is-invalid');\n                let isValid = true;\n\n                // Validate fields\n                const locationField = $('#location');\n                const abbreviationField = $('#abbreviation');\n\n                if (!locationField.val().trim()) {\n                    locationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!abbreviationField.val().trim()) {\n                    abbreviationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!isValid) return;\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                // Check for duplicates first\n                $.ajax({\n                    url: './db/check_location_duplicate.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n                            } else {\n                                // Show confirmation modal for location name duplicate\n                                $('#duplicateLocationName').text(data.location);\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\n                                pendingSave = data;\n                                $('#duplicateConfirmModal').modal('show');\n                            }\n                        } else {\n                            performSave(data);\n                        }\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking for duplicates', 'finish', 'error');\n                    }\n                });\n            });\n\n            function performSave(data) {\n                $.ajax({\n                    url: './db/save_location.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#locationModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error saving location', 'finish', 'error');\n                    }\n                });\n            }\n\n            // Handle duplicate confirmation\n            $('#confirmDuplicateBtn').click(function() {\n                if (pendingSave) {\n                    performSave(pendingSave);\n                    $('#duplicateConfirmModal').modal('hide');\n                }\n            });\n        });\n    </script>\n// ...existing code...\n```\n\nAlso, add the duplicate confirmation modal to the HTML section:\n\n```php\n// ...existing code...\n        <!-- Duplicate Location Name Confirmation Modal -->\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n```\n\nThis implementation:\n1. Checks for duplicate abbreviations (not allowed)\n2. Checks for duplicate location names (allowed with confirmation)\n3. Validates required fields\n4. Shows appropriate error messages and confirmation dialogs\n5. Follows the same pattern as the institute management",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </form>",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Utils -->",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let pendingSave = null; // Store pending save data for duplicate confirmation",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Initialize DataTable",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ajax: {",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    dataSrc: ''",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                columns: [{",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort',",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '400px'",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '200px'",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                order: [",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    [0, 'asc']",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                layout: {",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                buttons: [{",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }],",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Add Location button click",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#addLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Add Location');",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationForm')[0].reset();",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1073741825,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1073741825,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1073741825,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Handle modal hidden event",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1073741825,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#locationModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1073741825,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1073741825,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('#duplicateError').addClass('d-none');",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1073741825,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1073741825,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1073741825,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Clear error state when inputs change",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1073741825,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#location, #abbreviation').on('input', function() {",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1073741825,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $(this).removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1073741825,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1073741825,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1073741825,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Save Location",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1073741825,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#saveLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1073741825,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                // Reset validation states",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1073741825,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1073741825,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                let isValid = true;",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1073741825,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1073741825,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                // Validate fields",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1073741825,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                const locationField = $('#location');",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1073741825,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                const abbreviationField = $('#abbreviation');",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1073741825,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1073741825,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (!locationField.val().trim()) {",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1073741825,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    locationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1073741825,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    isValid = false;",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1073741825,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                }",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1073741825,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1073741825,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (!abbreviationField.val().trim()) {",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1073741825,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1073741825,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    isValid = false;",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1073741825,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                }",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1073741825,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1073741825,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (!isValid) return;",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1073741825,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1073741825,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                const data = {",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1073741825,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    location: locationField.val().trim(),",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1073741825,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    abbreviation: abbreviationField.val().trim()",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1073741825,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                };",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1073741825,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1073741825,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                // Check for duplicates first",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1073741825,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $.ajax({",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1073741825,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/check_location_duplicate.php',",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1073741825,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    method: 'POST',",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1073741825,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1073741825,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1073741825,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    success: function(response) {",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1073741825,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        if (response.exists) {",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1073741825,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            if (response.type === 'abbreviation') {",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1073741825,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                // Show error for duplicate abbreviation",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1073741825,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1073741825,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1073741825,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            } else {",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1073741825,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                // Show confirmation modal for location name duplicate",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1073741825,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                $('#duplicateLocationName').text(data.location);",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1073741825,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                $('#existingAbbreviation').text(response.existingAbbreviation);",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1073741825,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                pendingSave = data;",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1073741825,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                                $('#duplicateConfirmModal').modal('show');",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1073741825,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            }",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1073741825,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        } else {",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1073741825,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            performSave(data);",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1073741825,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        }",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1073741825,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1073741825,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1073741825,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error checking for duplicates', 'finish', 'error');",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1073741825,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1073741825,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1073741825,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1073741825,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1073741825,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            function performSave(data) {",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1073741825,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $.ajax({",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1073741825,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/save_location.php',",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1073741825,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    method: 'POST',",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1073741825,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1073741825,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1073741825,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    success: function(response) {",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1073741825,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1073741825,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1073741825,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1073741825,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1073741825,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1073741825,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error saving location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1073741825,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1073741825,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1073741825,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            }",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1073741825,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1073741825,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Handle duplicate confirmation",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1073741825,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#confirmDuplicateBtn').click(function() {",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1073741825,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (pendingSave) {",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1073741825,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    performSave(pendingSave);",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1073741825,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    $('#duplicateConfirmModal').modal('hide');",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1073741825,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                }",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1073741825,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1073741825,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        });",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1073741825,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1073741825,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1073741825,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1073741825,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1073741825,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1073741825,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_11bad7ed-2a86-4ae9-98ce-1c0e0d98c96e",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 8141,
          "totalElapsed": 56246
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 178,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 810,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nGreat thanks. Now lets go back to the location management and implement some functionality. Lets start with adding new locations. Each location is specified by its full name and an abbreviation which match to the columns 'Standort' and 'Standort_Kuerzel' in the database respectively. Please follow the same structure as #file:institute.php through the use of a modal and having some validation that all fields are filled in addition to some duplicate detection similar to what is achieved with #file:check_duplicate.php . However for the locations the duplicates are identified a bit differently. It is allowed to have a location with the same full name (field 'Standort') but a different abbreviation (field 'Standort_Kuerzel') although the user needs to confirm this again explicitly. It is not allowed to have multiple locations with the same abbrevation ('Standort_Kuerzel') regardless of its full name. In this case again display an error for the user.\n</prompt>",
            "response": "I'll help you implement the add functionality for locations. Here's the step-by-step solution:\n\n1. Create a new file to handle duplicate checks\n2. Add a save location endpoint\n3. Update the location.php JavaScript to handle the add functionality\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // First check for abbreviation duplicate (not allowed)\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"abbreviation\",\n            \"existingLocation\" => $row['Standort']\n        ]);\n        exit;\n    }\n\n    // Then check for name duplicate (needs confirmation)\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"location\",\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\n        ]);\n    } else {\n        echo json_encode([\n            \"exists\" => false\n        ]);\n    }\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\n    $params = array($data->location, $data->abbreviation);\n    \n    $stmt = sqlsrv_query($conn, $query, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location added successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\nUpdate the JavaScript section:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null; // Store pending save data for duplicate confirmation\n\n        $(document).ready(function() {\n            // ... existing DataTable initialization code ...\n\n            // Add Location button click\n            $('#addLocationBtn').click(function() {\n                $('#modalTitle').text('Add Location');\n                $('#locationForm')[0].reset();\n                $('#locationModal').modal('show');\n            });\n\n            // Handle modal hidden event\n            $('#locationModal').on('hidden.bs.modal', function() {\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // Clear error state when inputs change\n            $('#location, #abbreviation').on('input', function() {\n                $(this).removeClass('is-invalid');\n            });\n\n            // Save Location\n            $('#saveLocationBtn').click(function() {\n                // Reset validation states\n                $('.is-invalid').removeClass('is-invalid');\n                let isValid = true;\n\n                // Validate fields\n                const locationField = $('#location');\n                const abbreviationField = $('#abbreviation');\n\n                if (!locationField.val().trim()) {\n                    locationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!abbreviationField.val().trim()) {\n                    abbreviationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!isValid) return;\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                // Check for duplicates first\n                $.ajax({\n                    url: './db/check_location_duplicate.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n                            } else {\n                                // Show confirmation modal for location name duplicate\n                                $('#duplicateLocationName').text(data.location);\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\n                                pendingSave = data;\n                                $('#duplicateConfirmModal').modal('show');\n                            }\n                        } else {\n                            performSave(data);\n                        }\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking for duplicates', 'finish', 'error');\n                    }\n                });\n            });\n\n            function performSave(data) {\n                $.ajax({\n                    url: './db/save_location.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#locationModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error saving location', 'finish', 'error');\n                    }\n                });\n            }\n\n            // Handle duplicate confirmation\n            $('#confirmDuplicateBtn').click(function() {\n                if (pendingSave) {\n                    performSave(pendingSave);\n                    $('#duplicateConfirmModal').modal('hide');\n                }\n            });\n        });\n    </script>\n// ...existing code...\n```\n\nAlso, add the duplicate confirmation modal to the HTML section:\n\n```php\n// ...existing code...\n        <!-- Duplicate Location Name Confirmation Modal -->\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n```\n\nThis implementation:\n1. Checks for duplicate abbreviations (not allowed)\n2. Checks for duplicate location names (allowed with confirmation)\n3. Validates required fields\n4. Shows appropriate error messages and confirmation dialogs\n5. Follows the same pattern as the institute management"
          },
          "codeBlocks": [
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // First check for abbreviation duplicate (not allowed)\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"abbreviation\",\n            \"existingLocation\" => $row['Standort']\n        ]);\n        exit;\n    }\n\n    // Then check for name duplicate (needs confirmation)\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"location\",\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\n        ]);\n    } else {\n        echo json_encode([\n            \"exists\" => false\n        ]);\n    }\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you implement the add functionality for locations. Here's the step-by-step solution:\n\n1. Create a new file to handle duplicate checks\n2. Add a save location endpoint\n3. Update the location.php JavaScript to handle the add functionality\n\n### [check_location_duplicate.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php)\n"
            },
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\n    $params = array($data->location, $data->abbreviation);\n    \n    $stmt = sqlsrv_query($conn, $query, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location added successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [save_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php)\n"
            },
            {
              "code": "// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null; // Store pending save data for duplicate confirmation\n\n        $(document).ready(function() {\n            // ... existing DataTable initialization code ...\n\n            // Add Location button click\n            $('#addLocationBtn').click(function() {\n                $('#modalTitle').text('Add Location');\n                $('#locationForm')[0].reset();\n                $('#locationModal').modal('show');\n            });\n\n            // Handle modal hidden event\n            $('#locationModal').on('hidden.bs.modal', function() {\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // Clear error state when inputs change\n            $('#location, #abbreviation').on('input', function() {\n                $(this).removeClass('is-invalid');\n            });\n\n            // Save Location\n            $('#saveLocationBtn').click(function() {\n                // Reset validation states\n                $('.is-invalid').removeClass('is-invalid');\n                let isValid = true;\n\n                // Validate fields\n                const locationField = $('#location');\n                const abbreviationField = $('#abbreviation');\n\n                if (!locationField.val().trim()) {\n                    locationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!abbreviationField.val().trim()) {\n                    abbreviationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!isValid) return;\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                // Check for duplicates first\n                $.ajax({\n                    url: './db/check_location_duplicate.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n                            } else {\n                                // Show confirmation modal for location name duplicate\n                                $('#duplicateLocationName').text(data.location);\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\n                                pendingSave = data;\n                                $('#duplicateConfirmModal').modal('show');\n                            }\n                        } else {\n                            performSave(data);\n                        }\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking for duplicates', 'finish', 'error');\n                    }\n                });\n            });\n\n            function performSave(data) {\n                $.ajax({\n                    url: './db/save_location.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#locationModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error saving location', 'finish', 'error');\n                    }\n                });\n            }\n\n            // Handle duplicate confirmation\n            $('#confirmDuplicateBtn').click(function() {\n                if (pendingSave) {\n                    performSave(pendingSave);\n                    $('#duplicateConfirmModal').modal('hide');\n                }\n            });\n        });\n    </script>\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\nUpdate the JavaScript section:\n\n"
            },
            {
              "code": "// ...existing code...\n        <!-- Duplicate Location Name Confirmation Modal -->\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n",
              "language": "php",
              "markdownBeforeBlock": "\nAlso, add the duplicate confirmation modal to the HTML section:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Great thanks. Now lets go back to the location management and implement some functionality. Lets start with adding new locations. Each location is specified by its full name and an abbreviation which match to the columns 'Standort' and 'Standort_Kuerzel' in the database respectively. Please follow the same structure as #file:institute.php through the use of a modal and having some validation that all fields are filled in addition to some duplicate detection similar to what is achieved with #file:check_duplicate.php . However for the locations the duplicates are identified a bit differently. It is allowed to have a location with the same full name (field 'Standort') but a different abbreviation (field 'Standort_Kuerzel') although the user needs to confirm this again explicitly. It is not allowed to have multiple locations with the same abbrevation ('Standort_Kuerzel') regardless of its full name. In this case again display an error for the user."
            },
            {
              "role": "assistant",
              "content": "I'll help you implement the add functionality for locations. Here's the step-by-step solution:\n\n1. Create a new file to handle duplicate checks\n2. Add a save location endpoint\n3. Update the location.php JavaScript to handle the add functionality\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // First check for abbreviation duplicate (not allowed)\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"abbreviation\",\n            \"existingLocation\" => $row['Standort']\n        ]);\n        exit;\n    }\n\n    // Then check for name duplicate (needs confirmation)\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    if ($row) {\n        echo json_encode([\n            \"exists\" => true,\n            \"type\" => \"location\",\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\n        ]);\n    } else {\n        echo json_encode([\n            \"exists\" => false\n        ]);\n    }\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    // Get JSON data\n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\n    $params = array($data->location, $data->abbreviation);\n    \n    $stmt = sqlsrv_query($conn, $query, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location added successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\nUpdate the JavaScript section:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null; // Store pending save data for duplicate confirmation\n\n        $(document).ready(function() {\n            // ... existing DataTable initialization code ...\n\n            // Add Location button click\n            $('#addLocationBtn').click(function() {\n                $('#modalTitle').text('Add Location');\n                $('#locationForm')[0].reset();\n                $('#locationModal').modal('show');\n            });\n\n            // Handle modal hidden event\n            $('#locationModal').on('hidden.bs.modal', function() {\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // Clear error state when inputs change\n            $('#location, #abbreviation').on('input', function() {\n                $(this).removeClass('is-invalid');\n            });\n\n            // Save Location\n            $('#saveLocationBtn').click(function() {\n                // Reset validation states\n                $('.is-invalid').removeClass('is-invalid');\n                let isValid = true;\n\n                // Validate fields\n                const locationField = $('#location');\n                const abbreviationField = $('#abbreviation');\n\n                if (!locationField.val().trim()) {\n                    locationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!abbreviationField.val().trim()) {\n                    abbreviationField.addClass('is-invalid');\n                    isValid = false;\n                }\n\n                if (!isValid) return;\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                // Check for duplicates first\n                $.ajax({\n                    url: './db/check_location_duplicate.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n                            } else {\n                                // Show confirmation modal for location name duplicate\n                                $('#duplicateLocationName').text(data.location);\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\n                                pendingSave = data;\n                                $('#duplicateConfirmModal').modal('show');\n                            }\n                        } else {\n                            performSave(data);\n                        }\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking for duplicates', 'finish', 'error');\n                    }\n                });\n            });\n\n            function performSave(data) {\n                $.ajax({\n                    url: './db/save_location.php',\n                    method: 'POST',\n                    data: JSON.stringify(data),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#locationModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error saving location', 'finish', 'error');\n                    }\n                });\n            }\n\n            // Handle duplicate confirmation\n            $('#confirmDuplicateBtn').click(function() {\n                if (pendingSave) {\n                    performSave(pendingSave);\n                    $('#duplicateConfirmModal').modal('hide');\n                }\n            });\n        });\n    </script>\n// ...existing code...\n```\n\nAlso, add the duplicate confirmation modal to the HTML section:\n\n```php\n// ...existing code...\n        <!-- Duplicate Location Name Confirmation Modal -->\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n```\n\nThis implementation:\n1. Checks for duplicate abbreviations (not allowed)\n2. Checks for duplicate location names (allowed with confirmation)\n3. Validates required fields\n4. Shows appropriate error messages and confirmation dialogs\n5. Follows the same pattern as the institute management"
            }
          ],
          "modelMessageId": "c8e9bbf4-3316-45f6-a360-e926e7ef2c57",
          "responseId": "a89f71e4-6cd5-4d2f-b3eb-a029c2b81cea",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738245489512
    },
    {
      "requestId": "request_52e983ff-406c-4f48-8570-5a20f53f188e",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 74
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 75
            },
            "text": "Ah nice thanks. However could you also follow the same modal structure as ",
            "kind": "text"
          },
          {
            "range": {
              "start": 74,
              "endExclusive": 93
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 75,
              "endLineNumber": 1,
              "endColumn": 94
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 93,
              "endExclusive": 257
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 94,
              "endLineNumber": 1,
              "endColumn": 258
            },
            "text": " for the duplicate error? To be specific please also include a duplicate Error message container that gets shown on a true duplicate that forbids adding a location.",
            "kind": "text"
          }
        ],
        "text": "Ah nice thanks. However could you also follow the same modal structure as #file:institute.php for the duplicate error? To be specific please also include a duplicate Error message container that gets shown on a true duplicate that forbids adding a location."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 74,
              "endExclusive": 93
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "name": "check_location_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "name": "save_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll update the location.php file to include the duplicate error message container similar to institute.php.\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nAdd the duplicate error container to the form and update the JavaScript handling:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                            <!-- Add duplicate error message container -->\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\n                                This abbreviation is already in use.\n                            </div>\n                        </form>\n// ...existing code...\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n// ...existing code...\n```\n\nThe changes:\n1. Added the duplicate error message container in the form\n2. Updated the duplicate handling to show both the error message container and the invalid field state\n3. Kept the existing toast message for additional feedback\n\nThe rest of the file remains unchanged. This makes the duplicate error handling consistent with the institute management page.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <!-- Add duplicate error message container -->",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                This abbreviation is already in use.",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </form>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Duplicate Location Name Confirmation Modal -->",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Duplicate Location Name</h5>",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Do you want to create another location with the same name but different abbreviation?</p>",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Utils -->",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let pendingSave = null; // Store pending save data for duplicate confirmation",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Initialize DataTable",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ajax: {",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    dataSrc: ''",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                columns: [{",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort',",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '400px'",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '200px'",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                order: [",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    [0, 'asc']",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                layout: {",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                buttons: [{",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }],",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Add Location button click",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#addLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Add Location');",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationForm')[0].reset();",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle modal hidden event",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#duplicateError').addClass('d-none');",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Clear error state when inputs change",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#location, #abbreviation').on('input', function() {",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $(this).removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Save Location",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#saveLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Reset validation states",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                let isValid = true;",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Validate fields",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const locationField = $('#location');",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const abbreviationField = $('#abbreviation');",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!locationField.val().trim()) {",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    locationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!abbreviationField.val().trim()) {",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!isValid) return;",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const data = {",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    location: locationField.val().trim(),",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviation: abbreviationField.val().trim()",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                };",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Check for duplicates first",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/check_location_duplicate.php',",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        if (response.exists) {",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (response.type === 'abbreviation') {",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show error for duplicate abbreviation",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateError').removeClass('d-none');",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show confirmation modal for location name duplicate",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateLocationName').text(data.location);",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#existingAbbreviation').text(response.existingAbbreviation);",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                pendingSave = data;",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateConfirmModal').modal('show');",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        } else {",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            performSave(data);",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error checking for duplicates', 'finish', 'error');",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            function performSave(data) {",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/save_location.php',",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error saving location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle duplicate confirmation",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#confirmDuplicateBtn').click(function() {",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (pendingSave) {",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    performSave(pendingSave);",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#duplicateConfirmModal').modal('hide');",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        });",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1073741825,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1073741825,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1073741825,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1073741825,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1073741825,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_9d0ce19b-ec1e-48df-933e-5f09cafb75da",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 7964,
          "totalElapsed": 22855
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 1725,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 810,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 41,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 65,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nAh nice thanks. However could you also follow the same modal structure as #file:institute.php for the duplicate error? To be specific please also include a duplicate Error message container that gets shown on a true duplicate that forbids adding a location.\n</prompt>",
            "response": "I'll update the location.php file to include the duplicate error message container similar to institute.php.\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nAdd the duplicate error container to the form and update the JavaScript handling:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                            <!-- Add duplicate error message container -->\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\n                                This abbreviation is already in use.\n                            </div>\n                        </form>\n// ...existing code...\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n// ...existing code...\n```\n\nThe changes:\n1. Added the duplicate error message container in the form\n2. Updated the duplicate handling to show both the error message container and the invalid field state\n3. Kept the existing toast message for additional feedback\n\nThe rest of the file remains unchanged. This makes the duplicate error handling consistent with the institute management page."
          },
          "codeBlocks": [
            {
              "code": "// ...existing code...\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                            <!-- Add duplicate error message container -->\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\n                                This abbreviation is already in use.\n                            </div>\n                        </form>\n// ...existing code...\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll update the location.php file to include the duplicate error message container similar to institute.php.\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nAdd the duplicate error container to the form and update the JavaScript handling:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Ah nice thanks. However could you also follow the same modal structure as #file:institute.php for the duplicate error? To be specific please also include a duplicate Error message container that gets shown on a true duplicate that forbids adding a location."
            },
            {
              "role": "assistant",
              "content": "I'll update the location.php file to include the duplicate error message container similar to institute.php.\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nAdd the duplicate error container to the form and update the JavaScript handling:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n                            <div class=\"mb-3\">\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\n                                <div class=\"invalid-feedback\">\n                                    Please provide an abbreviation.\n                                </div>\n                            </div>\n                            <!-- Add duplicate error message container -->\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\n                                This abbreviation is already in use.\n                            </div>\n                        </form>\n// ...existing code...\n                        if (response.exists) {\n                            if (response.type === 'abbreviation') {\n                                // Show error for duplicate abbreviation\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'error');\n// ...existing code...\n```\n\nThe changes:\n1. Added the duplicate error message container in the form\n2. Updated the duplicate handling to show both the error message container and the invalid field state\n3. Kept the existing toast message for additional feedback\n\nThe rest of the file remains unchanged. This makes the duplicate error handling consistent with the institute management page."
            }
          ],
          "modelMessageId": "9e1b5723-4fad-46ef-8c12-fda79de4b8c5",
          "responseId": "72a6b06f-f2ae-4534-a191-27ef2ff33e28",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738246145964
    },
    {
      "requestId": "request_cb4606df-1944-4fd0-851a-a550bd213877",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 80
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 81
            },
            "text": "Nice thanks. Now lets implement the deletion functionality. Again please follow ",
            "kind": "text"
          },
          {
            "range": {
              "start": 80,
              "endExclusive": 99
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 81,
              "endLineNumber": 1,
              "endColumn": 100
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 99,
              "endExclusive": 775
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 100,
              "endLineNumber": 1,
              "endColumn": 776
            },
            "text": " for this. So in the modal require to confirm the deletion and consider whether or not processes are assigned to this location or not. In case locations are assigned show a similar warning container warning the user that all assigned processes will also be deleted. However here you do not need to list the exact information just the basic warning sufficies. And if the user confirms this perform the cascading deletion from 'USEAP_RPA_Prozess_Zuweisung' i.e. delete all entries there which have this location as their foreign key in the column 'fk_RPA_Standort' which refers to the primary key 'pk_RPA_Standort' of the location table 'USEAP_RPA_Standort'. You might refer to ",
            "kind": "text"
          },
          {
            "range": {
              "start": 775,
              "endExclusive": 801
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 776,
              "endLineNumber": 1,
              "endColumn": 802
            },
            "text": "#file:delete_institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 801,
              "endExclusive": 821
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 802,
              "endLineNumber": 1,
              "endColumn": 822
            },
            "text": " for some reference.",
            "kind": "text"
          }
        ],
        "text": "Nice thanks. Now lets implement the deletion functionality. Again please follow #file:institute.php for this. So in the modal require to confirm the deletion and consider whether or not processes are assigned to this location or not. In case locations are assigned show a similar warning container warning the user that all assigned processes will also be deleted. However here you do not need to list the exact information just the basic warning sufficies. And if the user confirms this perform the cascading deletion from 'USEAP_RPA_Prozess_Zuweisung' i.e. delete all entries there which have this location as their foreign key in the column 'fk_RPA_Standort' which refers to the primary key 'pk_RPA_Standort' of the location table 'USEAP_RPA_Standort'. You might refer to #file:delete_institute.php for some reference."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:delete_institute.php",
            "range": {
              "start": 775,
              "endExclusive": 801
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 80,
              "endExclusive": 99
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "name": "check_location_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "name": "save_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
            "name": "delete_institute.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help implement the deletion functionality for locations. Here's the step-by-step solution:\n\n1. Update the Delete Confirmation Modal in location.php to include the warning\n2. Create a new check_location_assignments.php to check for process assignments\n3. Create delete_location.php for handling the deletion\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nUpdate the delete modal and add deletion handling:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p>This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null; // Add variable to store ID for deletion\n        let deletingLocation = null; // Add variable to store location name for deletion message\n\n        $(document).ready(function() {\n            // ...existing code...\n\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking process assignments', 'finish', 'error');\n                    }\n                });\n            });\n\n            // Reset warning when modal is hidden\n            $('#deleteModal').on('hidden.bs.modal', function() {\n                $('#assignedProcessesWarning').addClass('d-none');\n            });\n\n            // Confirm Delete\n            $('#confirmDeleteBtn').click(function() {\n                if (!deletingId) return;\n\n                $.ajax({\n                    url: './db/delete_location.php',\n                    method: 'DELETE',\n                    data: JSON.stringify({\n                        id: deletingId,\n                        location: deletingLocation\n                    }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error deleting location', 'finish', 'error');\n                    }\n                });\n            });\n        });\n    </script>\n// ...existing code...\n```\n\n### [check_location_assignments.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php)\n\nCreate new file to check for process assignments:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <!-- Add duplicate error message container -->",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                This abbreviation is already in use.",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </form>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p>This location has process assignments.</p>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <hr>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p class=\"mb-0\">These process assignments will also be deleted.</p>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Duplicate Location Name Confirmation Modal -->",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Duplicate Location Name</h5>",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Do you want to create another location with the same name but different abbreviation?</p>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Utils -->",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let pendingSave = null;",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingId = null; // Add variable to store ID for deletion",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingLocation = null; // Add variable to store location name for deletion message",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Initialize DataTable",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ajax: {",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    dataSrc: ''",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                columns: [{",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort',",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '400px'",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '200px'",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                order: [",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    [0, 'asc']",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                layout: {",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                buttons: [{",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }],",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Add Location button click",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#addLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Add Location');",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationForm')[0].reset();",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle modal hidden event",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#duplicateError').addClass('d-none');",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Clear error state when inputs change",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#location, #abbreviation').on('input', function() {",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $(this).removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Save Location",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#saveLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Reset validation states",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                let isValid = true;",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Validate fields",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const locationField = $('#location');",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const abbreviationField = $('#abbreviation');",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!locationField.val().trim()) {",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    locationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!abbreviationField.val().trim()) {",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!isValid) return;",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const data = {",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    location: locationField.val().trim(),",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviation: abbreviationField.val().trim()",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                };",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Check for duplicates first",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/check_location_duplicate.php',",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        if (response.exists) {",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (response.type === 'abbreviation') {",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show error for duplicate abbreviation",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateError').removeClass('d-none');",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show confirmation modal for location name duplicate",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateLocationName').text(data.location);",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#existingAbbreviation').text(response.existingAbbreviation);",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                pendingSave = data;",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateConfirmModal').modal('show');",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        } else {",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            performSave(data);",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error checking for duplicates', 'finish', 'danger');",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            function performSave(data) {",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/save_location.php',",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error saving location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle duplicate confirmation",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#confirmDuplicateBtn').click(function() {",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (pendingSave) {",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    performSave(pendingSave);",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#duplicateConfirmModal').modal('hide');",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1073741825,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1073741825,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Delete button click",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1073741825,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#locationTable').on('click', '.delete-btn', function() {",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1073741825,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                const row = table.row($(this).closest('tr')).data();",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1073741825,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                deletingId = row.pk_RPA_Standort;",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1073741825,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                deletingLocation = row.Standort;",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1073741825,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1073741825,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                // Check for assigned processes before showing delete modal",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1073741825,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $.ajax({",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1073741825,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/check_location_assignments.php',",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1073741825,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    method: 'POST',",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1073741825,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    data: JSON.stringify({ id: deletingId }),",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1073741825,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1073741825,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    success: function(response) {",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1073741825,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        $('#deleteLocationName').text(deletingLocation);",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1073741825,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        if (response.hasAssignments) {",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1073741825,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            $('#assignedProcessesWarning').removeClass('d-none');",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1073741825,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        } else {",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1073741825,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                            $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1073741825,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        }",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1073741825,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        $('#deleteModal').modal('show');",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1073741825,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1073741825,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1073741825,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error checking process assignments', 'finish', 'error');",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1073741825,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1073741825,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1073741825,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1073741825,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1073741825,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Reset warning when modal is hidden",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1073741825,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#deleteModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1073741825,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1073741825,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1073741825,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1073741825,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Confirm Delete",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1073741825,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#confirmDeleteBtn').click(function() {",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1073741825,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (!deletingId) return;",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1073741825,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1073741825,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $.ajax({",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1073741825,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/delete_location.php',",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1073741825,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    method: 'DELETE',",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1073741825,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    data: JSON.stringify({",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1073741825,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        id: deletingId,",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1073741825,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        location: deletingLocation",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1073741825,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }),",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1073741825,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1073741825,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    success: function(response) {",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1073741825,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        $('#deleteModal').modal('hide');",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1073741825,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1073741825,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1073741825,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1073741825,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1073741825,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error deleting location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1073741825,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1073741825,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1073741825,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1073741825,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        });",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1073741825,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1073741825,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1073741825,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1073741825,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1073741825,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1073741825,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Check if there are any process assignments for this location\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    \n    echo json_encode([\n        \"hasAssignments\" => $row['count'] > 0\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### [delete_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php)\n\nCreate new file to handle the deletion:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $data = json_decode(file_get_contents('php://input'));",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!isset($data->id)) {",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Missing ID parameter\");",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Check if there are any process assignments for this location",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $query, array($data->id));",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"hasAssignments\" => $row['count'] > 0",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    http_response_code(500);",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => false,",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Start transaction\n    if (sqlsrv_begin_transaction($conn) === false) {\n        throw new Exception(\"Could not begin transaction\");\n    }\n\n    // First delete process assignments\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete process assignments\");\n    }\n\n    // Then delete the location\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete location\");\n    }\n\n    // Commit transaction\n    sqlsrv_commit($conn);\n\n    echo json_encode([\n        \"status\" => \"success\",\n        \"success\" => true,\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\n    ]);\n\n} catch (Exception $e) {\n    // Rollback transaction on error\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\n        sqlsrv_rollback($conn);\n    }\n    echo json_encode([\n        \"status\" => \"error\", \n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\nThis implementation:\n1. Shows a warning if the location has process assignments\n2. Performs cascading deletion using transactions\n3. Follows the same pattern as institute deletion\n4. Uses proper error handling and rollback\n5. Shows appropriate success/error messages",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $data = json_decode(file_get_contents('php://input'));",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!isset($data->id)) {",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Missing ID parameter\");",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Start transaction",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (sqlsrv_begin_transaction($conn) === false) {",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Could not begin transaction\");",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // First delete process assignments",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!$stmt || !sqlsrv_execute($stmt)) {",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Failed to delete process assignments\");",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Then delete the location",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!$stmt || !sqlsrv_execute($stmt)) {",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Failed to delete location\");",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Commit transaction",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    sqlsrv_commit($conn);",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1073741825,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"success\",",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1073741825,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => true,",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1073741825,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1073741825,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1073741825,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1073741825,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1073741825,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Rollback transaction on error",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1073741825,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1073741825,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        sqlsrv_rollback($conn);",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1073741825,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1073741825,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1073741825,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"error\", ",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1073741825,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1073741825,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1073741825,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1073741825,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1073741825,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1073741825,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1073741825,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_d0a278c1-b3ff-40e4-8df7-1e3764fe2189",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 9058,
          "totalElapsed": 67250
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
                  "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the institute\r\n    $deleteInstitute = \"DELETE FROM USEAP_RPA_Bankenuebersicht WHERE pk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteInstitute, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete institute\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Institute \" . $data->RZBK . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n?>\r\n",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 2024,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 810,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 41,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 65,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the institute\r\n    $deleteInstitute = \"DELETE FROM USEAP_RPA_Bankenuebersicht WHERE pk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteInstitute, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete institute\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Institute \" . $data->RZBK . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n?>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        // let testMode = false;\r\n        let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nNice thanks. Now lets implement the deletion functionality. Again please follow #file:institute.php for this. So in the modal require to confirm the deletion and consider whether or not processes are assigned to this location or not. In case locations are assigned show a similar warning container warning the user that all assigned processes will also be deleted. However here you do not need to list the exact information just the basic warning sufficies. And if the user confirms this perform the cascading deletion from 'USEAP_RPA_Prozess_Zuweisung' i.e. delete all entries there which have this location as their foreign key in the column 'fk_RPA_Standort' which refers to the primary key 'pk_RPA_Standort' of the location table 'USEAP_RPA_Standort'. You might refer to #file:delete_institute.php for some reference.\n</prompt>",
            "response": "I'll help implement the deletion functionality for locations. Here's the step-by-step solution:\n\n1. Update the Delete Confirmation Modal in location.php to include the warning\n2. Create a new check_location_assignments.php to check for process assignments\n3. Create delete_location.php for handling the deletion\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nUpdate the delete modal and add deletion handling:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p>This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null; // Add variable to store ID for deletion\n        let deletingLocation = null; // Add variable to store location name for deletion message\n\n        $(document).ready(function() {\n            // ...existing code...\n\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking process assignments', 'finish', 'error');\n                    }\n                });\n            });\n\n            // Reset warning when modal is hidden\n            $('#deleteModal').on('hidden.bs.modal', function() {\n                $('#assignedProcessesWarning').addClass('d-none');\n            });\n\n            // Confirm Delete\n            $('#confirmDeleteBtn').click(function() {\n                if (!deletingId) return;\n\n                $.ajax({\n                    url: './db/delete_location.php',\n                    method: 'DELETE',\n                    data: JSON.stringify({\n                        id: deletingId,\n                        location: deletingLocation\n                    }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error deleting location', 'finish', 'error');\n                    }\n                });\n            });\n        });\n    </script>\n// ...existing code...\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n\nCreate new file to check for process assignments:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Check if there are any process assignments for this location\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    \n    echo json_encode([\n        \"hasAssignments\" => $row['count'] > 0\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n\nCreate new file to handle the deletion:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Start transaction\n    if (sqlsrv_begin_transaction($conn) === false) {\n        throw new Exception(\"Could not begin transaction\");\n    }\n\n    // First delete process assignments\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete process assignments\");\n    }\n\n    // Then delete the location\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete location\");\n    }\n\n    // Commit transaction\n    sqlsrv_commit($conn);\n\n    echo json_encode([\n        \"status\" => \"success\",\n        \"success\" => true,\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\n    ]);\n\n} catch (Exception $e) {\n    // Rollback transaction on error\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\n        sqlsrv_rollback($conn);\n    }\n    echo json_encode([\n        \"status\" => \"error\", \n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\nThis implementation:\n1. Shows a warning if the location has process assignments\n2. Performs cascading deletion using transactions\n3. Follows the same pattern as institute deletion\n4. Uses proper error handling and rollback\n5. Shows appropriate success/error messages"
          },
          "codeBlocks": [
            {
              "code": "// ...existing code...\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p>This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null; // Add variable to store ID for deletion\n        let deletingLocation = null; // Add variable to store location name for deletion message\n\n        $(document).ready(function() {\n            // ...existing code...\n\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking process assignments', 'finish', 'error');\n                    }\n                });\n            });\n\n            // Reset warning when modal is hidden\n            $('#deleteModal').on('hidden.bs.modal', function() {\n                $('#assignedProcessesWarning').addClass('d-none');\n            });\n\n            // Confirm Delete\n            $('#confirmDeleteBtn').click(function() {\n                if (!deletingId) return;\n\n                $.ajax({\n                    url: './db/delete_location.php',\n                    method: 'DELETE',\n                    data: JSON.stringify({\n                        id: deletingId,\n                        location: deletingLocation\n                    }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error deleting location', 'finish', 'error');\n                    }\n                });\n            });\n        });\n    </script>\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help implement the deletion functionality for locations. Here's the step-by-step solution:\n\n1. Update the Delete Confirmation Modal in location.php to include the warning\n2. Create a new check_location_assignments.php to check for process assignments\n3. Create delete_location.php for handling the deletion\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nUpdate the delete modal and add deletion handling:\n\n"
            },
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Check if there are any process assignments for this location\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    \n    echo json_encode([\n        \"hasAssignments\" => $row['count'] > 0\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [check_location_assignments.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php)\n\nCreate new file to check for process assignments:\n\n"
            },
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Start transaction\n    if (sqlsrv_begin_transaction($conn) === false) {\n        throw new Exception(\"Could not begin transaction\");\n    }\n\n    // First delete process assignments\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete process assignments\");\n    }\n\n    // Then delete the location\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete location\");\n    }\n\n    // Commit transaction\n    sqlsrv_commit($conn);\n\n    echo json_encode([\n        \"status\" => \"success\",\n        \"success\" => true,\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\n    ]);\n\n} catch (Exception $e) {\n    // Rollback transaction on error\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\n        sqlsrv_rollback($conn);\n    }\n    echo json_encode([\n        \"status\" => \"error\", \n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [delete_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php)\n\nCreate new file to handle the deletion:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Nice thanks. Now lets implement the deletion functionality. Again please follow #file:institute.php for this. So in the modal require to confirm the deletion and consider whether or not processes are assigned to this location or not. In case locations are assigned show a similar warning container warning the user that all assigned processes will also be deleted. However here you do not need to list the exact information just the basic warning sufficies. And if the user confirms this perform the cascading deletion from 'USEAP_RPA_Prozess_Zuweisung' i.e. delete all entries there which have this location as their foreign key in the column 'fk_RPA_Standort' which refers to the primary key 'pk_RPA_Standort' of the location table 'USEAP_RPA_Standort'. You might refer to #file:delete_institute.php for some reference."
            },
            {
              "role": "assistant",
              "content": "I'll help implement the deletion functionality for locations. Here's the step-by-step solution:\n\n1. Update the Delete Confirmation Modal in location.php to include the warning\n2. Create a new check_location_assignments.php to check for process assignments\n3. Create delete_location.php for handling the deletion\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nUpdate the delete modal and add deletion handling:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n        <!-- Delete Confirmation Modal -->\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\n            <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\n                    </div>\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p>This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null; // Add variable to store ID for deletion\n        let deletingLocation = null; // Add variable to store location name for deletion message\n\n        $(document).ready(function() {\n            // ...existing code...\n\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    error: function(xhr) {\n                        showToast('Error checking process assignments', 'finish', 'error');\n                    }\n                });\n            });\n\n            // Reset warning when modal is hidden\n            $('#deleteModal').on('hidden.bs.modal', function() {\n                $('#assignedProcessesWarning').addClass('d-none');\n            });\n\n            // Confirm Delete\n            $('#confirmDeleteBtn').click(function() {\n                if (!deletingId) return;\n\n                $.ajax({\n                    url: './db/delete_location.php',\n                    method: 'DELETE',\n                    data: JSON.stringify({\n                        id: deletingId,\n                        location: deletingLocation\n                    }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteModal').modal('hide');\n                        table.ajax.reload();\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\n                    },\n                    error: function(xhr) {\n                        showToast('Error deleting location', 'finish', 'error');\n                    }\n                });\n            });\n        });\n    </script>\n// ...existing code...\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n\nCreate new file to check for process assignments:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Check if there are any process assignments for this location\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\n    \n    echo json_encode([\n        \"hasAssignments\" => $row['count'] > 0\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n\nCreate new file to handle the deletion:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id)) {\n        throw new Exception(\"Missing ID parameter\");\n    }\n\n    // Start transaction\n    if (sqlsrv_begin_transaction($conn) === false) {\n        throw new Exception(\"Could not begin transaction\");\n    }\n\n    // First delete process assignments\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete process assignments\");\n    }\n\n    // Then delete the location\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\n\n    if (!$stmt || !sqlsrv_execute($stmt)) {\n        throw new Exception(\"Failed to delete location\");\n    }\n\n    // Commit transaction\n    sqlsrv_commit($conn);\n\n    echo json_encode([\n        \"status\" => \"success\",\n        \"success\" => true,\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\n    ]);\n\n} catch (Exception $e) {\n    // Rollback transaction on error\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\n        sqlsrv_rollback($conn);\n    }\n    echo json_encode([\n        \"status\" => \"error\", \n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\nThis implementation:\n1. Shows a warning if the location has process assignments\n2. Performs cascading deletion using transactions\n3. Follows the same pattern as institute deletion\n4. Uses proper error handling and rollback\n5. Shows appropriate success/error messages"
            }
          ],
          "modelMessageId": "abeff14a-00db-4e5a-b997-95189a270a47",
          "responseId": "40a406ae-dc86-4451-93a8-5eabe4560548",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738246481776
    },
    {
      "requestId": "request_48bb50c6-e52a-4869-8414-0fde6a0b9fc9",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 189
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 190
            },
            "text": "Thanks some slight stylistish modification here please. First please include the abbrevation in the modal in brackets after the full name. Secondly please make the text in the warning bold.",
            "kind": "text"
          }
        ],
        "text": "Thanks some slight stylistish modification here please. First please include the abbrevation in the modal in brackets after the full name. Secondly please make the text in the warning bold."
      },
      "variableData": {
        "variables": [
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "name": "check_location_assignments.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "name": "check_location_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "name": "delete_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "name": "save_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
            "name": "delete_institute.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you update the location.php file to make these styling changes.\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nChange the delete modal and location name display format:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p class=\"fw-bold\">This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n// ...existing code...\n\n    <script>\n        // ...existing code...\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n                deletingAbbr = row.Standort_Kuerzel;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        $('#deleteLocationAbbr').text(deletingAbbr);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    // ...existing code...\n                });\n            });\n        // ...existing code...\n    </script>\n```\n\nThese changes:\n1. Add the abbreviation in brackets after the location name in the delete confirmation message\n2. Make the warning text bold using Bootstrap's `fw-bold` class\n3. Add a new variable `deletingAbbr` to store the abbreviation for display\n\nThe rest of the file remains unchanged.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <!-- Add duplicate error message container -->",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                This abbreviation is already in use.",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </form>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p class=\"fw-bold\">This location has process assignments.</p>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <hr>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Duplicate Location Name Confirmation Modal -->",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Duplicate Location Name</h5>",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Do you want to create another location with the same name but different abbreviation?</p>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Utils -->",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let pendingSave = null;",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingId = null; // Add variable to store ID for deletion",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingLocation = null; // Add variable to store location name for deletion message",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Initialize DataTable",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ajax: {",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    dataSrc: ''",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                columns: [{",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort',",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '400px'",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '200px'",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                order: [",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    [0, 'asc']",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                layout: {",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                buttons: [{",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }],",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Add Location button click",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#addLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Add Location');",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationForm')[0].reset();",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle modal hidden event",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#duplicateError').addClass('d-none');",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Clear error state when inputs change",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#location, #abbreviation').on('input', function() {",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $(this).removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Save Location",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#saveLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Reset validation states",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                let isValid = true;",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Validate fields",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const locationField = $('#location');",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const abbreviationField = $('#abbreviation');",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!locationField.val().trim()) {",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    locationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!abbreviationField.val().trim()) {",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!isValid) return;",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const data = {",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    location: locationField.val().trim(),",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviation: abbreviationField.val().trim()",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                };",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Check for duplicates first",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/check_location_duplicate.php',",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        if (response.exists) {",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (response.type === 'abbreviation') {",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show error for duplicate abbreviation",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateError').removeClass('d-none');",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // Show confirmation modal for location name duplicate",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateLocationName').text(data.location);",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#existingAbbreviation').text(response.existingAbbreviation);",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                pendingSave = data;",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateConfirmModal').modal('show');",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        } else {",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            performSave(data);",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error checking for duplicates', 'finish', 'danger');",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            function performSave(data) {",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/save_location.php',",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error saving location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle duplicate confirmation",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#confirmDuplicateBtn').click(function() {",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (pendingSave) {",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    performSave(pendingSave);",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#duplicateConfirmModal').modal('hide');",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Delete button click",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationTable').on('click', '.delete-btn', function() {",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const row = table.row($(this).closest('tr')).data();",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingId = row.pk_RPA_Standort;",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingLocation = row.Standort;",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingAbbr = row.Standort_Kuerzel;",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Check for assigned processes before showing delete modal",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/check_location_assignments.php',",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify({ id: deletingId }),",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteLocationName').text(deletingLocation);",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteLocationAbbr').text(deletingAbbr);",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        if (response.hasAssignments) {",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#assignedProcessesWarning').removeClass('d-none');",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        } else {",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteModal').modal('show');",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error checking process assignments', 'finish', 'error');",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Reset warning when modal is hidden",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#deleteModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Confirm Delete",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#confirmDeleteBtn').click(function() {",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!deletingId) return;",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/delete_location.php',",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'DELETE',",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify({",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        id: deletingId,",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        location: deletingLocation",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }),",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteModal').modal('hide');",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error deleting location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        });",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </script>",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</body>",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1073741825,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1073741825,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1073741825,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_d0c231bc-5687-493b-9d13-6f65f876bf6f",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 10355,
          "totalElapsed": 32712
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
                  "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the institute\r\n    $deleteInstitute = \"DELETE FROM USEAP_RPA_Bankenuebersicht WHERE pk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteInstitute, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete institute\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Institute \" . $data->RZBK . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n?>\r\n",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 2381,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 812,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 41,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the location\r\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete location\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 57,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 65,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Check if there are any process assignments for this location\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    \r\n    echo json_encode([\r\n        \"hasAssignments\" => $row['count'] > 0\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 38,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the institute\r\n    $deleteInstitute = \"DELETE FROM USEAP_RPA_Bankenuebersicht WHERE pk_RPA_Bankenuebersicht = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteInstitute, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete institute\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Institute \" . $data->RZBK . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n?>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the location\r\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete location\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Check if there are any process assignments for this location\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    \r\n    echo json_encode([\r\n        \"hasAssignments\" => $row['count'] > 0\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nThanks some slight stylistish modification here please. First please include the abbrevation in the modal in brackets after the full name. Secondly please make the text in the warning bold.\n</prompt>",
            "response": "I'll help you update the location.php file to make these styling changes.\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nChange the delete modal and location name display format:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p class=\"fw-bold\">This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n// ...existing code...\n\n    <script>\n        // ...existing code...\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n                deletingAbbr = row.Standort_Kuerzel;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        $('#deleteLocationAbbr').text(deletingAbbr);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    // ...existing code...\n                });\n            });\n        // ...existing code...\n    </script>\n```\n\nThese changes:\n1. Add the abbreviation in brackets after the location name in the delete confirmation message\n2. Make the warning text bold using Bootstrap's `fw-bold` class\n3. Add a new variable `deletingAbbr` to store the abbreviation for display\n\nThe rest of the file remains unchanged."
          },
          "codeBlocks": [
            {
              "code": "// ...existing code...\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p class=\"fw-bold\">This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n// ...existing code...\n\n    <script>\n        // ...existing code...\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n                deletingAbbr = row.Standort_Kuerzel;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        $('#deleteLocationAbbr').text(deletingAbbr);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    // ...existing code...\n                });\n            });\n        // ...existing code...\n    </script>\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you update the location.php file to make these styling changes.\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nChange the delete modal and location name display format:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Thanks some slight stylistish modification here please. First please include the abbrevation in the modal in brackets after the full name. Secondly please make the text in the warning bold."
            },
            {
              "role": "assistant",
              "content": "I'll help you update the location.php file to make these styling changes.\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nChange the delete modal and location name display format:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n                    <div class=\"modal-body\">\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\n                            <p class=\"fw-bold\">This location has process assignments.</p>\n                            <hr>\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\n                        </div>\n                    </div>\n// ...existing code...\n\n    <script>\n        // ...existing code...\n            // Delete button click\n            $('#locationTable').on('click', '.delete-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                deletingId = row.pk_RPA_Standort;\n                deletingLocation = row.Standort;\n                deletingAbbr = row.Standort_Kuerzel;\n\n                // Check for assigned processes before showing delete modal\n                $.ajax({\n                    url: './db/check_location_assignments.php',\n                    method: 'POST',\n                    data: JSON.stringify({ id: deletingId }),\n                    contentType: 'application/json',\n                    success: function(response) {\n                        $('#deleteLocationName').text(deletingLocation);\n                        $('#deleteLocationAbbr').text(deletingAbbr);\n                        if (response.hasAssignments) {\n                            $('#assignedProcessesWarning').removeClass('d-none');\n                        } else {\n                            $('#assignedProcessesWarning').addClass('d-none');\n                        }\n                        $('#deleteModal').modal('show');\n                    },\n                    // ...existing code...\n                });\n            });\n        // ...existing code...\n    </script>\n```\n\nThese changes:\n1. Add the abbreviation in brackets after the location name in the delete confirmation message\n2. Make the warning text bold using Bootstrap's `fw-bold` class\n3. Add a new variable `deletingAbbr` to store the abbreviation for display\n\nThe rest of the file remains unchanged."
            }
          ],
          "modelMessageId": "e6a6d787-3832-462c-a558-bbd4e443d952",
          "responseId": "82dff1a8-b64f-487f-a26c-c3002edfe539",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738246863016
    },
    {
      "requestId": "request_2a6db30d-6507-47b1-82ca-c0c4b050031e",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 61
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 62
            },
            "text": "Great. Now lets do the modify functionality. Again following ",
            "kind": "text"
          },
          {
            "range": {
              "start": 61,
              "endExclusive": 80
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 62,
              "endLineNumber": 1,
              "endColumn": 81
            },
            "text": "#file:institute.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 80,
              "endExclusive": 442
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 81,
              "endLineNumber": 1,
              "endColumn": 443
            },
            "text": " open a modal that allows modification of the fields. Here for the locations all fields can be edited so no need to differentiate here or disable some fields. But we need to make sure to adhere to the validation we already did when adding new locations that the abbreviation must be unique i.e. we cannot change it to a value that already exists in the database.",
            "kind": "text"
          }
        ],
        "text": "Great. Now lets do the modify functionality. Again following #file:institute.php open a modal that allows modification of the fields. Here for the locations all fields can be edited so no need to differentiate here or disable some fields. But we need to make sure to adhere to the validation we already did when adding new locations that the abbreviation must be unique i.e. we cannot change it to a value that already exists in the database."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:institute.php",
            "range": {
              "start": 61,
              "endExclusive": 80
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "name": "save_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "name": "check_location_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
            "name": "check_location_assignments.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
            "name": "delete_location.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you implement the modify functionality for locations. Here's the step-by-step solution:\n\n1. Add an update endpoint\n2. Update the location handling in the JavaScript to handle editing\n\n### [update_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php)\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\update_location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // Check if the new abbreviation is already used by another location\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\n        echo json_encode([\n            \"success\" => false,\n            \"status\" => \"error\",\n            \"duplicate\" => true,\n            \"message\" => \"This abbreviation is already in use by another location\"\n        ]);\n        exit;\n    }\n\n    // Update the location\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\n    $params = array($data->location, $data->abbreviation, $data->id);\n    \n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location updated successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nUpdate the JavaScript to handle editing:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $data = json_decode(file_get_contents('php://input'));",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Missing required fields\");",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Check if the new abbreviation is already used by another location",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        echo json_encode([",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"success\" => false,",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"status\" => \"error\",",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"duplicate\" => true,",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            \"message\" => \"This abbreviation is already in use by another location\"",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ]);",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        exit;",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    // Update the location",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $params = array($data->location, $data->abbreviation, $data->id);",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1073741825,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $stmt = sqlsrv_query($conn, $updateQuery, $params);",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1073741825,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1073741825,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($stmt === false) {",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1073741825,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1073741825,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1073741825,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1073741825,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1073741825,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => true,",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1073741825,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"success\",",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1073741825,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => \"Location updated successfully\"",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1073741825,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1073741825,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1073741825,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1073741825,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    http_response_code(500);",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1073741825,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1073741825,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => false,",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1073741825,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"status\" => \"error\",",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1073741825,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"message\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1073741825,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1073741825,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1073741825,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1073741825,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1073741825,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1073741825,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null;\n        let deletingLocation = null;\n        let deletingAbbr = null;\n        let editingId = null; // Add variable to store ID for editing\n\n        $(document).ready(function() {\n            // ...existing table initialization code...\n\n            // Edit button click\n            $('#locationTable').on('click', '.edit-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                editingId = row.pk_RPA_Standort;\n\n                $('#modalTitle').text('Edit Location');\n                $('#location').val(row.Standort);\n                $('#abbreviation').val(row.Standort_Kuerzel);\n                $('#locationModal').modal('show');\n            });\n\n            // Save Location (modified to handle both add and edit)\n            $('#saveLocationBtn').click(function() {\n                // ...existing validation code...\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                if (editingId) {\n                    // For editing, include the ID and use update endpoint\n                    data.id = editingId;\n                    $.ajax({\n                        url: './db/update_location.php',\n                        method: 'PUT',\n                        data: JSON.stringify(data),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            if (response.duplicate) {\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(response.message, 'finish', 'danger');\n                            } else {\n                                $('#locationModal').modal('hide');\n                                table.ajax.reload();\n                                showToast(response.message, 'finish', response.status);\n                            }\n                        },\n                        error: function(xhr) {\n                            showToast('Error updating location', 'finish', 'error');\n                        }\n                    });\n                } else {\n                    // For new entries, keep existing duplicate check and save logic\n                    // ...existing check_location_duplicate.php call...\n                }\n            });\n\n            // Reset editingId when modal is hidden\n            $('#locationModal').on('hidden.bs.modal', function() {\n                editingId = null;\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // ...rest of existing code...\n        });\n    </script>\n// ...existing code...\n```\n\nThe changes:\n1. Added an update endpoint that checks for duplicate abbreviations while excluding the current record\n2. Added handling for edit button clicks\n3. Modified save functionality to handle both new and existing records\n4. Reset editing state when modal is closed\n5. Added proper validation and error handling for updates\n\nThe code follows the same pattern as institute.php but with the specific validation rules for locations (unique abbreviation).",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Location Management</title>",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Location Management</h2>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons mb-3\">",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-table\"></i> Process Overview",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addLocationBtn\" class=\"btn btn-success\">",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add Location",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add a div with max-width to constrain table width -->",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div style=\"max-width: 800px;\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"locationTable\" class=\"table table-striped\">",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Location</th>",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Abbreviation</th>",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Modify</th>",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Delete</th>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add/Edit Location Modal -->",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <form id=\"locationForm\" novalidate>",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <input type=\"hidden\" id=\"locationId\">",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"location\" class=\"form-label\">Location</label>",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"location\" required>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide a location name.",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div class=\"mb-3\">",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"invalid-feedback\">",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    Please provide an abbreviation.",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <!-- Add duplicate error message container -->",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                This abbreviation is already in use.",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </div>",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </form>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Delete Confirmation Modal -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Confirm Deletion</h5>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p class=\"fw-bold\">This location has process assignments.</p>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <hr>",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        </div>",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Duplicate Location Name Confirmation Modal -->",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <div class=\"modal-dialog\">",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"modal-content\">",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-header\">",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <h5 class=\"modal-title\">Duplicate Location Name</h5>",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-body\">",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <p>Do you want to create another location with the same name but different abbreviation?</p>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"modal-footer\">",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </div>",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Utils -->",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let pendingSave = null;",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingId = null; // Add variable to store ID for deletion",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingLocation = null; // Add variable to store location name for deletion message",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let editingId = null; // Add variable to store ID for editing",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Initialize DataTable",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            table = $('#locationTable').DataTable({",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ajax: {",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/get_locations.php',",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    dataSrc: ''",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                columns: [{",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort',",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '400px'",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: 'Standort_Kuerzel',",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '200px'",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-pencil\"></i>",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: null,",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        orderable: false,",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        className: 'text-center',",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        width: '50px',",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        render: function(data, type, row) {",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return `",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <i class=\"bi bi-trash\"></i>",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </button>",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            `;",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                order: [",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    [0, 'asc']",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                ],",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                layout: {",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                buttons: [{",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    action: function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        dt.ajax.reload();",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }],",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Add Location button click",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#addLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Add Location');",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationForm')[0].reset();",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle modal hidden event",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                editingId = null;",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#duplicateError').addClass('d-none');",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Clear error state when inputs change",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#location, #abbreviation').on('input', function() {",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $(this).removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Save Location",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#saveLocationBtn').click(function() {",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Reset validation states",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('.is-invalid').removeClass('is-invalid');",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                let isValid = true;",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Validate fields",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const locationField = $('#location');",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const abbreviationField = $('#abbreviation');",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!locationField.val().trim()) {",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    locationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!abbreviationField.val().trim()) {",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    isValid = false;",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (!isValid) return;",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const data = {",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    location: locationField.val().trim(),",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    abbreviation: abbreviationField.val().trim()",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                };",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (editingId) {",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // For editing, include the ID and use update endpoint",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data.id = editingId;",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $.ajax({",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        url: './db/update_location.php',",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        method: 'PUT',",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        contentType: 'application/json',",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        success: function(response) {",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (response.duplicate) {",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#duplicateError').removeClass('d-none');",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(response.message, 'finish', 'danger');",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                table.ajax.reload();",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        error: function(xhr) {",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            showToast('Error updating location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                } else {",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // For new entries, keep existing duplicate check and save logic",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Check for duplicates first",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $.ajax({",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        url: './db/check_location_duplicate.php',",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        method: 'POST',",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        contentType: 'application/json',",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        success: function(response) {",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (response.exists) {",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                if (response.type === 'abbreviation') {",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    // Show error for duplicate abbreviation",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    abbreviationField.addClass('is-invalid');",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    $('#duplicateError').removeClass('d-none');",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                } else {",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    // Show confirmation modal for location name duplicate",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    $('#duplicateLocationName').text(data.location);",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    $('#existingAbbreviation').text(response.existingAbbreviation);",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    pendingSave = data;",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    $('#duplicateConfirmModal').modal('show');",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                }",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                performSave(data);",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        error: function(xhr) {",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            showToast('Error checking for duplicates', 'finish', 'danger');",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            function performSave(data) {",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/save_location.php',",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify(data),",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#locationModal').modal('hide');",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast(response.message, 'finish', response.status);",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        showToast('Error saving location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                });",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            }",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Handle duplicate confirmation",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#confirmDuplicateBtn').click(function() {",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                if (pendingSave) {",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    performSave(pendingSave);",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#duplicateConfirmModal').modal('hide');",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                }",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Edit button click",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationTable').on('click', '.edit-btn', function() {",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const row = table.row($(this).closest('tr')).data();",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                editingId = row.pk_RPA_Standort;",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#modalTitle').text('Edit Location');",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#location').val(row.Standort);",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#abbreviation').val(row.Standort_Kuerzel);",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $('#locationModal').modal('show');",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // Delete button click",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $('#locationTable').on('click', '.delete-btn', function() {",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                const row = table.row($(this).closest('tr')).data();",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingId = row.pk_RPA_Standort;",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingLocation = row.Standort;",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                deletingAbbr = row.Standort_Kuerzel;",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                // Check for assigned processes before showing delete modal",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                $.ajax({",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    url: './db/check_location_assignments.php',",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    method: 'POST',",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    data: JSON.stringify({ id: deletingId }),",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    success: function(response) {",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteLocationName').text(deletingLocation);",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteLocationAbbr').text(deletingAbbr);",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        if (response.hasAssignments) {",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#assignedProcessesWarning').removeClass('d-none');",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        } else {",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteModal').modal('show');",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    },",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1073741825,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error checking process assignments', 'finish', 'error');",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1073741825,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1073741825,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1073741825,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1073741825,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1073741825,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Reset warning when modal is hidden",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1073741825,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#deleteModal').on('hidden.bs.modal', function() {",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1073741825,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $('#assignedProcessesWarning').addClass('d-none');",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1073741825,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1073741825,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1073741825,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            // Confirm Delete",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1073741825,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            $('#confirmDeleteBtn').click(function() {",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1073741825,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                if (!deletingId) return;",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1073741825,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1073741825,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                $.ajax({",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1073741825,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    url: './db/delete_location.php',",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1073741825,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    method: 'DELETE',",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1073741825,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    data: JSON.stringify({",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1073741825,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        id: deletingId,",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1073741825,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        location: deletingLocation",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1073741825,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }),",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1073741825,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    contentType: 'application/json',",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1073741825,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    success: function(response) {",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1073741825,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        $('#deleteModal').modal('hide');",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1073741825,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        table.ajax.reload();",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1073741825,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1073741825,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    },",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1073741825,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    error: function(xhr) {",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1073741825,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                        showToast('Error deleting location', 'finish', 'error');",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1073741825,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                    }",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1073741825,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n                });",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1073741825,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            });",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1073741825,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        });",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1073741825,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    </script>",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1073741825,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1073741825,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1073741825,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1073741825,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1073741825,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_2dc65fa3-6de0-4fad-8a8f-ae2e4425a4cf",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 9413,
          "totalElapsed": 46257
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the location\r\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete location\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 57,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Check if there are any process assignments for this location\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    \r\n    echo json_encode([\r\n        \"hasAssignments\" => $row['count'] > 0\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 38,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 65,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p class=\"fw-bold\">This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n                deletingAbbr = row.Standort_Kuerzel;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        $('#deleteLocationAbbr').text(deletingAbbr);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 2741,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 812,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 41,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Start transaction\r\n    if (sqlsrv_begin_transaction($conn) === false) {\r\n        throw new Exception(\"Could not begin transaction\");\r\n    }\r\n\r\n    // First delete process assignments\r\n    $deleteAssignments = \"DELETE FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteAssignments, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete process assignments\");\r\n    }\r\n\r\n    // Then delete the location\r\n    $deleteLocation = \"DELETE FROM USEAP_RPA_Standort WHERE pk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_prepare($conn, $deleteLocation, array($data->id));\r\n\r\n    if (!$stmt || !sqlsrv_execute($stmt)) {\r\n        throw new Exception(\"Failed to delete location\");\r\n    }\r\n\r\n    // Commit transaction\r\n    sqlsrv_commit($conn);\r\n\r\n    echo json_encode([\r\n        \"status\" => \"success\",\r\n        \"success\" => true,\r\n        \"message\" => \"Location \" . $data->location . \" deleted successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    // Rollback transaction on error\r\n    if (isset($conn) && sqlsrv_begin_transaction($conn) !== false) {\r\n        sqlsrv_rollback($conn);\r\n    }\r\n    echo json_encode([\r\n        \"status\" => \"error\", \r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id)) {\r\n        throw new Exception(\"Missing ID parameter\");\r\n    }\r\n\r\n    // Check if there are any process assignments for this location\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Prozess_Zuweisung WHERE fk_RPA_Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    \r\n    echo json_encode([\r\n        \"hasAssignments\" => $row['count'] > 0\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p class=\"fw-bold\">This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                // Check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_location_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.type === 'abbreviation') {\r\n                                // Show error for duplicate abbreviation\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                            } else {\r\n                                // Show confirmation modal for location name duplicate\r\n                                $('#duplicateLocationName').text(data.location);\r\n                                $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'danger');\r\n                    }\r\n                });\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n                deletingAbbr = row.Standort_Kuerzel;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        $('#deleteLocationAbbr').text(deletingAbbr);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nGreat. Now lets do the modify functionality. Again following #file:institute.php open a modal that allows modification of the fields. Here for the locations all fields can be edited so no need to differentiate here or disable some fields. But we need to make sure to adhere to the validation we already did when adding new locations that the abbreviation must be unique i.e. we cannot change it to a value that already exists in the database.\n</prompt>",
            "response": "I'll help you implement the modify functionality for locations. Here's the step-by-step solution:\n\n1. Add an update endpoint\n2. Update the location handling in the JavaScript to handle editing\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // Check if the new abbreviation is already used by another location\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\n        echo json_encode([\n            \"success\" => false,\n            \"status\" => \"error\",\n            \"duplicate\" => true,\n            \"message\" => \"This abbreviation is already in use by another location\"\n        ]);\n        exit;\n    }\n\n    // Update the location\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\n    $params = array($data->location, $data->abbreviation, $data->id);\n    \n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location updated successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nUpdate the JavaScript to handle editing:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null;\n        let deletingLocation = null;\n        let deletingAbbr = null;\n        let editingId = null; // Add variable to store ID for editing\n\n        $(document).ready(function() {\n            // ...existing table initialization code...\n\n            // Edit button click\n            $('#locationTable').on('click', '.edit-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                editingId = row.pk_RPA_Standort;\n\n                $('#modalTitle').text('Edit Location');\n                $('#location').val(row.Standort);\n                $('#abbreviation').val(row.Standort_Kuerzel);\n                $('#locationModal').modal('show');\n            });\n\n            // Save Location (modified to handle both add and edit)\n            $('#saveLocationBtn').click(function() {\n                // ...existing validation code...\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                if (editingId) {\n                    // For editing, include the ID and use update endpoint\n                    data.id = editingId;\n                    $.ajax({\n                        url: './db/update_location.php',\n                        method: 'PUT',\n                        data: JSON.stringify(data),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            if (response.duplicate) {\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(response.message, 'finish', 'danger');\n                            } else {\n                                $('#locationModal').modal('hide');\n                                table.ajax.reload();\n                                showToast(response.message, 'finish', response.status);\n                            }\n                        },\n                        error: function(xhr) {\n                            showToast('Error updating location', 'finish', 'error');\n                        }\n                    });\n                } else {\n                    // For new entries, keep existing duplicate check and save logic\n                    // ...existing check_location_duplicate.php call...\n                }\n            });\n\n            // Reset editingId when modal is hidden\n            $('#locationModal').on('hidden.bs.modal', function() {\n                editingId = null;\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // ...rest of existing code...\n        });\n    </script>\n// ...existing code...\n```\n\nThe changes:\n1. Added an update endpoint that checks for duplicate abbreviations while excluding the current record\n2. Added handling for edit button clicks\n3. Modified save functionality to handle both new and existing records\n4. Reset editing state when modal is closed\n5. Added proper validation and error handling for updates\n\nThe code follows the same pattern as institute.php but with the specific validation rules for locations (unique abbreviation)."
          },
          "codeBlocks": [
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // Check if the new abbreviation is already used by another location\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\n        echo json_encode([\n            \"success\" => false,\n            \"status\" => \"error\",\n            \"duplicate\" => true,\n            \"message\" => \"This abbreviation is already in use by another location\"\n        ]);\n        exit;\n    }\n\n    // Update the location\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\n    $params = array($data->location, $data->abbreviation, $data->id);\n    \n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location updated successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you implement the modify functionality for locations. Here's the step-by-step solution:\n\n1. Add an update endpoint\n2. Update the location handling in the JavaScript to handle editing\n\n### [update_location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php)\n"
            },
            {
              "code": "// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null;\n        let deletingLocation = null;\n        let deletingAbbr = null;\n        let editingId = null; // Add variable to store ID for editing\n\n        $(document).ready(function() {\n            // ...existing table initialization code...\n\n            // Edit button click\n            $('#locationTable').on('click', '.edit-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                editingId = row.pk_RPA_Standort;\n\n                $('#modalTitle').text('Edit Location');\n                $('#location').val(row.Standort);\n                $('#abbreviation').val(row.Standort_Kuerzel);\n                $('#locationModal').modal('show');\n            });\n\n            // Save Location (modified to handle both add and edit)\n            $('#saveLocationBtn').click(function() {\n                // ...existing validation code...\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                if (editingId) {\n                    // For editing, include the ID and use update endpoint\n                    data.id = editingId;\n                    $.ajax({\n                        url: './db/update_location.php',\n                        method: 'PUT',\n                        data: JSON.stringify(data),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            if (response.duplicate) {\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(response.message, 'finish', 'danger');\n                            } else {\n                                $('#locationModal').modal('hide');\n                                table.ajax.reload();\n                                showToast(response.message, 'finish', response.status);\n                            }\n                        },\n                        error: function(xhr) {\n                            showToast('Error updating location', 'finish', 'error');\n                        }\n                    });\n                } else {\n                    // For new entries, keep existing duplicate check and save logic\n                    // ...existing check_location_duplicate.php call...\n                }\n            });\n\n            // Reset editingId when modal is hidden\n            $('#locationModal').on('hidden.bs.modal', function() {\n                editingId = null;\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // ...rest of existing code...\n        });\n    </script>\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [location.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php)\n\nUpdate the JavaScript to handle editing:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Great. Now lets do the modify functionality. Again following #file:institute.php open a modal that allows modification of the fields. Here for the locations all fields can be edited so no need to differentiate here or disable some fields. But we need to make sure to adhere to the validation we already did when adding new locations that the abbreviation must be unique i.e. we cannot change it to a value that already exists in the database."
            },
            {
              "role": "assistant",
              "content": "I'll help you implement the modify functionality for locations. Here's the step-by-step solution:\n\n1. Add an update endpoint\n2. Update the location handling in the JavaScript to handle editing\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $data = json_decode(file_get_contents('php://input'));\n\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\n        throw new Exception(\"Missing required fields\");\n    }\n\n    // Check if the new abbreviation is already used by another location\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\n        echo json_encode([\n            \"success\" => false,\n            \"status\" => \"error\",\n            \"duplicate\" => true,\n            \"message\" => \"This abbreviation is already in use by another location\"\n        ]);\n        exit;\n    }\n\n    // Update the location\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\n    $params = array($data->location, $data->abbreviation, $data->id);\n    \n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\n    \n    if ($stmt === false) {\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"status\" => \"success\",\n        \"message\" => \"Location updated successfully\"\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"status\" => \"error\",\n        \"message\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n\nUpdate the JavaScript to handle editing:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n// ...existing code...\n    <script>\n        let table;\n        let pendingSave = null;\n        let deletingId = null;\n        let deletingLocation = null;\n        let deletingAbbr = null;\n        let editingId = null; // Add variable to store ID for editing\n\n        $(document).ready(function() {\n            // ...existing table initialization code...\n\n            // Edit button click\n            $('#locationTable').on('click', '.edit-btn', function() {\n                const row = table.row($(this).closest('tr')).data();\n                editingId = row.pk_RPA_Standort;\n\n                $('#modalTitle').text('Edit Location');\n                $('#location').val(row.Standort);\n                $('#abbreviation').val(row.Standort_Kuerzel);\n                $('#locationModal').modal('show');\n            });\n\n            // Save Location (modified to handle both add and edit)\n            $('#saveLocationBtn').click(function() {\n                // ...existing validation code...\n\n                const data = {\n                    location: locationField.val().trim(),\n                    abbreviation: abbreviationField.val().trim()\n                };\n\n                if (editingId) {\n                    // For editing, include the ID and use update endpoint\n                    data.id = editingId;\n                    $.ajax({\n                        url: './db/update_location.php',\n                        method: 'PUT',\n                        data: JSON.stringify(data),\n                        contentType: 'application/json',\n                        success: function(response) {\n                            if (response.duplicate) {\n                                abbreviationField.addClass('is-invalid');\n                                $('#duplicateError').removeClass('d-none');\n                                showToast(response.message, 'finish', 'danger');\n                            } else {\n                                $('#locationModal').modal('hide');\n                                table.ajax.reload();\n                                showToast(response.message, 'finish', response.status);\n                            }\n                        },\n                        error: function(xhr) {\n                            showToast('Error updating location', 'finish', 'error');\n                        }\n                    });\n                } else {\n                    // For new entries, keep existing duplicate check and save logic\n                    // ...existing check_location_duplicate.php call...\n                }\n            });\n\n            // Reset editingId when modal is hidden\n            $('#locationModal').on('hidden.bs.modal', function() {\n                editingId = null;\n                $('.is-invalid').removeClass('is-invalid');\n                $('#duplicateError').addClass('d-none');\n            });\n\n            // ...rest of existing code...\n        });\n    </script>\n// ...existing code...\n```\n\nThe changes:\n1. Added an update endpoint that checks for duplicate abbreviations while excluding the current record\n2. Added handling for edit button clicks\n3. Modified save functionality to handle both new and existing records\n4. Reset editing state when modal is closed\n5. Added proper validation and error handling for updates\n\nThe code follows the same pattern as institute.php but with the specific validation rules for locations (unique abbreviation)."
            }
          ],
          "modelMessageId": "921148f4-bebe-4697-99f5-385814c2cec6",
          "responseId": "7952079d-ed83-4d7a-9092-af45c48b5f6d",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_assignments.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_assignments.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\delete_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/delete_location.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738247138048
    },
    {
      "requestId": "request_4050b08a-a6e3-4f5f-84b1-192ba05cf9fb",
      "message": {
        "parts": [
          {
            "range": {
              "start": 0,
              "endExclusive": 27
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 1,
              "endLineNumber": 1,
              "endColumn": 28
            },
            "text": "Perfect. Now going back to ",
            "kind": "text"
          },
          {
            "range": {
              "start": 27,
              "endExclusive": 42
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 28,
              "endLineNumber": 1,
              "endColumn": 43
            },
            "text": "#file:index.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 42,
              "endExclusive": 144
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 43,
              "endLineNumber": 1,
              "endColumn": 145
            },
            "text": " I need a functionality to refresh the locations similar to what we already do with the institutes in ",
            "kind": "text"
          },
          {
            "range": {
              "start": 144,
              "endExclusive": 169
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 145,
              "endLineNumber": 1,
              "endColumn": 170
            },
            "text": "#file:populateAddModal.js",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 169,
              "endExclusive": 297
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 170,
              "endLineNumber": 1,
              "endColumn": 298
            },
            "text": " and the function refreshInstitutes(). So we need to update the variable locationMapping that originally gets populated through ",
            "kind": "text"
          },
          {
            "range": {
              "start": 297,
              "endExclusive": 321
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 298,
              "endLineNumber": 1,
              "endColumn": 322
            },
            "text": "#file:check_standort.php",
            "id": "vscode.file",
            "data": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "scheme": "file"
            },
            "isFile": true,
            "kind": "dynamic"
          },
          {
            "range": {
              "start": 321,
              "endExclusive": 456
            },
            "editorRange": {
              "startLineNumber": 1,
              "startColumn": 322,
              "endLineNumber": 1,
              "endColumn": 457
            },
            "text": " . Please do this through a similar function as refreshInstitutes() and also call it alongside it in index.html for the refresh button.",
            "kind": "text"
          }
        ],
        "text": "Perfect. Now going back to #file:index.php I need a functionality to refresh the locations similar to what we already do with the institutes in #file:populateAddModal.js and the function refreshInstitutes(). So we need to update the variable locationMapping that originally gets populated through #file:check_standort.php . Please do this through a similar function as refreshInstitutes() and also call it alongside it in index.html for the refresh button."
      },
      "variableData": {
        "variables": [
          {
            "id": "vscode.file",
            "name": "file:check_standort.php",
            "range": {
              "start": 297,
              "endExclusive": 321
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:populateAddModal.js",
            "range": {
              "start": 144,
              "endExclusive": 169
            },
            "value": {
              "$mid": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "id": "vscode.file",
            "name": "file:index.php",
            "range": {
              "start": 27,
              "endExclusive": 42
            },
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "isFile": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
            "name": "get_locations.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
            "name": "save_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\update_location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
            "name": "update_location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "name": "index.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
            "name": "location.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
            "name": "check_standort.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\js\\populateAddModal.js",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
            "name": "populateAddModal.js",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
            "name": "check_duplicate.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
            "name": "institute.php",
            "isFile": true,
            "isDynamic": true
          },
          {
            "value": {
              "$mid": 1,
              "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
              "_sep": 1,
              "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
              "scheme": "file"
            },
            "id": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
            "name": "check_location_duplicate.php",
            "isFile": true,
            "isDynamic": true
          }
        ]
      },
      "response": [
        {
          "value": "I'll help you implement the location refresh functionality. Here's what we need to do:\n\n1. Create a new endpoint for refreshing locations\n2. Add a refresh function to utils.js (since it's a general utility)\n3. Update the refresh button handler in index.php\n\n### [refresh_locations.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php)\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\refresh_locations.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
            "scheme": "file"
          }
        },
        {
          "value": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\n    $result = sqlsrv_query($conn, $query);\n\n    if ($result === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $locations = array();\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\n        $locations[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"locations\" => $locations\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"error\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### [utils.js](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/utils.js)\n```javascript\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<?php",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nheader('Content-Type: application/json');",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1073741825,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nrequire_once 'db_config.php';",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1073741825,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1073741825,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ntry {",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1073741825,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $conn = Database::getConnection();",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1073741825,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1073741825,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1073741825,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $result = sqlsrv_query($conn, $query);",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1073741825,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1073741825,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    if ($result === false) {",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1073741825,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1073741825,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1073741825,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1073741825,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    $locations = array();",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1073741825,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1073741825,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        $locations[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1073741825,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1073741825,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1073741825,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1073741825,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => true,",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1073741825,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"locations\" => $locations",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1073741825,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1073741825,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1073741825,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} catch (Exception $e) {",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1073741825,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    http_response_code(500);",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1073741825,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    echo json_encode([",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1073741825,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"success\" => false,",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1073741825,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        \"error\" => $e->getMessage()",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1073741825,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    ]);",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1073741825,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n} finally {",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1073741825,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    Database::closeConnection();",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1073741825,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1073741825,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1073741825,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\js\\utils.js",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/utils.js",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n\n// Add new function for refreshing locations\nasync function refreshLocations() {\n    try {\n        const response = await fetch('./db/refresh_locations.php');\n        if (!response.ok) throw new Error('Network response was not ok');\n        const data = await response.json();\n        \n        if (data.success) {\n            locationMapping = data.locations;\n            showToast('Locations have been updated', 'refresh', 'success');\n        } else {\n            throw new Error(data.error || 'Unknown error occurred');\n        }\n    } catch (error) {\n        console.error('Error refreshing locations:', error);\n        showToast('Error updating locations', 'error', 'danger');\n    }\n}\n```\n\n### [index.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php)\nUpdate the refresh button action in the DataTable initialization:\n\n```php\n",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/utils.js",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "function showToast(message, type = \"misc\", result = \"info\") {",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tlet toast;",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tswitch (type) {",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tcase \"start\":",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast = $(\"#startToast\");",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tcase \"finish\":",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast = $(\"#finishToast\");",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tdefault:",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast = $(\"#miscToast\");",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ttoast.removeClass(\"text-bg-success text-bg-info text-bg-danger text-bg-warning\");",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tswitch (result) {",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tcase \"success\":",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast.addClass(\"text-bg-success\");",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tcase \"danger\":",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast.addClass(\"text-bg-danger\");",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tcase \"warning\":",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast.addClass(\"text-bg-warning\");",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tdefault:",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttoast.addClass(\"text-bg-info\");",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tbreak;",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\ttoast.find(\".toast-body\").text(message);",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst bsToast = new bootstrap.Toast(toast);",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tbsToast.show();",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function deepEqual(obj1, obj2) {",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Check if both are the same object reference",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (obj1 === obj2) {",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\treturn true;",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Check if either is null or not an object (base case)",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (obj1 === null || obj2 === null || typeof obj1 !== \"object\" || typeof obj2 !== \"object\") {",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\treturn false;",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Get all keys from both objects",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst keys1 = Object.keys(obj1);",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst keys2 = Object.keys(obj2);",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Check if both objects have the same number of keys",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (keys1.length !== keys2.length) {",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\treturn false;",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Check each key and value recursively",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tfor (let key of keys1) {",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tif (!keys2.includes(key) || !deepEqual(obj1[key], obj2[key])) {",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\treturn false;",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t}",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\treturn true;",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "// Define a function to remove specified elements from an array",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function exclude(array, exclude) {",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let excludeSet = new Set(exclude);",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return array.filter(item => !excludeSet.has(item));",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "// Symmetric set difference between two arrays",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function difference(array1, array2) {",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let set1 = new Set(array1);",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let set2 = new Set(array2);",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    // Elements in array1 but not in array2",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let uniqueToSet1 = array1.filter(item => !set2.has(item));",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    // Elements in array2 but not in array1",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let uniqueToSet2 = array2.filter(item => !set1.has(item));",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    // Combine the unique elements from both sets",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return [...uniqueToSet1, ...uniqueToSet2];",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function resolveLocation(locationId) {",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Resolve the location ID to the location name",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\treturn locationMapping[locationId];",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function formatDateStringToISO(dateString) {",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (!dateString) return \"\";",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t/* Convert a date string from dd.MM.yyyy to yyyy-MM-dd */",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Split the string into day, month, and year",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst [day, month, year] = dateString.split(\".\");",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Convert to the new format yyyy-MM-dd",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst formattedDate = `${year}-${month}-${day}`;",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\treturn formattedDate;",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function formatDateStringFromISO(dateString) {",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (!dateString) return \"\";",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t/* Convert a date string from yyyy-MM-dd to dd.MM.yyyy*/",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Split the string into day, month, and year",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst [year, month, day] = dateString.split(\"-\");",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t// Convert to the new format yyyy-MM-dd",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconst formattedDate = `${day}.${month}.${year}`;",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\treturn formattedDate;",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function handlePageChange() {",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (deleteMode) {",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all checkboxes are shown on page change (requires reload once)",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// After first reload, the checkboxes will be shown on page change regardless",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Use timeout because the initial <td> elements are not yet created",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tsetTimeout(() => {",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\t$(\".delete-checkbox-cell\").removeClass(\"d-none\");",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttable.draw(\"page\");",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t}, 20);",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t} else {",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\texitDeleteMode();",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (editMode) {",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all fields are editable",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tenableEditFields();",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t} else {",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all fields not editable when not in Edit Mode",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\texitEditMode();",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function handleOrderingChange() {",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tconsole.log(\"Ordering changed\");",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (deleteMode) {",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all checkboxes are shown on ordering change (requires reload once)",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// After first reload, the checkboxes will be shown on ordering change regardless",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Use timeout because the initial <td> elements are not yet created",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tsetTimeout(() => {",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\t$(\".delete-checkbox-cell\").removeClass(\"d-none\");",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttable.draw(\"page\");",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t}, 20);",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t} else {",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tdisableFields();",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        toggleButtonsDelete(false);",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\tif (editMode) {",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all fields are editable",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Use timeout because the initial <td> elements are not yet created",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tsetTimeout(() => {",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\tenableEditFields();",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t\ttable.draw(\"page\");",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t}, 20);",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t} else {",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\t// Ensure all fields not editable when not in Edit Mode",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t\tdisableEditFields();",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        toggleButtonsEdit(false);",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\t}",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "// Binary search to find insertion point",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "function insertSorted(arr, newElement, property = \"RZBK\") {",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let left = 0;",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    let right = arr.length - 1;",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    // Binary search to find insertion point",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    while (left <= right) {",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        const mid = Math.floor((left + right) / 2);",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (arr[mid][property] === newElement[property]) {",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            left = mid;",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            break;",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        if (arr[mid][property] < newElement[property]) {",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            left = mid + 1;",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        } else {",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            right = mid - 1;",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        }",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    }",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    ",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    // Insert at the found position",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    arr.splice(left, 0, newElement);",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    return arr;",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "}",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n// Add new function for refreshing locations",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1073741825,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\nasync function refreshLocations() {",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1073741825,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    try {",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1073741825,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        const response = await fetch('./db/refresh_locations.php');",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1073741825,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        if (!response.ok) throw new Error('Network response was not ok');",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1073741825,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        const data = await response.json();",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1073741825,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        ",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1073741825,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        if (data.success) {",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1073741825,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            locationMapping = data.locations;",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1073741825,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            showToast('Locations have been updated', 'refresh', 'success');",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1073741825,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        } else {",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1073741825,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n            throw new Error(data.error || 'Unknown error occurred');",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1073741825,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        }",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1073741825,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    } catch (error) {",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1073741825,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        console.error('Error refreshing locations:', error);",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1073741825,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n        showToast('Error updating locations', 'error', 'danger');",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1073741825,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n    }",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1073741825,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n}",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1073741825,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1073741825,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        },
        {
          "kind": "codeblockUri",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
            "scheme": "file"
          }
        },
        {
          "value": "// ...existing code...\n                        buttons: [{\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                            action: async function(e, dt, node, config) {\n                                await Promise.all([\n                                    refreshInstitutes(),\n                                    refreshLocations()\n                                ]);\n                                dt.ajax.reload();\n                            },\n                        },\n// ...existing code...\n```\n\nThis implementation:\n1. Creates a new endpoint `refresh_locations.php` that returns the updated location mapping\n2. Adds a `refreshLocations()` function to utils.js following the same pattern as `refreshInstitutes()`\n3. Updates the refresh button to run both refresh functions in parallel before reloading the table\n4. Uses proper error handling and toast notifications\n\nThe changes maintain consistency with the existing refresh functionality while adding the location refresh capability.",
          "supportThemeIcons": false,
          "supportHtml": false
        },
        {
          "kind": "textEditGroup",
          "uri": {
            "$mid": 1,
            "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
            "_sep": 1,
            "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
            "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
            "scheme": "file"
          },
          "edits": [
            [],
            [
              {
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->",
                "range": {
                  "startLineNumber": 1,
                  "startColumn": 1,
                  "endLineNumber": 1,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<!DOCTYPE html>",
                "range": {
                  "startLineNumber": 2,
                  "startColumn": 1,
                  "endLineNumber": 2,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<html lang=\"en\">",
                "range": {
                  "startLineNumber": 3,
                  "startColumn": 1,
                  "endLineNumber": 3,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 4,
                  "startColumn": 1,
                  "endLineNumber": 4,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<head>",
                "range": {
                  "startLineNumber": 5,
                  "startColumn": 1,
                  "endLineNumber": 5,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta charset=\"UTF-8\">",
                "range": {
                  "startLineNumber": 6,
                  "startColumn": 1,
                  "endLineNumber": 6,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">",
                "range": {
                  "startLineNumber": 7,
                  "startColumn": 1,
                  "endLineNumber": 7,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <title>Institute Process Overview</title>",
                "range": {
                  "startLineNumber": 8,
                  "startColumn": 1,
                  "endLineNumber": 8,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap CSS -->",
                "range": {
                  "startLineNumber": 9,
                  "startColumn": 1,
                  "endLineNumber": 9,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">",
                "range": {
                  "startLineNumber": 10,
                  "startColumn": 1,
                  "endLineNumber": 10,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Icons -->",
                "range": {
                  "startLineNumber": 11,
                  "startColumn": 1,
                  "endLineNumber": 11,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 12,
                  "startColumn": 1,
                  "endLineNumber": 12,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables CSS -->",
                "range": {
                  "startLineNumber": 13,
                  "startColumn": 1,
                  "endLineNumber": 13,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">",
                "range": {
                  "startLineNumber": 14,
                  "startColumn": 1,
                  "endLineNumber": 14,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Select2 CSS -->",
                "range": {
                  "startLineNumber": 15,
                  "startColumn": 1,
                  "endLineNumber": 15,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />",
                "range": {
                  "startLineNumber": 16,
                  "startColumn": 1,
                  "endLineNumber": 16,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />",
                "range": {
                  "startLineNumber": 17,
                  "startColumn": 1,
                  "endLineNumber": 17,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Custom styles -->",
                "range": {
                  "startLineNumber": 18,
                  "startColumn": 1,
                  "endLineNumber": 18,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <link rel=\"stylesheet\" href=\"./css/style.css\">",
                "range": {
                  "startLineNumber": 19,
                  "startColumn": 1,
                  "endLineNumber": 19,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "</head>",
                "range": {
                  "startLineNumber": 20,
                  "startColumn": 1,
                  "endLineNumber": 20,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 21,
                  "startColumn": 1,
                  "endLineNumber": 21,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "<body>",
                "range": {
                  "startLineNumber": 22,
                  "startColumn": 1,
                  "endLineNumber": 22,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <div class=\"container mt-5\">",
                "range": {
                  "startLineNumber": 23,
                  "startColumn": 1,
                  "endLineNumber": 23,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <h2>Institute Process Overview</h2>",
                "range": {
                  "startLineNumber": 24,
                  "startColumn": 1,
                  "endLineNumber": 24,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <!-- Add new navigation row -->",
                "range": {
                  "startLineNumber": 25,
                  "startColumn": 1,
                  "endLineNumber": 25,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"navigation-buttons mb-3\">",
                "range": {
                  "startLineNumber": 26,
                  "startColumn": 1,
                  "endLineNumber": 26,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 27,
                  "startColumn": 1,
                  "endLineNumber": 27,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-building\"></i> Manage Institutes",
                "range": {
                  "startLineNumber": 28,
                  "startColumn": 1,
                  "endLineNumber": 28,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 29,
                  "startColumn": 1,
                  "endLineNumber": 29,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">",
                "range": {
                  "startLineNumber": 30,
                  "startColumn": 1,
                  "endLineNumber": 30,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-geo-alt\"></i> Manage Locations",
                "range": {
                  "startLineNumber": 31,
                  "startColumn": 1,
                  "endLineNumber": 31,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </a>",
                "range": {
                  "startLineNumber": 32,
                  "startColumn": 1,
                  "endLineNumber": 32,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 33,
                  "startColumn": 1,
                  "endLineNumber": 33,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"action-buttons btn-group\">",
                "range": {
                  "startLineNumber": 34,
                  "startColumn": 1,
                  "endLineNumber": 34,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">",
                "range": {
                  "startLineNumber": 35,
                  "startColumn": 1,
                  "endLineNumber": 35,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->",
                "range": {
                  "startLineNumber": 36,
                  "startColumn": 1,
                  "endLineNumber": 36,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 37,
                  "startColumn": 1,
                  "endLineNumber": 37,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">",
                "range": {
                  "startLineNumber": 38,
                  "startColumn": 1,
                  "endLineNumber": 38,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <div class=\"d-flex justify-content-center\">",
                "range": {
                  "startLineNumber": 39,
                  "startColumn": 1,
                  "endLineNumber": 39,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <div class=\"form-check form-switch\">",
                "range": {
                  "startLineNumber": 40,
                  "startColumn": 1,
                  "endLineNumber": 40,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>",
                "range": {
                  "startLineNumber": 41,
                  "startColumn": 1,
                  "endLineNumber": 41,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>",
                "range": {
                  "startLineNumber": 42,
                  "startColumn": 1,
                  "endLineNumber": 42,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </div>",
                "range": {
                  "startLineNumber": 43,
                  "startColumn": 1,
                  "endLineNumber": 43,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </div>",
                "range": {
                  "startLineNumber": 44,
                  "startColumn": 1,
                  "endLineNumber": 44,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <!-- Title for the dropdown -->",
                "range": {
                  "startLineNumber": 45,
                  "startColumn": 1,
                  "endLineNumber": 45,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <li class=\"dropdown-header text-center\">",
                "range": {
                  "startLineNumber": 46,
                  "startColumn": 1,
                  "endLineNumber": 46,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <span class=\"fw-bold\">Prozesse</span>",
                "range": {
                  "startLineNumber": 47,
                  "startColumn": 1,
                  "endLineNumber": 47,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <hr class=\"dropdown-divider\">",
                "range": {
                  "startLineNumber": 48,
                  "startColumn": 1,
                  "endLineNumber": 48,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </li>",
                "range": {
                  "startLineNumber": 49,
                  "startColumn": 1,
                  "endLineNumber": 49,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <!-- Checkboxes will be populated dynamically -->",
                "range": {
                  "startLineNumber": 50,
                  "startColumn": 1,
                  "endLineNumber": 50,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </ul>",
                "range": {
                  "startLineNumber": 51,
                  "startColumn": 1,
                  "endLineNumber": 51,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 52,
                  "startColumn": 1,
                  "endLineNumber": 52,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-trash\"></i> Delete",
                "range": {
                  "startLineNumber": 53,
                  "startColumn": 1,
                  "endLineNumber": 53,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 54,
                  "startColumn": 1,
                  "endLineNumber": 54,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 55,
                  "startColumn": 1,
                  "endLineNumber": 55,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-check-lg\"></i> Confirm",
                "range": {
                  "startLineNumber": 56,
                  "startColumn": 1,
                  "endLineNumber": 56,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 57,
                  "startColumn": 1,
                  "endLineNumber": 57,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 58,
                  "startColumn": 1,
                  "endLineNumber": 58,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-x-lg\"></i> Cancel",
                "range": {
                  "startLineNumber": 59,
                  "startColumn": 1,
                  "endLineNumber": 59,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 60,
                  "startColumn": 1,
                  "endLineNumber": 60,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 61,
                  "startColumn": 1,
                  "endLineNumber": 61,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-plus-lg\"></i> Add",
                "range": {
                  "startLineNumber": 62,
                  "startColumn": 1,
                  "endLineNumber": 62,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 63,
                  "startColumn": 1,
                  "endLineNumber": 63,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">",
                "range": {
                  "startLineNumber": 64,
                  "startColumn": 1,
                  "endLineNumber": 64,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-pencil\"></i> Modify",
                "range": {
                  "startLineNumber": 65,
                  "startColumn": 1,
                  "endLineNumber": 65,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 66,
                  "startColumn": 1,
                  "endLineNumber": 66,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 67,
                  "startColumn": 1,
                  "endLineNumber": 67,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-check-lg\"></i> Save",
                "range": {
                  "startLineNumber": 68,
                  "startColumn": 1,
                  "endLineNumber": 68,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 69,
                  "startColumn": 1,
                  "endLineNumber": 69,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">",
                "range": {
                  "startLineNumber": 70,
                  "startColumn": 1,
                  "endLineNumber": 70,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <i class=\"bi bi-x-lg\"></i> Cancel",
                "range": {
                  "startLineNumber": 71,
                  "startColumn": 1,
                  "endLineNumber": 71,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </button>",
                "range": {
                  "startLineNumber": 72,
                  "startColumn": 1,
                  "endLineNumber": 72,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 73,
                  "startColumn": 1,
                  "endLineNumber": 73,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <div class=\"table-responsive full-width-table\">",
                "range": {
                  "startLineNumber": 74,
                  "startColumn": 1,
                  "endLineNumber": 74,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            <table id=\"institutesTable\" class=\"table table-striped\" >",
                "range": {
                  "startLineNumber": 75,
                  "startColumn": 1,
                  "endLineNumber": 75,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <thead>",
                "range": {
                  "startLineNumber": 76,
                  "startColumn": 1,
                  "endLineNumber": 76,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <tr>",
                "range": {
                  "startLineNumber": 77,
                  "startColumn": 1,
                  "endLineNumber": 77,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th class=\"delete-checkbox-cell d-none\">#</th>",
                "range": {
                  "startLineNumber": 78,
                  "startColumn": 1,
                  "endLineNumber": 78,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>RZBK</th>",
                "range": {
                  "startLineNumber": 79,
                  "startColumn": 1,
                  "endLineNumber": 79,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Name</th>",
                "range": {
                  "startLineNumber": 80,
                  "startColumn": 1,
                  "endLineNumber": 80,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <th>Standort</th>",
                "range": {
                  "startLineNumber": 81,
                  "startColumn": 1,
                  "endLineNumber": 81,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        <!-- Dynamic process columns will be added here -->",
                "range": {
                  "startLineNumber": 82,
                  "startColumn": 1,
                  "endLineNumber": 82,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    </tr>",
                "range": {
                  "startLineNumber": 83,
                  "startColumn": 1,
                  "endLineNumber": 83,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </thead>",
                "range": {
                  "startLineNumber": 84,
                  "startColumn": 1,
                  "endLineNumber": 84,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                <tbody>",
                "range": {
                  "startLineNumber": 85,
                  "startColumn": 1,
                  "endLineNumber": 85,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    <!-- Data will be populated by DataTables -->",
                "range": {
                  "startLineNumber": 86,
                  "startColumn": 1,
                  "endLineNumber": 86,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                </tbody>",
                "range": {
                  "startLineNumber": 87,
                  "startColumn": 1,
                  "endLineNumber": 87,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            </table>",
                "range": {
                  "startLineNumber": 88,
                  "startColumn": 1,
                  "endLineNumber": 88,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        </div>",
                "range": {
                  "startLineNumber": 89,
                  "startColumn": 1,
                  "endLineNumber": 89,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './toast/toast.html'; ?>",
                "range": {
                  "startLineNumber": 90,
                  "startColumn": 1,
                  "endLineNumber": 90,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/confirmationModal.html'; ?>",
                "range": {
                  "startLineNumber": 91,
                  "startColumn": 1,
                  "endLineNumber": 91,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/addModal.html'; ?>",
                "range": {
                  "startLineNumber": 92,
                  "startColumn": 1,
                  "endLineNumber": 92,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        <?php include './modal/modifyDetailsModal.html'; ?>",
                "range": {
                  "startLineNumber": 93,
                  "startColumn": 1,
                  "endLineNumber": 93,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </div>",
                "range": {
                  "startLineNumber": 94,
                  "startColumn": 1,
                  "endLineNumber": 94,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 95,
                  "startColumn": 1,
                  "endLineNumber": 95,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- jQuery -->",
                "range": {
                  "startLineNumber": 96,
                  "startColumn": 1,
                  "endLineNumber": 96,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>",
                "range": {
                  "startLineNumber": 97,
                  "startColumn": 1,
                  "endLineNumber": 97,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Bootstrap Bundle with Popper -->",
                "range": {
                  "startLineNumber": 98,
                  "startColumn": 1,
                  "endLineNumber": 98,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>",
                "range": {
                  "startLineNumber": 99,
                  "startColumn": 1,
                  "endLineNumber": 99,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- DataTables -->",
                "range": {
                  "startLineNumber": 100,
                  "startColumn": 1,
                  "endLineNumber": 100,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>",
                "range": {
                  "startLineNumber": 101,
                  "startColumn": 1,
                  "endLineNumber": 101,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>",
                "range": {
                  "startLineNumber": 102,
                  "startColumn": 1,
                  "endLineNumber": 102,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>",
                "range": {
                  "startLineNumber": 103,
                  "startColumn": 1,
                  "endLineNumber": 103,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Select2 JS -->",
                "range": {
                  "startLineNumber": 104,
                  "startColumn": 1,
                  "endLineNumber": 104,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>",
                "range": {
                  "startLineNumber": 105,
                  "startColumn": 1,
                  "endLineNumber": 105,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 106,
                  "startColumn": 1,
                  "endLineNumber": 106,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/utils.js\"></script>",
                "range": {
                  "startLineNumber": 107,
                  "startColumn": 1,
                  "endLineNumber": 107,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/dataOverview.js\"></script>",
                "range": {
                  "startLineNumber": 108,
                  "startColumn": 1,
                  "endLineNumber": 108,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/retrieveData.js\"></script>",
                "range": {
                  "startLineNumber": 109,
                  "startColumn": 1,
                  "endLineNumber": 109,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/toggleButtons.js\"></script>",
                "range": {
                  "startLineNumber": 110,
                  "startColumn": 1,
                  "endLineNumber": 110,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/createAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 111,
                  "startColumn": 1,
                  "endLineNumber": 111,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/deleteAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 112,
                  "startColumn": 1,
                  "endLineNumber": 112,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/DB/updateAssignment.js\"></script>",
                "range": {
                  "startLineNumber": 113,
                  "startColumn": 1,
                  "endLineNumber": 113,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 114,
                  "startColumn": 1,
                  "endLineNumber": 114,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 115,
                  "startColumn": 1,
                  "endLineNumber": 115,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/addMode.js\"></script>",
                "range": {
                  "startLineNumber": 116,
                  "startColumn": 1,
                  "endLineNumber": 116,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/deleteMode.js\"></script>",
                "range": {
                  "startLineNumber": 117,
                  "startColumn": 1,
                  "endLineNumber": 117,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/editMode.js\"></script>",
                "range": {
                  "startLineNumber": 118,
                  "startColumn": 1,
                  "endLineNumber": 118,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/populateAddModal.js\"></script>",
                "range": {
                  "startLineNumber": 119,
                  "startColumn": 1,
                  "endLineNumber": 119,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script src=\"./js/editDetailsModal.js\"></script>",
                "range": {
                  "startLineNumber": 120,
                  "startColumn": 1,
                  "endLineNumber": 120,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 121,
                  "startColumn": 1,
                  "endLineNumber": 121,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Embed PHP variables as JavaScript -->",
                "range": {
                  "startLineNumber": 122,
                  "startColumn": 1,
                  "endLineNumber": 122,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines instituteMappingTest -->",
                "range": {
                  "startLineNumber": 123,
                  "startColumn": 1,
                  "endLineNumber": 123,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/create_bankenmap.php'; ?>",
                "range": {
                  "startLineNumber": 124,
                  "startColumn": 1,
                  "endLineNumber": 124,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines locationMapping and locationAssignment -->",
                "range": {
                  "startLineNumber": 125,
                  "startColumn": 1,
                  "endLineNumber": 125,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/check_standort.php'; ?>",
                "range": {
                  "startLineNumber": 126,
                  "startColumn": 1,
                  "endLineNumber": 126,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <!-- Defines processMapping and processNames -->",
                "range": {
                  "startLineNumber": 127,
                  "startColumn": 1,
                  "endLineNumber": 127,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <?php include './db/get_processes.php'; ?>",
                "range": {
                  "startLineNumber": 128,
                  "startColumn": 1,
                  "endLineNumber": 128,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 129,
                  "startColumn": 1,
                  "endLineNumber": 129,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    <script>",
                "range": {
                  "startLineNumber": 130,
                  "startColumn": 1,
                  "endLineNumber": 130,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let testMode = false;",
                "range": {
                  "startLineNumber": 131,
                  "startColumn": 1,
                  "endLineNumber": 131,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // let testMode = true;",
                "range": {
                  "startLineNumber": 132,
                  "startColumn": 1,
                  "endLineNumber": 132,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let table;",
                "range": {
                  "startLineNumber": 133,
                  "startColumn": 1,
                  "endLineNumber": 133,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let data;",
                "range": {
                  "startLineNumber": 134,
                  "startColumn": 1,
                  "endLineNumber": 134,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // let processNames;",
                "range": {
                  "startLineNumber": 135,
                  "startColumn": 1,
                  "endLineNumber": 135,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 136,
                  "startColumn": 1,
                  "endLineNumber": 136,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let originalData = null;",
                "range": {
                  "startLineNumber": 137,
                  "startColumn": 1,
                  "endLineNumber": 137,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let modifiedRows = [];",
                "range": {
                  "startLineNumber": 138,
                  "startColumn": 1,
                  "endLineNumber": 138,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let editMode = false;",
                "range": {
                  "startLineNumber": 139,
                  "startColumn": 1,
                  "endLineNumber": 139,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Add new deletion-related variables",
                "range": {
                  "startLineNumber": 140,
                  "startColumn": 1,
                  "endLineNumber": 140,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let deleteMode = false;",
                "range": {
                  "startLineNumber": 141,
                  "startColumn": 1,
                  "endLineNumber": 141,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let rowsToDelete = new Set();",
                "range": {
                  "startLineNumber": 142,
                  "startColumn": 1,
                  "endLineNumber": 142,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Temporary storage for new entries",
                "range": {
                  "startLineNumber": 143,
                  "startColumn": 1,
                  "endLineNumber": 143,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let tempEntries = [];",
                "range": {
                  "startLineNumber": 144,
                  "startColumn": 1,
                  "endLineNumber": 144,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        // Interval for reloading the table",
                "range": {
                  "startLineNumber": 145,
                  "startColumn": 1,
                  "endLineNumber": 145,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        let reloadInterval;",
                "range": {
                  "startLineNumber": 146,
                  "startColumn": 1,
                  "endLineNumber": 146,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 147,
                  "startColumn": 1,
                  "endLineNumber": 147,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        $(document).ready(function() {",
                "range": {
                  "startLineNumber": 148,
                  "startColumn": 1,
                  "endLineNumber": 148,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            // First, fetch the data to create dynamic columns",
                "range": {
                  "startLineNumber": 149,
                  "startColumn": 1,
                  "endLineNumber": 149,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            $.ajax({",
                "range": {
                  "startLineNumber": 150,
                  "startColumn": 1,
                  "endLineNumber": 150,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                url: './db/get_data.php',",
                "range": {
                  "startLineNumber": 151,
                  "startColumn": 1,
                  "endLineNumber": 151,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                method: 'GET',",
                "range": {
                  "startLineNumber": 152,
                  "startColumn": 1,
                  "endLineNumber": 152,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                dataType: 'json',",
                "range": {
                  "startLineNumber": 153,
                  "startColumn": 1,
                  "endLineNumber": 153,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                success: function(data) {",
                "range": {
                  "startLineNumber": 154,
                  "startColumn": 1,
                  "endLineNumber": 154,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Process data to create dynamic columns",
                "range": {
                  "startLineNumber": 155,
                  "startColumn": 1,
                  "endLineNumber": 155,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // processNames = [...new Set(data.map(item => item.Prozessname))];",
                "range": {
                  "startLineNumber": 156,
                  "startColumn": 1,
                  "endLineNumber": 156,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 157,
                  "startColumn": 1,
                  "endLineNumber": 157,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Create header columns for processes",
                "range": {
                  "startLineNumber": 158,
                  "startColumn": 1,
                  "endLineNumber": 158,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    processNames.forEach(process => {",
                "range": {
                  "startLineNumber": 159,
                  "startColumn": 1,
                  "endLineNumber": 159,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable thead tr').append(`<th>${process}</th>`);",
                "range": {
                  "startLineNumber": 160,
                  "startColumn": 1,
                  "endLineNumber": 160,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#processMenu').append(`",
                "range": {
                  "startLineNumber": 161,
                  "startColumn": 1,
                  "endLineNumber": 161,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            <li class=\"dropdown-item form-check\">",
                "range": {
                  "startLineNumber": 162,
                  "startColumn": 1,
                  "endLineNumber": 162,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                <div class=\"form-check\">",
                "range": {
                  "startLineNumber": 163,
                  "startColumn": 1,
                  "endLineNumber": 163,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>",
                "range": {
                  "startLineNumber": 164,
                  "startColumn": 1,
                  "endLineNumber": 164,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>",
                "range": {
                  "startLineNumber": 165,
                  "startColumn": 1,
                  "endLineNumber": 165,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                </div>",
                "range": {
                  "startLineNumber": 166,
                  "startColumn": 1,
                  "endLineNumber": 166,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            </li>",
                "range": {
                  "startLineNumber": 167,
                  "startColumn": 1,
                  "endLineNumber": 167,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        `);",
                "range": {
                  "startLineNumber": 168,
                  "startColumn": 1,
                  "endLineNumber": 168,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 169,
                  "startColumn": 1,
                  "endLineNumber": 169,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 170,
                  "startColumn": 1,
                  "endLineNumber": 170,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Initialize DataTable with dynamic columns",
                "range": {
                  "startLineNumber": 171,
                  "startColumn": 1,
                  "endLineNumber": 171,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    table = $('#institutesTable').DataTable({",
                "range": {
                  "startLineNumber": 172,
                  "startColumn": 1,
                  "endLineNumber": 172,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ajax: {",
                "range": {
                  "startLineNumber": 173,
                  "startColumn": 1,
                  "endLineNumber": 173,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            url: './db/get_data.php',",
                "range": {
                  "startLineNumber": 174,
                  "startColumn": 1,
                  "endLineNumber": 174,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            dataSrc: prepareDatabaseData,",
                "range": {
                  "startLineNumber": 175,
                  "startColumn": 1,
                  "endLineNumber": 175,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 176,
                  "startColumn": 1,
                  "endLineNumber": 176,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        initComplete: function(settings, json) {",
                "range": {
                  "startLineNumber": 177,
                  "startColumn": 1,
                  "endLineNumber": 177,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            data = table.rows().data().toArray();",
                "range": {
                  "startLineNumber": 178,
                  "startColumn": 1,
                  "endLineNumber": 178,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            // Start auto-reload after initialization every 30 seconds",
                "range": {
                  "startLineNumber": 179,
                  "startColumn": 1,
                  "endLineNumber": 179,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            // reloadInterval = startAutoReload(table, reloadInterval);",
                "range": {
                  "startLineNumber": 180,
                  "startColumn": 1,
                  "endLineNumber": 180,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 181,
                  "startColumn": 1,
                  "endLineNumber": 181,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        columns: [{",
                "range": {
                  "startLineNumber": 182,
                  "startColumn": 1,
                  "endLineNumber": 182,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: null,",
                "range": {
                  "startLineNumber": 183,
                  "startColumn": 1,
                  "endLineNumber": 183,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: '#',",
                "range": {
                  "startLineNumber": 184,
                  "startColumn": 1,
                  "endLineNumber": 184,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 185,
                  "startColumn": 1,
                  "endLineNumber": 185,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'delete-checkbox-cell d-none',",
                "range": {
                  "startLineNumber": 186,
                  "startColumn": 1,
                  "endLineNumber": 186,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                visible: false,",
                "range": {
                  "startLineNumber": 187,
                  "startColumn": 1,
                  "endLineNumber": 187,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 188,
                  "startColumn": 1,
                  "endLineNumber": 188,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';",
                "range": {
                  "startLineNumber": 189,
                  "startColumn": 1,
                  "endLineNumber": 189,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                },",
                "range": {
                  "startLineNumber": 190,
                  "startColumn": 1,
                  "endLineNumber": 190,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                width: '40px'",
                "range": {
                  "startLineNumber": 191,
                  "startColumn": 1,
                  "endLineNumber": 191,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 192,
                  "startColumn": 1,
                  "endLineNumber": 192,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 193,
                  "startColumn": 1,
                  "endLineNumber": 193,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'RZBK',",
                "range": {
                  "startLineNumber": 194,
                  "startColumn": 1,
                  "endLineNumber": 194,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'RZBK'",
                "range": {
                  "startLineNumber": 195,
                  "startColumn": 1,
                  "endLineNumber": 195,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 196,
                  "startColumn": 1,
                  "endLineNumber": 196,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 197,
                  "startColumn": 1,
                  "endLineNumber": 197,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'Name',",
                "range": {
                  "startLineNumber": 198,
                  "startColumn": 1,
                  "endLineNumber": 198,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Name'",
                "range": {
                  "startLineNumber": 199,
                  "startColumn": 1,
                  "endLineNumber": 199,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 200,
                  "startColumn": 1,
                  "endLineNumber": 200,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 201,
                  "startColumn": 1,
                  "endLineNumber": 201,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: 'Standort',",
                "range": {
                  "startLineNumber": 202,
                  "startColumn": 1,
                  "endLineNumber": 202,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Standort',",
                "range": {
                  "startLineNumber": 203,
                  "startColumn": 1,
                  "endLineNumber": 203,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 204,
                  "startColumn": 1,
                  "endLineNumber": 204,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 205,
                  "startColumn": 1,
                  "endLineNumber": 205,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            ...processNames.map(process => ({",
                "range": {
                  "startLineNumber": 206,
                  "startColumn": 1,
                  "endLineNumber": 206,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: process,",
                "range": {
                  "startLineNumber": 207,
                  "startColumn": 1,
                  "endLineNumber": 207,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'checkbox-cell text-center',",
                "range": {
                  "startLineNumber": 208,
                  "startColumn": 1,
                  "endLineNumber": 208,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 209,
                  "startColumn": 1,
                  "endLineNumber": 209,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 210,
                  "startColumn": 1,
                  "endLineNumber": 210,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    // Check the state of the toggle switch",
                "range": {
                  "startLineNumber": 211,
                  "startColumn": 1,
                  "endLineNumber": 211,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const showDates = $('#toggleDates').is(':checked');",
                "range": {
                  "startLineNumber": 212,
                  "startColumn": 1,
                  "endLineNumber": 212,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const date = data.startDate;",
                "range": {
                  "startLineNumber": 213,
                  "startColumn": 1,
                  "endLineNumber": 213,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    const enabled = data.checked;",
                "range": {
                  "startLineNumber": 214,
                  "startColumn": 1,
                  "endLineNumber": 214,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 215,
                  "startColumn": 1,
                  "endLineNumber": 215,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return `",
                "range": {
                  "startLineNumber": 216,
                  "startColumn": 1,
                  "endLineNumber": 216,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">",
                "range": {
                  "startLineNumber": 217,
                  "startColumn": 1,
                  "endLineNumber": 217,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled ",
                "range": {
                  "startLineNumber": 218,
                  "startColumn": 1,
                  "endLineNumber": 218,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" ",
                "range": {
                  "startLineNumber": 219,
                  "startColumn": 1,
                  "endLineNumber": 219,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-process=\"${process}\" data-row=\"${meta.row}\"",
                "range": {
                  "startLineNumber": 220,
                  "startColumn": 1,
                  "endLineNumber": 220,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">",
                "range": {
                  "startLineNumber": 221,
                  "startColumn": 1,
                  "endLineNumber": 221,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            ${showDates ? ",
                "range": {
                  "startLineNumber": 222,
                  "startColumn": 1,
                  "endLineNumber": 222,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                true ? ",
                "range": {
                  "startLineNumber": 223,
                  "startColumn": 1,
                  "endLineNumber": 223,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                `<input type=\"date\" style=\"width: 105px;\" ",
                "range": {
                  "startLineNumber": 224,
                  "startColumn": 1,
                  "endLineNumber": 224,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                value=\"${formatDateStringToISO(date)}\" ",
                "range": {
                  "startLineNumber": 225,
                  "startColumn": 1,
                  "endLineNumber": 225,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                class=\"form-control form-control-sm process-date-input\" ",
                "range": {
                  "startLineNumber": 226,
                  "startColumn": 1,
                  "endLineNumber": 226,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                data-process=\"${process}\" data-row=\"${meta.row}\"",
                "range": {
                  "startLineNumber": 227,
                  "startColumn": 1,
                  "endLineNumber": 227,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                disabled",
                "range": {
                  "startLineNumber": 228,
                  "startColumn": 1,
                  "endLineNumber": 228,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                >` ",
                "range": {
                  "startLineNumber": 229,
                  "startColumn": 1,
                  "endLineNumber": 229,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                                : '' ",
                "range": {
                  "startLineNumber": 230,
                  "startColumn": 1,
                  "endLineNumber": 230,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            : ''}",
                "range": {
                  "startLineNumber": 231,
                  "startColumn": 1,
                  "endLineNumber": 231,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>",
                "range": {
                  "startLineNumber": 232,
                  "startColumn": 1,
                  "endLineNumber": 232,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                        </div>",
                "range": {
                  "startLineNumber": 233,
                  "startColumn": 1,
                  "endLineNumber": 233,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    `;",
                "range": {
                  "startLineNumber": 234,
                  "startColumn": 1,
                  "endLineNumber": 234,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                }",
                "range": {
                  "startLineNumber": 235,
                  "startColumn": 1,
                  "endLineNumber": 235,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            })),",
                "range": {
                  "startLineNumber": 236,
                  "startColumn": 1,
                  "endLineNumber": 236,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            {",
                "range": {
                  "startLineNumber": 237,
                  "startColumn": 1,
                  "endLineNumber": 237,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                data: null,",
                "range": {
                  "startLineNumber": 238,
                  "startColumn": 1,
                  "endLineNumber": 238,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                title: 'Revert',",
                "range": {
                  "startLineNumber": 239,
                  "startColumn": 1,
                  "endLineNumber": 239,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                className: 'revert-cell d-none',",
                "range": {
                  "startLineNumber": 240,
                  "startColumn": 1,
                  "endLineNumber": 240,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                orderable: false,",
                "range": {
                  "startLineNumber": 241,
                  "startColumn": 1,
                  "endLineNumber": 241,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                visible: false,",
                "range": {
                  "startLineNumber": 242,
                  "startColumn": 1,
                  "endLineNumber": 242,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                render: function(data, type, row, meta) {",
                "range": {
                  "startLineNumber": 243,
                  "startColumn": 1,
                  "endLineNumber": 243,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';",
                "range": {
                  "startLineNumber": 244,
                  "startColumn": 1,
                  "endLineNumber": 244,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                }",
                "range": {
                  "startLineNumber": 245,
                  "startColumn": 1,
                  "endLineNumber": 245,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 246,
                  "startColumn": 1,
                  "endLineNumber": 246,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ],",
                "range": {
                  "startLineNumber": 247,
                  "startColumn": 1,
                  "endLineNumber": 247,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        order: [",
                "range": {
                  "startLineNumber": 248,
                  "startColumn": 1,
                  "endLineNumber": 248,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            [1, 'asc']",
                "range": {
                  "startLineNumber": 249,
                  "startColumn": 1,
                  "endLineNumber": 249,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ],",
                "range": {
                  "startLineNumber": 250,
                  "startColumn": 1,
                  "endLineNumber": 250,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Do not allow ordering as it messes up in editing and deleting.",
                "range": {
                  "startLineNumber": 251,
                  "startColumn": 1,
                  "endLineNumber": 251,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        ordering: false,",
                "range": {
                  "startLineNumber": 252,
                  "startColumn": 1,
                  "endLineNumber": 252,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        layout: {",
                "range": {
                  "startLineNumber": 253,
                  "startColumn": 1,
                  "endLineNumber": 253,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            topStart: ['pageLength'],",
                "range": {
                  "startLineNumber": 254,
                  "startColumn": 1,
                  "endLineNumber": 254,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            topEnd: ['buttons', 'search'],",
                "range": {
                  "startLineNumber": 255,
                  "startColumn": 1,
                  "endLineNumber": 255,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        },",
                "range": {
                  "startLineNumber": 256,
                  "startColumn": 1,
                  "endLineNumber": 256,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        buttons: [{",
                "range": {
                  "startLineNumber": 257,
                  "startColumn": 1,
                  "endLineNumber": 257,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',",
                "range": {
                  "startLineNumber": 258,
                  "startColumn": 1,
                  "endLineNumber": 258,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            action: async function(e, dt, node, config) {",
                "range": {
                  "startLineNumber": 259,
                  "startColumn": 1,
                  "endLineNumber": 259,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                await Promise.all([",
                "range": {
                  "startLineNumber": 260,
                  "startColumn": 1,
                  "endLineNumber": 260,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    refreshInstitutes(),",
                "range": {
                  "startLineNumber": 261,
                  "startColumn": 1,
                  "endLineNumber": 261,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                    refreshLocations()",
                "range": {
                  "startLineNumber": 262,
                  "startColumn": 1,
                  "endLineNumber": 262,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                ]);",
                "range": {
                  "startLineNumber": 263,
                  "startColumn": 1,
                  "endLineNumber": 263,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                dt.ajax.reload();",
                "range": {
                  "startLineNumber": 264,
                  "startColumn": 1,
                  "endLineNumber": 264,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            },",
                "range": {
                  "startLineNumber": 265,
                  "startColumn": 1,
                  "endLineNumber": 265,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }, {",
                "range": {
                  "startLineNumber": 266,
                  "startColumn": 1,
                  "endLineNumber": 266,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            extend: 'colvis',",
                "range": {
                  "startLineNumber": 267,
                  "startColumn": 1,
                  "endLineNumber": 267,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',",
                "range": {
                  "startLineNumber": 268,
                  "startColumn": 1,
                  "endLineNumber": 268,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            text: 'Visibility',",
                "range": {
                  "startLineNumber": 269,
                  "startColumn": 1,
                  "endLineNumber": 269,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            className: 'btn-secondary'",
                "range": {
                  "startLineNumber": 270,
                  "startColumn": 1,
                  "endLineNumber": 270,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }],",
                "range": {
                  "startLineNumber": 271,
                  "startColumn": 1,
                  "endLineNumber": 271,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 272,
                  "startColumn": 1,
                  "endLineNumber": 272,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Enable the buttons after the table is initialized",
                "range": {
                  "startLineNumber": 273,
                  "startColumn": 1,
                  "endLineNumber": 273,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    enableButtons();",
                "range": {
                  "startLineNumber": 274,
                  "startColumn": 1,
                  "endLineNumber": 274,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 275,
                  "startColumn": 1,
                  "endLineNumber": 275,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Populate the Add Modal with process names",
                "range": {
                  "startLineNumber": 276,
                  "startColumn": 1,
                  "endLineNumber": 276,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    popuplateAddModal();",
                "range": {
                  "startLineNumber": 277,
                  "startColumn": 1,
                  "endLineNumber": 277,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 278,
                  "startColumn": 1,
                  "endLineNumber": 278,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)",
                "range": {
                  "startLineNumber": 279,
                  "startColumn": 1,
                  "endLineNumber": 279,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    table.on('page', handlePageChange);",
                "range": {
                  "startLineNumber": 280,
                  "startColumn": 1,
                  "endLineNumber": 280,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)",
                "range": {
                  "startLineNumber": 281,
                  "startColumn": 1,
                  "endLineNumber": 281,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // table.on('order', handleOrderingChange);",
                "range": {
                  "startLineNumber": 282,
                  "startColumn": 1,
                  "endLineNumber": 282,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 283,
                  "startColumn": 1,
                  "endLineNumber": 283,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Edit Mode ----- ////",
                "range": {
                  "startLineNumber": 284,
                  "startColumn": 1,
                  "endLineNumber": 284,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 285,
                  "startColumn": 1,
                  "endLineNumber": 285,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modify button click to enter Edit mode",
                "range": {
                  "startLineNumber": 286,
                  "startColumn": 1,
                  "endLineNumber": 286,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyBtn').click(enterEditMode);",
                "range": {
                  "startLineNumber": 287,
                  "startColumn": 1,
                  "endLineNumber": 287,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Save button click",
                "range": {
                  "startLineNumber": 288,
                  "startColumn": 1,
                  "endLineNumber": 288,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifySaveBtn').click(handleSave);",
                "range": {
                  "startLineNumber": 289,
                  "startColumn": 1,
                  "endLineNumber": 289,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 290,
                  "startColumn": 1,
                  "endLineNumber": 290,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Cancel button click",
                "range": {
                  "startLineNumber": 291,
                  "startColumn": 1,
                  "endLineNumber": 291,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyCancelBtn').click(handleCancel);",
                "range": {
                  "startLineNumber": 292,
                  "startColumn": 1,
                  "endLineNumber": 292,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modal Save confirmation ",
                "range": {
                  "startLineNumber": 293,
                  "startColumn": 1,
                  "endLineNumber": 293,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyConfirmSave').click(confirmSave);",
                "range": {
                  "startLineNumber": 294,
                  "startColumn": 1,
                  "endLineNumber": 294,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Modal Cancel confirmation",
                "range": {
                  "startLineNumber": 295,
                  "startColumn": 1,
                  "endLineNumber": 295,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#modifyConfirmCancel').click(confirmCancel);",
                "range": {
                  "startLineNumber": 296,
                  "startColumn": 1,
                  "endLineNumber": 296,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle checkbox changes (set checkbox state in data)",
                "range": {
                  "startLineNumber": 297,
                  "startColumn": 1,
                  "endLineNumber": 297,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.process-checkbox', function() {",
                "range": {
                  "startLineNumber": 298,
                  "startColumn": 1,
                  "endLineNumber": 298,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const checkbox = $(this);",
                "range": {
                  "startLineNumber": 299,
                  "startColumn": 1,
                  "endLineNumber": 299,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            toggleCheckbox(checkbox);",
                "range": {
                  "startLineNumber": 300,
                  "startColumn": 1,
                  "endLineNumber": 300,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 301,
                  "startColumn": 1,
                  "endLineNumber": 301,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.process-date-input', function() {",
                "range": {
                  "startLineNumber": 302,
                  "startColumn": 1,
                  "endLineNumber": 302,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const dateInput = $(this);",
                "range": {
                  "startLineNumber": 303,
                  "startColumn": 1,
                  "endLineNumber": 303,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            updateDateInput(dateInput);",
                "range": {
                  "startLineNumber": 304,
                  "startColumn": 1,
                  "endLineNumber": 304,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 305,
                  "startColumn": 1,
                  "endLineNumber": 305,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle revert button clicks",
                "range": {
                  "startLineNumber": 306,
                  "startColumn": 1,
                  "endLineNumber": 306,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('click', '.revert-btn', function() {",
                "range": {
                  "startLineNumber": 307,
                  "startColumn": 1,
                  "endLineNumber": 307,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const rowIndex = $(this).data('row');",
                "range": {
                  "startLineNumber": 308,
                  "startColumn": 1,
                  "endLineNumber": 308,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            revertRow(rowIndex);",
                "range": {
                  "startLineNumber": 309,
                  "startColumn": 1,
                  "endLineNumber": 309,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 310,
                  "startColumn": 1,
                  "endLineNumber": 310,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle modify button clicks",
                "range": {
                  "startLineNumber": 311,
                  "startColumn": 1,
                  "endLineNumber": 311,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('click', '.edit-field-btn', function() {",
                "range": {
                  "startLineNumber": 312,
                  "startColumn": 1,
                  "endLineNumber": 312,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const modifyButton = $(this);",
                "range": {
                  "startLineNumber": 313,
                  "startColumn": 1,
                  "endLineNumber": 313,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            modifyProcessDetails(modifyButton);",
                "range": {
                  "startLineNumber": 314,
                  "startColumn": 1,
                  "endLineNumber": 314,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 315,
                  "startColumn": 1,
                  "endLineNumber": 315,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 316,
                  "startColumn": 1,
                  "endLineNumber": 316,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 317,
                  "startColumn": 1,
                  "endLineNumber": 317,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Add Mode/Modal ----- ////",
                "range": {
                  "startLineNumber": 318,
                  "startColumn": 1,
                  "endLineNumber": 318,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 319,
                  "startColumn": 1,
                  "endLineNumber": 319,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Add button click handler to enter Add mode",
                "range": {
                  "startLineNumber": 320,
                  "startColumn": 1,
                  "endLineNumber": 320,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addEntriesBtn').click(enterAddMode);",
                "range": {
                  "startLineNumber": 321,
                  "startColumn": 1,
                  "endLineNumber": 321,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 322,
                  "startColumn": 1,
                  "endLineNumber": 322,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Add Entry button click in Modal",
                "range": {
                  "startLineNumber": 323,
                  "startColumn": 1,
                  "endLineNumber": 323,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addToTempBtn').click(addToTempEntries);",
                "range": {
                  "startLineNumber": 324,
                  "startColumn": 1,
                  "endLineNumber": 324,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 325,
                  "startColumn": 1,
                  "endLineNumber": 325,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle remove temporary entry in Modal",
                "range": {
                  "startLineNumber": 326,
                  "startColumn": 1,
                  "endLineNumber": 326,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);",
                "range": {
                  "startLineNumber": 327,
                  "startColumn": 1,
                  "endLineNumber": 327,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 328,
                  "startColumn": 1,
                  "endLineNumber": 328,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle Save All Entries button click to finalize adding entries",
                "range": {
                  "startLineNumber": 329,
                  "startColumn": 1,
                  "endLineNumber": 329,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#saveNewEntriesBtn').click(saveAddedEntries);",
                "range": {
                  "startLineNumber": 330,
                  "startColumn": 1,
                  "endLineNumber": 330,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 331,
                  "startColumn": 1,
                  "endLineNumber": 331,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle modal hidden event",
                "range": {
                  "startLineNumber": 332,
                  "startColumn": 1,
                  "endLineNumber": 332,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);",
                "range": {
                  "startLineNumber": 333,
                  "startColumn": 1,
                  "endLineNumber": 333,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 334,
                  "startColumn": 1,
                  "endLineNumber": 334,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Handle checkbox changes",
                "range": {
                  "startLineNumber": 335,
                  "startColumn": 1,
                  "endLineNumber": 335,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {",
                "range": {
                  "startLineNumber": 336,
                  "startColumn": 1,
                  "endLineNumber": 336,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            checkbox.addEventListener('change', handleProcessCheckboxChanges);",
                "range": {
                  "startLineNumber": 337,
                  "startColumn": 1,
                  "endLineNumber": 337,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 338,
                  "startColumn": 1,
                  "endLineNumber": 338,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 339,
                  "startColumn": 1,
                  "endLineNumber": 339,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 340,
                  "startColumn": 1,
                  "endLineNumber": 340,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#toggleUniformLocation').change(toggleUniformLocation);",
                "range": {
                  "startLineNumber": 341,
                  "startColumn": 1,
                  "endLineNumber": 341,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 342,
                  "startColumn": 1,
                  "endLineNumber": 342,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#newEntryLocationUniform').change(updateAllLocations);",
                "range": {
                  "startLineNumber": 343,
                  "startColumn": 1,
                  "endLineNumber": 343,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 344,
                  "startColumn": 1,
                  "endLineNumber": 344,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 345,
                  "startColumn": 1,
                  "endLineNumber": 345,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    //// ----- Deletion Mode ----- ////",
                "range": {
                  "startLineNumber": 346,
                  "startColumn": 1,
                  "endLineNumber": 346,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    {",
                "range": {
                  "startLineNumber": 347,
                  "startColumn": 1,
                  "endLineNumber": 347,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Delete button click handler to enter Delete mode",
                "range": {
                  "startLineNumber": 348,
                  "startColumn": 1,
                  "endLineNumber": 348,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#deleteBtn').click(enterDeleteMode);",
                "range": {
                  "startLineNumber": 349,
                  "startColumn": 1,
                  "endLineNumber": 349,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 350,
                  "startColumn": 1,
                  "endLineNumber": 350,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        //// Exit Deletion Mode ////",
                "range": {
                  "startLineNumber": 351,
                  "startColumn": 1,
                  "endLineNumber": 351,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Cancel delete button click handler (default für DB reload is false)",
                "range": {
                  "startLineNumber": 352,
                  "startColumn": 1,
                  "endLineNumber": 352,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#cancelDeleteBtn').click(exitDeleteMode);",
                "range": {
                  "startLineNumber": 353,
                  "startColumn": 1,
                  "endLineNumber": 353,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 354,
                  "startColumn": 1,
                  "endLineNumber": 354,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Confirm delete button click handler",
                "range": {
                  "startLineNumber": 355,
                  "startColumn": 1,
                  "endLineNumber": 355,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#confirmDeleteModeBtn').click(function() {",
                "range": {
                  "startLineNumber": 356,
                  "startColumn": 1,
                  "endLineNumber": 356,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (rowsToDelete.size === 0) {",
                "range": {
                  "startLineNumber": 357,
                  "startColumn": 1,
                  "endLineNumber": 357,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");",
                "range": {
                  "startLineNumber": 358,
                  "startColumn": 1,
                  "endLineNumber": 358,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                // (default für DB reload is false)",
                "range": {
                  "startLineNumber": 359,
                  "startColumn": 1,
                  "endLineNumber": 359,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                exitDeleteMode();",
                "range": {
                  "startLineNumber": 360,
                  "startColumn": 1,
                  "endLineNumber": 360,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                return;",
                "range": {
                  "startLineNumber": 361,
                  "startColumn": 1,
                  "endLineNumber": 361,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 362,
                  "startColumn": 1,
                  "endLineNumber": 362,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 363,
                  "startColumn": 1,
                  "endLineNumber": 363,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            $('#confirmDeleteModal').modal('show');",
                "range": {
                  "startLineNumber": 364,
                  "startColumn": 1,
                  "endLineNumber": 364,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 365,
                  "startColumn": 1,
                  "endLineNumber": 365,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        //// Confirmation Modals Delete Mode ////",
                "range": {
                  "startLineNumber": 366,
                  "startColumn": 1,
                  "endLineNumber": 366,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Final delete confirmation handler",
                "range": {
                  "startLineNumber": 367,
                  "startColumn": 1,
                  "endLineNumber": 367,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#finalConfirmDeleteBtn').click(processDeletion);",
                "range": {
                  "startLineNumber": 368,
                  "startColumn": 1,
                  "endLineNumber": 368,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Delete checkbox change handler",
                "range": {
                  "startLineNumber": 369,
                  "startColumn": 1,
                  "endLineNumber": 369,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);",
                "range": {
                  "startLineNumber": 370,
                  "startColumn": 1,
                  "endLineNumber": 370,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    }",
                "range": {
                  "startLineNumber": 371,
                  "startColumn": 1,
                  "endLineNumber": 371,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 372,
                  "startColumn": 1,
                  "endLineNumber": 372,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 373,
                  "startColumn": 1,
                  "endLineNumber": 373,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 374,
                  "startColumn": 1,
                  "endLineNumber": 374,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Initialize Bootstrap tooltips",
                "range": {
                  "startLineNumber": 375,
                  "startColumn": 1,
                  "endLineNumber": 375,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('[data-toggle=\"tooltip\"]').tooltip();",
                "range": {
                  "startLineNumber": 376,
                  "startColumn": 1,
                  "endLineNumber": 376,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 377,
                  "startColumn": 1,
                  "endLineNumber": 377,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Toggle dates on checkbox change",
                "range": {
                  "startLineNumber": 378,
                  "startColumn": 1,
                  "endLineNumber": 378,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#toggleDates').change(function() {",
                "range": {
                  "startLineNumber": 379,
                  "startColumn": 1,
                  "endLineNumber": 379,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        table.rows().invalidate().draw(); // Redraw the table to reflect changes",
                "range": {
                  "startLineNumber": 380,
                  "startColumn": 1,
                  "endLineNumber": 380,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw",
                "range": {
                  "startLineNumber": 381,
                  "startColumn": 1,
                  "endLineNumber": 381,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 382,
                  "startColumn": 1,
                  "endLineNumber": 382,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 383,
                  "startColumn": 1,
                  "endLineNumber": 383,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    // Event listener for the checkboxes in the dropdown",
                "range": {
                  "startLineNumber": 384,
                  "startColumn": 1,
                  "endLineNumber": 384,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    $('#processMenu input[type=\"checkbox\"]').change(function() {",
                "range": {
                  "startLineNumber": 385,
                  "startColumn": 1,
                  "endLineNumber": 385,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {",
                "range": {
                  "startLineNumber": 386,
                  "startColumn": 1,
                  "endLineNumber": 386,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            return $(this).val();",
                "range": {
                  "startLineNumber": 387,
                  "startColumn": 1,
                  "endLineNumber": 387,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        }).get(); // Get selected process names",
                "range": {
                  "startLineNumber": 388,
                  "startColumn": 1,
                  "endLineNumber": 388,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);",
                "range": {
                  "startLineNumber": 389,
                  "startColumn": 1,
                  "endLineNumber": 389,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)",
                "range": {
                  "startLineNumber": 390,
                  "startColumn": 1,
                  "endLineNumber": 390,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 391,
                  "startColumn": 1,
                  "endLineNumber": 391,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        // Loop through all columns and set visibility based on selection",
                "range": {
                  "startLineNumber": 392,
                  "startColumn": 1,
                  "endLineNumber": 392,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        const columns = table.columns().indexes(); // Get all column indexes",
                "range": {
                  "startLineNumber": 393,
                  "startColumn": 1,
                  "endLineNumber": 393,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        columns.each(function(index) {",
                "range": {
                  "startLineNumber": 394,
                  "startColumn": 1,
                  "endLineNumber": 394,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            const columnName = table.column(index).header().textContent;",
                "range": {
                  "startLineNumber": 395,
                  "startColumn": 1,
                  "endLineNumber": 395,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            if (selectedProcesses.includes(columnName)) {",
                "range": {
                  "startLineNumber": 396,
                  "startColumn": 1,
                  "endLineNumber": 396,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                table.column(index).visible(true);",
                "range": {
                  "startLineNumber": 397,
                  "startColumn": 1,
                  "endLineNumber": 397,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            } else {",
                "range": {
                  "startLineNumber": 398,
                  "startColumn": 1,
                  "endLineNumber": 398,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                                table.column(index).visible(false);",
                "range": {
                  "startLineNumber": 399,
                  "startColumn": 1,
                  "endLineNumber": 399,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                            }",
                "range": {
                  "startLineNumber": 400,
                  "startColumn": 1,
                  "endLineNumber": 400,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                        });",
                "range": {
                  "startLineNumber": 401,
                  "startColumn": 1,
                  "endLineNumber": 401,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    });",
                "range": {
                  "startLineNumber": 402,
                  "startColumn": 1,
                  "endLineNumber": 402,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 403,
                  "startColumn": 1,
                  "endLineNumber": 403,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                error: function(xhr, status, error) {",
                "range": {
                  "startLineNumber": 404,
                  "startColumn": 1,
                  "endLineNumber": 404,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                    console.error('Error fetching data:', error);",
                "range": {
                  "startLineNumber": 405,
                  "startColumn": 1,
                  "endLineNumber": 405,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "                },",
                "range": {
                  "startLineNumber": 406,
                  "startColumn": 1,
                  "endLineNumber": 406,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "            });",
                "range": {
                  "startLineNumber": 407,
                  "startColumn": 1,
                  "endLineNumber": 407,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 408,
                  "startColumn": 1,
                  "endLineNumber": 408,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "        });",
                "range": {
                  "startLineNumber": 409,
                  "startColumn": 1,
                  "endLineNumber": 409,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "    </script>",
                "range": {
                  "startLineNumber": 410,
                  "startColumn": 1,
                  "endLineNumber": 410,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "",
                "range": {
                  "startLineNumber": 411,
                  "startColumn": 1,
                  "endLineNumber": 411,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</body>",
                "range": {
                  "startLineNumber": 412,
                  "startColumn": 1073741825,
                  "endLineNumber": 412,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n",
                "range": {
                  "startLineNumber": 413,
                  "startColumn": 1073741825,
                  "endLineNumber": 413,
                  "endColumn": 1073741825
                }
              }
            ],
            [
              {
                "text": "\n</html>",
                "range": {
                  "startLineNumber": 414,
                  "startColumn": 1073741825,
                  "endLineNumber": 414,
                  "endColumn": 1073741825
                }
              }
            ],
            []
          ],
          "done": true
        }
      ],
      "responseId": "response_fe0675ae-2fd7-47c4-8770-db111cc4bad2",
      "isHidden": false,
      "result": {
        "timings": {
          "firstProgress": 10815,
          "totalElapsed": 29690
        },
        "metadata": {
          "edits": {
            "workingSet": [
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 65,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 85,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\js\\populateAddModal.js",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
                  "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
                  "scheme": "file"
                },
                "text": "function generateAddModalTempTable() {\r\n\treturn `<div id=\"tempEntriesContainer\" class=\"mb-4 d-none\">\r\n                <h6>Entries to be added:</h6>\r\n                <div style=\"max-height: 300px; overflow-y: auto; overflow-x: auto;\">\r\n                    <table class=\"table table-sm\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>RZBK</th>\r\n                                <th>Name</th>\r\n                                <th>Standort</th>\r\n                                ${processNames.map(col => `<th class=\"text-center\">${col}</th>`).join('')}\r\n                                <th class=\"text-center\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody id=\"tempEntriesBody\">\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\nfunction generateAddModalEntryForm() {\r\n    return `<div id=\"addModalProcessSelector\" class=\"row mt-3\">\r\n                ${processNames.map(col => `\r\n                <div class=\"col-md-6 mb-3\">\r\n                    <div class=\"row\">\r\n                        <div class=\"d-flex justify-content-between align-items-center\">\r\n                            <div class=\"form-check\">\r\n                                <input type=\"checkbox\" \r\n                                    class=\"form-check-input process-checkbox-new\" \r\n                                    id=\"newEntry${col.toLowerCase()}\" \r\n                                    data-process=\"${col.toLowerCase()}\">\r\n                                <label class=\"form-check-label\" for=\"newEntry${col.toLowerCase()}\">${col}</label>\r\n                            </div>\r\n                            <input type=\"date\" \r\n                                class=\"form-control date-input-new\" \r\n                                style=\"width: 130px;\"\r\n                                id=\"dateEntry${col.toLowerCase()}\"\r\n                                data-process=\"${col.toLowerCase()}\"\r\n                                disabled \r\n                                required\r\n                                novalidate>\r\n                        </div>\r\n                        <div class=\"invalid-feedback\">\r\n                            Please select a date.\r\n                        </div>\r\n                    </div>\r\n                    <select class=\"form-select form-select-sm mt-2 newEntryLocation\" id=\"newEntryLocation${col.toLowerCase()}\" required disabled>\r\n                        <option value=\"\" selected disabled hidden>Wähle Standort</option>\r\n                        ${Object.entries(locationMapping).map(([id,location]) => `<option value=\"${id}\">${location}</option>`).join('')}\r\n                    </select>\r\n                    <div class=\"invalid-feedback\">\r\n                        Bitte wählen Sie einen Standort aus.\r\n                    </div>\r\n                </div>\r\n                `).join('')}</div>`;\r\n}\r\n\r\nfunction generateLocationSelector() {\r\n    return `<div id=\"locationSelector\" class=\"row mt-3 align-items-center\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                    <label for=\"newEntryLocation\" class=\"form-label\">Standort</label>\r\n                    <select class=\"form-select newEntryLocation\" id=\"newEntryLocationUniform\" required>\r\n                        <option value=\"\" selected disabled hidden>Wähle Standort</option>\r\n                        ${Object.entries(locationMapping).map(([id,location]) => `<option value=\"${id}\">${location}</option>`).join('')}\r\n                    </select>\r\n                    <div class=\"invalid-feedback\">\r\n                        Bitte wählen Sie einen Standort aus.\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleUniformLocation\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleUniformLocation\">Einheitlicher Standort</label>\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\nfunction generateInstituteSelector() {\r\n    const sortedInstitutes = Object.entries(instituteMapping)\r\n        .sort((a, b) => Number(a[1].RZBK) - Number(b[1].RZBK));\r\n\r\n    return `<div id=\"instituteSelector\" class=\"col-12\">\r\n                <label for=\"newEntryInstitute\" class=\"form-label\">Institut</label>\r\n                <div class=\"input-group\">\r\n                    <select class=\"form-select\" id=\"newEntryInstitute\" required>\r\n                        <option value=\"\" selected disabled hidden>Institut wählen...</option>\r\n                        ${sortedInstitutes.map(([id, inst]) => \r\n                            `<option value=\"${id}\" data-rzbk=\"${inst.RZBK}\">${inst.RZBK} - ${inst.Name}</option>`\r\n                        ).join('')}\r\n                    </select>\r\n                    <button class=\"btn btn-outline-secondary rounded-0 rounded-end-1\" type=\"button\" id=\"refreshInstitutes\">\r\n                        <i class=\"bi bi-arrow-clockwise\"></i>\r\n                    </button>\r\n                </div>\r\n                <div class=\"invalid-feedback\">\r\n                    Bitte wählen Sie ein Institut aus.\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\n// Add this new function to handle institute refresh\r\nasync function refreshInstitutes() {\r\n    try {\r\n        const response = await fetch('./db/refresh_institutes.php');\r\n        if (!response.ok) throw new Error('Network response was not ok');\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n            instituteMapping = data.institutes;\r\n            \r\n            // Regenerate the institute selector\r\n            $('#instituteSelector').replaceWith(generateInstituteSelector());\r\n            \r\n            // Reinitialize Select2\r\n            $('#newEntryInstitute').select2({\r\n                theme: 'bootstrap-5',\r\n                width: '100%',\r\n                placeholder: 'Institut suchen...',\r\n                allowClear: true,\r\n                dropdownParent: $('#addEntriesModal')\r\n            });\r\n            \r\n            showToast('Institute wurden aktualisiert', 'refresh', 'success');\r\n        } else {\r\n            throw new Error(data.error || 'Unknown error occurred');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error refreshing institutes:', error);\r\n        showToast('Fehler beim Aktualisieren der Institute', 'error', 'danger');\r\n    }\r\n}\r\n\r\nfunction popuplateAddModal() {\r\n    // Setup table for temporary entries\r\n    $('#tempEntriesContainer').replaceWith(generateAddModalTempTable());\r\n    \r\n    // Add institute selector before RZBK/Name inputs\r\n    $('#instituteSelector').replaceWith(generateInstituteSelector());\r\n    \r\n    // Disable RZBK/Name inputs\r\n    $('#newEntryRZBK, #newEntryName').prop('readonly', true);\r\n\r\n    // Initialize Select2 after DOM ready\r\n    $(document).ready(function() {\r\n        $('#newEntryInstitute').select2({\r\n            theme: 'bootstrap-5',\r\n            width: null, // Changed from '100%' to null\r\n            placeholder: 'Institut suchen...',\r\n            allowClear: true,\r\n            dropdownParent: $('#addEntriesModal')\r\n        });\r\n    });\r\n    \r\n    // Add change handler for institute selector\r\n    $('#newEntryInstitute').on('change', function() {\r\n        const selectedId = $(this).val();\r\n        if (selectedId) {\r\n            const institute = instituteMapping[selectedId];\r\n            $('#newEntryRZBK').val(institute.RZBK);\r\n            $('#newEntryName').val(institute.Name);\r\n        } else {\r\n            $('#newEntryRZBK, #newEntryName').val('');\r\n        }\r\n    });\r\n\r\n    // // Initialize Select2 on institute selector\r\n    // $('#newEntryInstitute').select2({\r\n    //     theme: 'bootstrap-5',\r\n    //     width: '100%',\r\n    //     placeholder: 'Institut suchen...',\r\n    //     allowClear: true\r\n    // });\r\n    \r\n    // Setup the entry form\r\n    $('#addModalProcessSelector').replaceWith(generateAddModalEntryForm());\r\n    \r\n    // Setup location selector\r\n    $('#locationSelector').replaceWith(generateLocationSelector());\r\n\r\n    // Add refresh button handler\r\n    $(document).on('click', '#refreshInstitutes', refreshInstitutes);\r\n}",
                "languageId": "javascript",
                "version": 1,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
                  "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
                  "scheme": "file"
                },
                "text": "<?php\r\n// Enable error reporting for debugging\r\nerror_reporting(E_ALL);\r\nini_set('display_errors', 1);\r\n\r\n// data.php\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    // Get database connection\r\n    $conn = Database::getConnection();\r\n\r\n    // Query to fetch location (Standort) data\r\n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $locationData = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $locationData[] = $row;\r\n    }\r\n    $locationMapping = [];\r\n    foreach ($locationData as $row) {\r\n        $locationMapping[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\r\n    }\r\n    sqlsrv_free_stmt($result);\r\n\r\n    // Pass the mapping to JavaScript (e.g., as JSON)\r\n    echo \"<script>\r\n            let locationMapping = \" . json_encode($locationMapping) . \";\r\n        </script>\";\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo 'Fehler';\r\n    echo 'Error: ' . $e->getMessage();\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    // Close the connection\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 7,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
                  "scheme": "file"
                },
                "text": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p class=\"fw-bold\">This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message\r\n        let editingId = null; // Add variable to store ID for editing\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                editingId = null;\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                if (editingId) {\r\n                    // For editing, include the ID and use update endpoint\r\n                    data.id = editingId;\r\n                    $.ajax({\r\n                        url: './db/update_location.php',\r\n                        method: 'PUT',\r\n                        data: JSON.stringify(data),\r\n                        contentType: 'application/json',\r\n                        success: function(response) {\r\n                            if (response.duplicate) {\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(response.message, 'finish', 'danger');\r\n                            } else {\r\n                                $('#locationModal').modal('hide');\r\n                                table.ajax.reload();\r\n                                showToast(response.message, 'finish', response.status);\r\n                            }\r\n                        },\r\n                        error: function(xhr) {\r\n                            showToast('Error updating location', 'finish', 'error');\r\n                        }\r\n                    });\r\n                } else {\r\n                    // For new entries, keep existing duplicate check and save logic\r\n                    // Check for duplicates first\r\n                    $.ajax({\r\n                        url: './db/check_location_duplicate.php',\r\n                        method: 'POST',\r\n                        data: JSON.stringify(data),\r\n                        contentType: 'application/json',\r\n                        success: function(response) {\r\n                            if (response.exists) {\r\n                                if (response.type === 'abbreviation') {\r\n                                    // Show error for duplicate abbreviation\r\n                                    abbreviationField.addClass('is-invalid');\r\n                                    $('#duplicateError').removeClass('d-none');\r\n                                    showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                                } else {\r\n                                    // Show confirmation modal for location name duplicate\r\n                                    $('#duplicateLocationName').text(data.location);\r\n                                    $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                    pendingSave = data;\r\n                                    $('#duplicateConfirmModal').modal('show');\r\n                                }\r\n                            } else {\r\n                                performSave(data);\r\n                            }\r\n                        },\r\n                        error: function(xhr) {\r\n                            showToast('Error checking for duplicates', 'finish', 'danger');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Edit button click\r\n            $('#locationTable').on('click', '.edit-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Standort;\r\n\r\n                $('#modalTitle').text('Edit Location');\r\n                $('#location').val(row.Standort);\r\n                $('#abbreviation').val(row.Standort_Kuerzel);\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n                deletingAbbr = row.Standort_Kuerzel;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        $('#deleteLocationAbbr').text(deletingAbbr);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\r\n",
                "languageId": "php",
                "version": 3139,
                "state": 2
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                  "scheme": "file"
                },
                "text": "<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>",
                "languageId": "php",
                "version": 812,
                "state": 1
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\update_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // Check if the new abbreviation is already used by another location\r\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\r\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\r\n        echo json_encode([\r\n            \"success\" => false,\r\n            \"status\" => \"error\",\r\n            \"duplicate\" => true,\r\n            \"message\" => \"This abbreviation is already in use by another location\"\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Update the location\r\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\r\n    $params = array($data->location, $data->abbreviation, $data->id);\r\n    \r\n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location updated successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 59,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 41,
                "state": 0
              },
              {
                "uri": {
                  "$mid": 1,
                  "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
                  "_sep": 1,
                  "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
                  "scheme": "file"
                },
                "text": "<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\r\n",
                "languageId": "php",
                "version": 34,
                "state": 0
              }
            ],
            "request": "<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for abbreviation duplicate (not allowed)\r\n    $query = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->abbreviation));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"abbreviation\",\r\n            \"existingLocation\" => $row['Standort']\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for name duplicate (needs confirmation)\r\n    $query = \"SELECT Standort_Kuerzel FROM USEAP_RPA_Standort WHERE Standort = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->location));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"type\" => \"location\",\r\n            \"existingAbbreviation\" => $row['Standort_Kuerzel']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addInstituteBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Institute\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"instituteTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Institute Modal -->\r\n        <div class=\"modal fade\" id=\"instituteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Institute</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"instituteForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"instituteId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"rzbk\" class=\"form-label\">RZBK</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"rzbk\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an RZBK.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"name\" class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"name\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an institute name.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This exact combination of RZBK and Name already exists.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveInstituteBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- RZBK Duplicate Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Potential Duplicate RZBK</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>An institute with RZBK <span id=\"duplicateRZBK\"></span> already exists with name: <span id=\"existingName\"></span></p>\r\n                        <p>Do you want to create another entry with the same RZBK but different name?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete institute <strong><span id=\"deleteInstituteRZBK\"></span></strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p>This institute has the following processes assigned:</p>\r\n                            <p id=\"assignedProcessesList\" class=\"mb-2 fw-bold\"></p>\r\n                            <hr>\r\n                            <p class=\"mb-0\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let editingId = null;\r\n        let deletingRZBK = null; // Store RZBK for deletion message\r\n        let pendingSave = null; // Store pending save data for duplicate confirmation\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#instituteTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_institutes.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'RZBK',\r\n                        width: '80px' // RZBK is max 4 digits, so this is plenty\r\n                    },\r\n                    {\r\n                        data: 'Name',\r\n                        width: '400px' // Give Name column fixed width to prevent wrapping\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for modify column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px', // Set fixed width for delete column\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Bankenuebersicht}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Institute button click\r\n            $('#addInstituteBtn').click(function() {\r\n                editingId = null;\r\n                $('#modalTitle').text('Add Institute');\r\n                $('#instituteForm')[0].reset();\r\n                $('#rzbk').prop('readonly', false).removeClass('bg-light'); // Remove disabled appearance\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Edit button click\r\n            $('#instituteTable').on('click', '.edit-btn', function() {\r\n                const id = $(this).data('id');\r\n                editingId = id;\r\n                const row = table.row($(this).closest('tr')).data();\r\n\r\n                $('#modalTitle').text('Edit Institute');\r\n                $('#rzbk').val(row.RZBK).prop('readonly', true).addClass('bg-light'); // Add disabled appearance\r\n                $('#name').val(row.Name);\r\n                $('#instituteModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event (triggers for both X and Cancel button)\r\n            $('#instituteModal').on('hidden.bs.modal', function() {\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Also clear error state when inputs change\r\n            $('#rzbk, #name').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n                if (!$('.is-invalid').length) {\r\n                    $('#duplicateError').addClass('d-none');\r\n                }\r\n            });\r\n\r\n            // Delete button click\r\n            $('#instituteTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Bankenuebersicht;\r\n                deletingRZBK = row.RZBK;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_assigned_processes.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({\r\n                        id: editingId\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteInstituteRZBK').text(deletingRZBK);\r\n                        if (response.hasProcesses) {\r\n                            $('#assignedProcessesList').text(response.processes.join(', '));\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking assigned processes', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Save Institute\r\n            $('#saveInstituteBtn').click(function() {\r\n                // Reset validation and error states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n                let isValid = true;\r\n\r\n                // Validate both fields\r\n                const rzbkField = $('#rzbk');\r\n                const nameField = $('#name');\r\n\r\n                if (!rzbkField.val().trim()) {\r\n                    rzbkField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!nameField.val().trim()) {\r\n                    nameField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    RZBK: rzbkField.val().trim(),\r\n                    Name: nameField.val().trim(),\r\n                    id: editingId\r\n                };\r\n\r\n                // If editing, bypass duplicate check\r\n                if (editingId) {\r\n                    performSave(data);\r\n                    return;\r\n                }\r\n\r\n                // For new entries, check for duplicates first\r\n                $.ajax({\r\n                    url: './db/check_duplicate.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        if (response.exists) {\r\n                            if (response.exactMatch) {\r\n                                // Show duplicate error and highlight fields\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                rzbkField.addClass('is-invalid');\r\n                                nameField.addClass('is-invalid');\r\n                            } else {\r\n                                // Show confirmation modal for RZBK duplicate\r\n                                $('#duplicateRZBK').text(data.RZBK);\r\n                                $('#existingName').text(response.existingName);\r\n                                pendingSave = data;\r\n                                $('#duplicateConfirmModal').modal('show');\r\n                            }\r\n                        } else {\r\n                            performSave(data);\r\n                        }\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking for duplicates', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_institute.php',\r\n                    method: data.id ? 'PUT' : 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#instituteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!editingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_institute.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: editingId,\r\n                        RZBK: deletingRZBK // Pass RZBK to server\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Institute ${deletingRZBK} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting institute', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->RZBK) || !isset($data->Name)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // First check for exact match\r\n    $query = \"SELECT COUNT(*) as count FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ? AND Name = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK, $data->Name));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row['count'] > 0) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => true\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Then check for RZBK duplicate with different name\r\n    $query = \"SELECT Name FROM USEAP_RPA_Bankenuebersicht WHERE RZBK = ?\";\r\n    $stmt = sqlsrv_query($conn, $query, array($data->RZBK));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $row = sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC);\r\n    if ($row) {\r\n        echo json_encode([\r\n            \"exists\" => true,\r\n            \"exactMatch\" => false,\r\n            \"existingName\" => $row['Name']\r\n        ]);\r\n    } else {\r\n        echo json_encode([\r\n            \"exists\" => false\r\n        ]);\r\n    }\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```javascript\n// filepath: /C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js\nfunction generateAddModalTempTable() {\r\n\treturn `<div id=\"tempEntriesContainer\" class=\"mb-4 d-none\">\r\n                <h6>Entries to be added:</h6>\r\n                <div style=\"max-height: 300px; overflow-y: auto; overflow-x: auto;\">\r\n                    <table class=\"table table-sm\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>RZBK</th>\r\n                                <th>Name</th>\r\n                                <th>Standort</th>\r\n                                ${processNames.map(col => `<th class=\"text-center\">${col}</th>`).join('')}\r\n                                <th class=\"text-center\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody id=\"tempEntriesBody\">\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\nfunction generateAddModalEntryForm() {\r\n    return `<div id=\"addModalProcessSelector\" class=\"row mt-3\">\r\n                ${processNames.map(col => `\r\n                <div class=\"col-md-6 mb-3\">\r\n                    <div class=\"row\">\r\n                        <div class=\"d-flex justify-content-between align-items-center\">\r\n                            <div class=\"form-check\">\r\n                                <input type=\"checkbox\" \r\n                                    class=\"form-check-input process-checkbox-new\" \r\n                                    id=\"newEntry${col.toLowerCase()}\" \r\n                                    data-process=\"${col.toLowerCase()}\">\r\n                                <label class=\"form-check-label\" for=\"newEntry${col.toLowerCase()}\">${col}</label>\r\n                            </div>\r\n                            <input type=\"date\" \r\n                                class=\"form-control date-input-new\" \r\n                                style=\"width: 130px;\"\r\n                                id=\"dateEntry${col.toLowerCase()}\"\r\n                                data-process=\"${col.toLowerCase()}\"\r\n                                disabled \r\n                                required\r\n                                novalidate>\r\n                        </div>\r\n                        <div class=\"invalid-feedback\">\r\n                            Please select a date.\r\n                        </div>\r\n                    </div>\r\n                    <select class=\"form-select form-select-sm mt-2 newEntryLocation\" id=\"newEntryLocation${col.toLowerCase()}\" required disabled>\r\n                        <option value=\"\" selected disabled hidden>Wähle Standort</option>\r\n                        ${Object.entries(locationMapping).map(([id,location]) => `<option value=\"${id}\">${location}</option>`).join('')}\r\n                    </select>\r\n                    <div class=\"invalid-feedback\">\r\n                        Bitte wählen Sie einen Standort aus.\r\n                    </div>\r\n                </div>\r\n                `).join('')}</div>`;\r\n}\r\n\r\nfunction generateLocationSelector() {\r\n    return `<div id=\"locationSelector\" class=\"row mt-3 align-items-center\">\r\n                <div class=\"col-md-6 mb-3\">\r\n                    <label for=\"newEntryLocation\" class=\"form-label\">Standort</label>\r\n                    <select class=\"form-select newEntryLocation\" id=\"newEntryLocationUniform\" required>\r\n                        <option value=\"\" selected disabled hidden>Wähle Standort</option>\r\n                        ${Object.entries(locationMapping).map(([id,location]) => `<option value=\"${id}\">${location}</option>`).join('')}\r\n                    </select>\r\n                    <div class=\"invalid-feedback\">\r\n                        Bitte wählen Sie einen Standort aus.\r\n                    </div>\r\n                </div>\r\n                <div class=\"col-md-6\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleUniformLocation\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleUniformLocation\">Einheitlicher Standort</label>\r\n                    </div>\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\nfunction generateInstituteSelector() {\r\n    const sortedInstitutes = Object.entries(instituteMapping)\r\n        .sort((a, b) => Number(a[1].RZBK) - Number(b[1].RZBK));\r\n\r\n    return `<div id=\"instituteSelector\" class=\"col-12\">\r\n                <label for=\"newEntryInstitute\" class=\"form-label\">Institut</label>\r\n                <div class=\"input-group\">\r\n                    <select class=\"form-select\" id=\"newEntryInstitute\" required>\r\n                        <option value=\"\" selected disabled hidden>Institut wählen...</option>\r\n                        ${sortedInstitutes.map(([id, inst]) => \r\n                            `<option value=\"${id}\" data-rzbk=\"${inst.RZBK}\">${inst.RZBK} - ${inst.Name}</option>`\r\n                        ).join('')}\r\n                    </select>\r\n                    <button class=\"btn btn-outline-secondary rounded-0 rounded-end-1\" type=\"button\" id=\"refreshInstitutes\">\r\n                        <i class=\"bi bi-arrow-clockwise\"></i>\r\n                    </button>\r\n                </div>\r\n                <div class=\"invalid-feedback\">\r\n                    Bitte wählen Sie ein Institut aus.\r\n                </div>\r\n            </div>`;\r\n}\r\n\r\n// Add this new function to handle institute refresh\r\nasync function refreshInstitutes() {\r\n    try {\r\n        const response = await fetch('./db/refresh_institutes.php');\r\n        if (!response.ok) throw new Error('Network response was not ok');\r\n        const data = await response.json();\r\n        \r\n        if (data.success) {\r\n            instituteMapping = data.institutes;\r\n            \r\n            // Regenerate the institute selector\r\n            $('#instituteSelector').replaceWith(generateInstituteSelector());\r\n            \r\n            // Reinitialize Select2\r\n            $('#newEntryInstitute').select2({\r\n                theme: 'bootstrap-5',\r\n                width: '100%',\r\n                placeholder: 'Institut suchen...',\r\n                allowClear: true,\r\n                dropdownParent: $('#addEntriesModal')\r\n            });\r\n            \r\n            showToast('Institute wurden aktualisiert', 'refresh', 'success');\r\n        } else {\r\n            throw new Error(data.error || 'Unknown error occurred');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error refreshing institutes:', error);\r\n        showToast('Fehler beim Aktualisieren der Institute', 'error', 'danger');\r\n    }\r\n}\r\n\r\nfunction popuplateAddModal() {\r\n    // Setup table for temporary entries\r\n    $('#tempEntriesContainer').replaceWith(generateAddModalTempTable());\r\n    \r\n    // Add institute selector before RZBK/Name inputs\r\n    $('#instituteSelector').replaceWith(generateInstituteSelector());\r\n    \r\n    // Disable RZBK/Name inputs\r\n    $('#newEntryRZBK, #newEntryName').prop('readonly', true);\r\n\r\n    // Initialize Select2 after DOM ready\r\n    $(document).ready(function() {\r\n        $('#newEntryInstitute').select2({\r\n            theme: 'bootstrap-5',\r\n            width: null, // Changed from '100%' to null\r\n            placeholder: 'Institut suchen...',\r\n            allowClear: true,\r\n            dropdownParent: $('#addEntriesModal')\r\n        });\r\n    });\r\n    \r\n    // Add change handler for institute selector\r\n    $('#newEntryInstitute').on('change', function() {\r\n        const selectedId = $(this).val();\r\n        if (selectedId) {\r\n            const institute = instituteMapping[selectedId];\r\n            $('#newEntryRZBK').val(institute.RZBK);\r\n            $('#newEntryName').val(institute.Name);\r\n        } else {\r\n            $('#newEntryRZBK, #newEntryName').val('');\r\n        }\r\n    });\r\n\r\n    // // Initialize Select2 on institute selector\r\n    // $('#newEntryInstitute').select2({\r\n    //     theme: 'bootstrap-5',\r\n    //     width: '100%',\r\n    //     placeholder: 'Institut suchen...',\r\n    //     allowClear: true\r\n    // });\r\n    \r\n    // Setup the entry form\r\n    $('#addModalProcessSelector').replaceWith(generateAddModalEntryForm());\r\n    \r\n    // Setup location selector\r\n    $('#locationSelector').replaceWith(generateLocationSelector());\r\n\r\n    // Add refresh button handler\r\n    $(document).on('click', '#refreshInstitutes', refreshInstitutes);\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php\n<?php\r\n// Enable error reporting for debugging\r\nerror_reporting(E_ALL);\r\nini_set('display_errors', 1);\r\n\r\n// data.php\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    // Get database connection\r\n    $conn = Database::getConnection();\r\n\r\n    // Query to fetch location (Standort) data\r\n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $locationData = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $locationData[] = $row;\r\n    }\r\n    $locationMapping = [];\r\n    foreach ($locationData as $row) {\r\n        $locationMapping[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\r\n    }\r\n    sqlsrv_free_stmt($result);\r\n\r\n    // Pass the mapping to JavaScript (e.g., as JSON)\r\n    echo \"<script>\r\n            let locationMapping = \" . json_encode($locationMapping) . \";\r\n        </script>\";\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo 'Fehler';\r\n    echo 'Error: ' . $e->getMessage();\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    // Close the connection\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Location Management</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Location Management</h2>\r\n        <div class=\"action-buttons mb-3\">\r\n            <a href=\"./index.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-table\"></i> Process Overview\r\n            </a>\r\n            <button id=\"addLocationBtn\" class=\"btn btn-success\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add Location\r\n            </button>\r\n        </div>\r\n        <!-- Add a div with max-width to constrain table width -->\r\n        <div style=\"max-width: 800px;\">\r\n            <table id=\"locationTable\" class=\"table table-striped\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Location</th>\r\n                        <th>Abbreviation</th>\r\n                        <th>Modify</th>\r\n                        <th>Delete</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n\r\n        <!-- Add/Edit Location Modal -->\r\n        <div class=\"modal fade\" id=\"locationModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\" id=\"modalTitle\">Add Location</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <form id=\"locationForm\" novalidate>\r\n                            <input type=\"hidden\" id=\"locationId\">\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"location\" class=\"form-label\">Location</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"location\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide a location name.\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"mb-3\">\r\n                                <label for=\"abbreviation\" class=\"form-label\">Abbreviation</label>\r\n                                <input type=\"text\" class=\"form-control\" id=\"abbreviation\" required>\r\n                                <div class=\"invalid-feedback\">\r\n                                    Please provide an abbreviation.\r\n                                </div>\r\n                            </div>\r\n                            <!-- Add duplicate error message container -->\r\n                            <div id=\"duplicateError\" class=\"alert alert-danger d-none\">\r\n                                This abbreviation is already in use.\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"saveLocationBtn\">Save</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Delete Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"deleteModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Confirm Deletion</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>Are you sure you want to delete location <strong><span id=\"deleteLocationName\"></span> (<span id=\"deleteLocationAbbr\"></span>)</strong>?</p>\r\n                        <div id=\"assignedProcessesWarning\" class=\"alert alert-warning d-none\">\r\n                            <p class=\"fw-bold\">This location has process assignments.</p>\r\n                            <hr>\r\n                            <p class=\"mb-0 fw-bold\">These process assignments will also be deleted.</p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-danger\" id=\"confirmDeleteBtn\">Delete</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- Duplicate Location Name Confirmation Modal -->\r\n        <div class=\"modal fade\" id=\"duplicateConfirmModal\" tabindex=\"-1\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Duplicate Location Name</h5>\r\n                        <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <p>A location named <strong><span id=\"duplicateLocationName\"></span></strong> already exists with abbreviation: <strong><span id=\"existingAbbreviation\"></span></strong></p>\r\n                        <p>Do you want to create another location with the same name but different abbreviation?</p>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-primary\" id=\"confirmDuplicateBtn\">Create Anyway</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Utils -->\r\n    <script src=\"./js/utils.js\"></script>\r\n\r\n    <script>\r\n        let table;\r\n        let pendingSave = null;\r\n        let deletingId = null; // Add variable to store ID for deletion\r\n        let deletingLocation = null; // Add variable to store location name for deletion message\r\n        let deletingAbbr = null; // Add variable to store location abbreviation for deletion message\r\n        let editingId = null; // Add variable to store ID for editing\r\n\r\n        $(document).ready(function() {\r\n            // Initialize DataTable\r\n            table = $('#locationTable').DataTable({\r\n                ajax: {\r\n                    url: './db/get_locations.php',\r\n                    dataSrc: ''\r\n                },\r\n                columns: [{\r\n                        data: 'Standort',\r\n                        width: '400px'\r\n                    },\r\n                    {\r\n                        data: 'Standort_Kuerzel',\r\n                        width: '200px'\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-primary edit-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-pencil\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    },\r\n                    {\r\n                        data: null,\r\n                        orderable: false,\r\n                        className: 'text-center',\r\n                        width: '50px',\r\n                        render: function(data, type, row) {\r\n                            return `\r\n                                <button class=\"btn btn-sm btn-danger delete-btn\" data-id=\"${row.pk_RPA_Standort}\">\r\n                                    <i class=\"bi bi-trash\"></i>\r\n                                </button>\r\n                            `;\r\n                        }\r\n                    }\r\n                ],\r\n                order: [\r\n                    [0, 'asc']\r\n                ],\r\n                layout: {\r\n                    topStart: ['pageLength'],\r\n                    topEnd: ['buttons', 'search'],\r\n                },\r\n                buttons: [{\r\n                    text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                    action: function(e, dt, node, config) {\r\n                        dt.ajax.reload();\r\n                    },\r\n                }],\r\n            });\r\n\r\n            // Add Location button click\r\n            $('#addLocationBtn').click(function() {\r\n                $('#modalTitle').text('Add Location');\r\n                $('#locationForm')[0].reset();\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Handle modal hidden event\r\n            $('#locationModal').on('hidden.bs.modal', function() {\r\n                editingId = null;\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                $('#duplicateError').addClass('d-none');\r\n            });\r\n\r\n            // Clear error state when inputs change\r\n            $('#location, #abbreviation').on('input', function() {\r\n                $(this).removeClass('is-invalid');\r\n            });\r\n\r\n            // Save Location\r\n            $('#saveLocationBtn').click(function() {\r\n                // Reset validation states\r\n                $('.is-invalid').removeClass('is-invalid');\r\n                let isValid = true;\r\n\r\n                // Validate fields\r\n                const locationField = $('#location');\r\n                const abbreviationField = $('#abbreviation');\r\n\r\n                if (!locationField.val().trim()) {\r\n                    locationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!abbreviationField.val().trim()) {\r\n                    abbreviationField.addClass('is-invalid');\r\n                    isValid = false;\r\n                }\r\n\r\n                if (!isValid) return;\r\n\r\n                const data = {\r\n                    location: locationField.val().trim(),\r\n                    abbreviation: abbreviationField.val().trim()\r\n                };\r\n\r\n                if (editingId) {\r\n                    // For editing, include the ID and use update endpoint\r\n                    data.id = editingId;\r\n                    $.ajax({\r\n                        url: './db/update_location.php',\r\n                        method: 'PUT',\r\n                        data: JSON.stringify(data),\r\n                        contentType: 'application/json',\r\n                        success: function(response) {\r\n                            if (response.duplicate) {\r\n                                abbreviationField.addClass('is-invalid');\r\n                                $('#duplicateError').removeClass('d-none');\r\n                                showToast(response.message, 'finish', 'danger');\r\n                            } else {\r\n                                $('#locationModal').modal('hide');\r\n                                table.ajax.reload();\r\n                                showToast(response.message, 'finish', response.status);\r\n                            }\r\n                        },\r\n                        error: function(xhr) {\r\n                            showToast('Error updating location', 'finish', 'error');\r\n                        }\r\n                    });\r\n                } else {\r\n                    // For new entries, keep existing duplicate check and save logic\r\n                    // Check for duplicates first\r\n                    $.ajax({\r\n                        url: './db/check_location_duplicate.php',\r\n                        method: 'POST',\r\n                        data: JSON.stringify(data),\r\n                        contentType: 'application/json',\r\n                        success: function(response) {\r\n                            if (response.exists) {\r\n                                if (response.type === 'abbreviation') {\r\n                                    // Show error for duplicate abbreviation\r\n                                    abbreviationField.addClass('is-invalid');\r\n                                    $('#duplicateError').removeClass('d-none');\r\n                                    showToast(`Abbreviation already exists for location: ${response.existingLocation}`, 'finish', 'danger');\r\n                                } else {\r\n                                    // Show confirmation modal for location name duplicate\r\n                                    $('#duplicateLocationName').text(data.location);\r\n                                    $('#existingAbbreviation').text(response.existingAbbreviation);\r\n                                    pendingSave = data;\r\n                                    $('#duplicateConfirmModal').modal('show');\r\n                                }\r\n                            } else {\r\n                                performSave(data);\r\n                            }\r\n                        },\r\n                        error: function(xhr) {\r\n                            showToast('Error checking for duplicates', 'finish', 'danger');\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n            function performSave(data) {\r\n                $.ajax({\r\n                    url: './db/save_location.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify(data),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#locationModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error saving location', 'finish', 'error');\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Handle duplicate confirmation\r\n            $('#confirmDuplicateBtn').click(function() {\r\n                if (pendingSave) {\r\n                    performSave(pendingSave);\r\n                    $('#duplicateConfirmModal').modal('hide');\r\n                }\r\n            });\r\n\r\n            // Edit button click\r\n            $('#locationTable').on('click', '.edit-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                editingId = row.pk_RPA_Standort;\r\n\r\n                $('#modalTitle').text('Edit Location');\r\n                $('#location').val(row.Standort);\r\n                $('#abbreviation').val(row.Standort_Kuerzel);\r\n                $('#locationModal').modal('show');\r\n            });\r\n\r\n            // Delete button click\r\n            $('#locationTable').on('click', '.delete-btn', function() {\r\n                const row = table.row($(this).closest('tr')).data();\r\n                deletingId = row.pk_RPA_Standort;\r\n                deletingLocation = row.Standort;\r\n                deletingAbbr = row.Standort_Kuerzel;\r\n\r\n                // Check for assigned processes before showing delete modal\r\n                $.ajax({\r\n                    url: './db/check_location_assignments.php',\r\n                    method: 'POST',\r\n                    data: JSON.stringify({ id: deletingId }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteLocationName').text(deletingLocation);\r\n                        $('#deleteLocationAbbr').text(deletingAbbr);\r\n                        if (response.hasAssignments) {\r\n                            $('#assignedProcessesWarning').removeClass('d-none');\r\n                        } else {\r\n                            $('#assignedProcessesWarning').addClass('d-none');\r\n                        }\r\n                        $('#deleteModal').modal('show');\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error checking process assignments', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n\r\n            // Reset warning when modal is hidden\r\n            $('#deleteModal').on('hidden.bs.modal', function() {\r\n                $('#assignedProcessesWarning').addClass('d-none');\r\n            });\r\n\r\n            // Confirm Delete\r\n            $('#confirmDeleteBtn').click(function() {\r\n                if (!deletingId) return;\r\n\r\n                $.ajax({\r\n                    url: './db/delete_location.php',\r\n                    method: 'DELETE',\r\n                    data: JSON.stringify({\r\n                        id: deletingId,\r\n                        location: deletingLocation\r\n                    }),\r\n                    contentType: 'application/json',\r\n                    success: function(response) {\r\n                        $('#deleteModal').modal('hide');\r\n                        table.ajax.reload();\r\n                        showToast(response.message || `Location ${deletingLocation} deleted successfully`, 'finish', response.status);\r\n                    },\r\n                    error: function(xhr) {\r\n                        showToast('Error deleting location', 'finish', 'error');\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    </script>\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n\n<status>I applied your suggestions for this file and accepted them. Here is the updated file:</status>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n<!-- browser-sync start --config DatabaseManager/browser-sync-config.js -->\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>Institute Process Overview</title>\r\n    <!-- Bootstrap CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css\" integrity=\"sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH\" crossorigin=\"anonymous\">\r\n    <!-- Bootstrap Icons -->\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css\" rel=\"stylesheet\">\r\n    <!-- DataTables CSS -->\r\n    <link href=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.css\" rel=\"stylesheet\">\r\n    <!-- Select2 CSS -->\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css\" rel=\"stylesheet\" />\r\n    <link href=\"https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css\" rel=\"stylesheet\" />\r\n    <!-- Custom styles -->\r\n    <link rel=\"stylesheet\" href=\"./css/style.css\">\r\n</head>\r\n\r\n<body>\r\n    <div class=\"container mt-5\">\r\n        <h2>Institute Process Overview</h2>\r\n        <!-- Add new navigation row -->\r\n        <div class=\"navigation-buttons mb-3\">\r\n            <a href=\"./institute.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-building\"></i> Manage Institutes\r\n            </a>\r\n            <a href=\"./location.php\" class=\"btn btn-outline-primary me-2\">\r\n                <i class=\"bi bi-geo-alt\"></i> Manage Locations\r\n            </a>\r\n        </div>\r\n        <div class=\"action-buttons btn-group\">\r\n            <button class=\"btn btn-secondary dropdown-toggle me-2 rounded\" type=\"button\" id=\"processDropdown\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n                <i class=\"bi bi-gear\"></i> <!-- Bootstrap Icons gear icon -->\r\n            </button>\r\n            <ul class=\"dropdown-menu\" aria-labelledby=\"processDropdown\" id=\"processMenu\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                    <div class=\"form-check form-switch\">\r\n                        <input type=\"checkbox\" role=\"switch\" class=\"form-check-input\" id=\"toggleDates\" checked>\r\n                        <label class=\"form-check-label\" for=\"toggleDates\">Show Dates</label>\r\n                    </div>\r\n                </div>\r\n                <!-- Title for the dropdown -->\r\n                <li class=\"dropdown-header text-center\">\r\n                    <span class=\"fw-bold\">Prozesse</span>\r\n                    <hr class=\"dropdown-divider\">\r\n                </li>\r\n                <!-- Checkboxes will be populated dynamically -->\r\n            </ul>\r\n            <button id=\"deleteBtn\" class=\"btn btn-danger me-2 rounded disabled\">\r\n                <i class=\"bi bi-trash\"></i> Delete\r\n            </button>\r\n            <button id=\"confirmDeleteModeBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Confirm\r\n            </button>\r\n            <button id=\"cancelDeleteBtn\" class=\"btn btn-secondary me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n            <button id=\"addEntriesBtn\" class=\"btn btn-success me-2 rounded disabled\">\r\n                <i class=\"bi bi-plus-lg\"></i> Add\r\n            </button>\r\n            <button id=\"modifyBtn\" class=\"btn btn-primary me-2 rounded disabled\">\r\n                <i class=\"bi bi-pencil\"></i> Modify\r\n            </button>\r\n            <button id=\"modifySaveBtn\" class=\"btn btn-success me-2 rounded d-none\">\r\n                <i class=\"bi bi-check-lg\"></i> Save\r\n            </button>\r\n            <button id=\"modifyCancelBtn\" class=\"btn btn-danger me-2 rounded d-none\">\r\n                <i class=\"bi bi-x-lg\"></i> Cancel\r\n            </button>\r\n        </div>\r\n        <div class=\"table-responsive full-width-table\">\r\n            <table id=\"institutesTable\" class=\"table table-striped\" >\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"delete-checkbox-cell d-none\">#</th>\r\n                        <th>RZBK</th>\r\n                        <th>Name</th>\r\n                        <th>Standort</th>\r\n                        <!-- Dynamic process columns will be added here -->\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <!-- Data will be populated by DataTables -->\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n        <?php include './toast/toast.html'; ?>\r\n        <?php include './modal/confirmationModal.html'; ?>\r\n        <?php include './modal/addModal.html'; ?>\r\n        <?php include './modal/modifyDetailsModal.html'; ?>\r\n    </div>\r\n\r\n    <!-- jQuery -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js\"></script>\r\n    <!-- Bootstrap Bundle with Popper -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js\"></script>\r\n    <!-- DataTables -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js\"></script>\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js\"></script>\r\n    <script src=\"https://cdn.datatables.net/v/bs5/jq-3.7.0/jszip-3.10.1/dt-2.2.1/b-3.2.1/b-colvis-3.2.1/b-html5-3.2.1/b-print-3.2.1/datatables.min.js\"></script>\r\n    <!-- Select2 JS -->\r\n    <script src=\"https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js\"></script>\r\n\r\n    <script src=\"./js/utils.js\"></script>\r\n    <script src=\"./js/dataOverview.js\"></script>\r\n    <script src=\"./js/retrieveData.js\"></script>\r\n    <script src=\"./js/toggleButtons.js\"></script>\r\n    <script src=\"./js/DB/createAssignment.js\"></script>\r\n    <script src=\"./js/DB/deleteAssignment.js\"></script>\r\n    <script src=\"./js/DB/updateAssignment.js\"></script>\r\n\r\n\r\n    <script src=\"./js/addMode.js\"></script>\r\n    <script src=\"./js/deleteMode.js\"></script>\r\n    <script src=\"./js/editMode.js\"></script>\r\n    <script src=\"./js/populateAddModal.js\"></script>\r\n    <script src=\"./js/editDetailsModal.js\"></script>\r\n\r\n    <!-- Embed PHP variables as JavaScript -->\r\n    <!-- Defines instituteMappingTest -->\r\n    <?php include './db/create_bankenmap.php'; ?>\r\n    <!-- Defines locationMapping and locationAssignment -->\r\n    <?php include './db/check_standort.php'; ?>\r\n    <!-- Defines processMapping and processNames -->\r\n    <?php include './db/get_processes.php'; ?>\r\n\r\n    <script>\r\n        let testMode = false;\r\n        // let testMode = true;\r\n        let table;\r\n        let data;\r\n        // let processNames;\r\n\r\n        let originalData = null;\r\n        let modifiedRows = [];\r\n        let editMode = false;\r\n        // Add new deletion-related variables\r\n        let deleteMode = false;\r\n        let rowsToDelete = new Set();\r\n        // Temporary storage for new entries\r\n        let tempEntries = [];\r\n        // Interval for reloading the table\r\n        let reloadInterval;\r\n\r\n        $(document).ready(function() {\r\n            // First, fetch the data to create dynamic columns\r\n            $.ajax({\r\n                url: './db/get_data.php',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                success: function(data) {\r\n                    // Process data to create dynamic columns\r\n                    // processNames = [...new Set(data.map(item => item.Prozessname))];\r\n\r\n                    // Create header columns for processes\r\n                    processNames.forEach(process => {\r\n                        $('#institutesTable thead tr').append(`<th>${process}</th>`);\r\n                        $('#processMenu').append(`\r\n                            <li class=\"dropdown-item form-check\">\r\n                                <div class=\"form-check\">\r\n                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${process}\" id=\"check-${process}\" checked>\r\n                                    <label class=\"form-check-label\" for=\"check-${process}\">${process}</label>\r\n                                </div>\r\n                            </li>\r\n                        `);\r\n                    });\r\n\r\n                    // Initialize DataTable with dynamic columns\r\n                    table = $('#institutesTable').DataTable({\r\n                        ajax: {\r\n                            url: './db/get_data.php',\r\n                            dataSrc: prepareDatabaseData,\r\n                        },\r\n                        initComplete: function(settings, json) {\r\n                            data = table.rows().data().toArray();\r\n                            // Start auto-reload after initialization every 30 seconds\r\n                            // reloadInterval = startAutoReload(table, reloadInterval);\r\n                        },\r\n                        columns: [{\r\n                                data: null,\r\n                                title: '#',\r\n                                orderable: false,\r\n                                className: 'delete-checkbox-cell d-none',\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<input type=\"checkbox\" class=\"delete-checkbox\" data-row=\"' + meta.row + '\">';\r\n                                },\r\n                                width: '40px'\r\n                            },\r\n                            {\r\n                                data: 'RZBK',\r\n                                title: 'RZBK'\r\n                            },\r\n                            {\r\n                                data: 'Name',\r\n                                title: 'Name'\r\n                            },\r\n                            {\r\n                                data: 'Standort',\r\n                                title: 'Standort',\r\n                                orderable: false,\r\n                            },\r\n                            ...processNames.map(process => ({\r\n                                data: process,\r\n                                className: 'checkbox-cell text-center',\r\n                                orderable: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    // Check the state of the toggle switch\r\n                                    const showDates = $('#toggleDates').is(':checked');\r\n                                    const date = data.startDate;\r\n                                    const enabled = data.checked;\r\n\r\n                                    return `\r\n                                        <div class=\"d-flex flex-column flex-lg-row align-items-center justify-content-center gap-1\">\r\n                                            <input type=\"checkbox\" ${enabled ? 'checked' : ''} disabled \r\n                                                class=\"mb-1 mb-lg-0 mr-lg-2 process-checkbox\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                data-toggle=\"tooltip\" title=\"${date ? date : ''}\">\r\n                                            ${showDates ? \r\n                                                true ? \r\n                                                `<input type=\"date\" style=\"width: 105px;\" \r\n                                                value=\"${formatDateStringToISO(date)}\" \r\n                                                class=\"form-control form-control-sm process-date-input\" \r\n                                                data-process=\"${process}\" data-row=\"${meta.row}\"\r\n                                                disabled\r\n                                                >` \r\n                                                : '' \r\n                                            : ''}\r\n                                            <i class=\"bi bi-pencil edit-field-btn d-none\" data-process=\"${process}\" data-row=\"${meta.row}\"></i>\r\n                                        </div>\r\n                                    `;\r\n                                }\r\n                            })),\r\n                            {\r\n                                data: null,\r\n                                title: 'Revert',\r\n                                className: 'revert-cell d-none',\r\n                                orderable: false,\r\n                                visible: false,\r\n                                render: function(data, type, row, meta) {\r\n                                    return '<i class=\"bi bi-trash revert-btn\" data-row=\"' + meta.row + '\"></i>';\r\n                                }\r\n                            }\r\n                        ],\r\n                        order: [\r\n                            [1, 'asc']\r\n                        ],\r\n                        // Do not allow ordering as it messes up in editing and deleting.\r\n                        ordering: false,\r\n                        layout: {\r\n                            topStart: ['pageLength'],\r\n                            topEnd: ['buttons', 'search'],\r\n                        },\r\n                        buttons: [{\r\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\r\n                            action: function(e, dt, node, config) {\r\n                                dt.ajax.reload();\r\n                                refreshInstitutes();\r\n                            },\r\n                        }, {\r\n                            extend: 'colvis',\r\n                            columns: ':not(.delete-checkbox-cell):not(.revert-cell)',\r\n                            text: 'Visibility',\r\n                            className: 'btn-secondary'\r\n                        }],\r\n                    });\r\n                    // Enable the buttons after the table is initialized\r\n                    enableButtons();\r\n\r\n                    // Populate the Add Modal with process names\r\n                    popuplateAddModal();\r\n\r\n                    // Handle page change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    table.on('page', handlePageChange);\r\n                    // Handle ordering change event (Make sure that all checkboxes/fields are shown and in the correct state)\r\n                    // table.on('order', handleOrderingChange);\r\n\r\n                    //// ----- Edit Mode ----- ////\r\n                    {\r\n                        // Handle Modify button click to enter Edit mode\r\n                        $('#modifyBtn').click(enterEditMode);\r\n                        // Handle Save button click\r\n                        $('#modifySaveBtn').click(handleSave);\r\n\r\n                        // Handle Cancel button click\r\n                        $('#modifyCancelBtn').click(handleCancel);\r\n                        // Handle Modal Save confirmation \r\n                        $('#modifyConfirmSave').click(confirmSave);\r\n                        // Handle Modal Cancel confirmation\r\n                        $('#modifyConfirmCancel').click(confirmCancel);\r\n                        // Handle checkbox changes (set checkbox state in data)\r\n                        $('#institutesTable').on('change', '.process-checkbox', function() {\r\n                            const checkbox = $(this);\r\n                            toggleCheckbox(checkbox);\r\n                        });\r\n                        $('#institutesTable').on('change', '.process-date-input', function() {\r\n                            const dateInput = $(this);\r\n                            updateDateInput(dateInput);\r\n                        });\r\n                        // Handle revert button clicks\r\n                        $('#institutesTable').on('click', '.revert-btn', function() {\r\n                            const rowIndex = $(this).data('row');\r\n                            revertRow(rowIndex);\r\n                        });\r\n                        // Handle modify button clicks\r\n                        $('#institutesTable').on('click', '.edit-field-btn', function() {\r\n                            const modifyButton = $(this);\r\n                            modifyProcessDetails(modifyButton);\r\n                        });\r\n                    }\r\n\r\n                    //// ----- Add Mode/Modal ----- ////\r\n                    {\r\n                        // Add button click handler to enter Add mode\r\n                        $('#addEntriesBtn').click(enterAddMode);\r\n\r\n                        // Handle Add Entry button click in Modal\r\n                        $('#addToTempBtn').click(addToTempEntries);\r\n\r\n                        // Handle remove temporary entry in Modal\r\n                        $('#tempEntriesBody').on('click', '.remove-temp-entry', removeTempEntries);\r\n\r\n                        // Handle Save All Entries button click to finalize adding entries\r\n                        $('#saveNewEntriesBtn').click(saveAddedEntries);\r\n\r\n                        // Handle modal hidden event\r\n                        $('#addEntriesModal').on('hidden.bs.modal', resetOnHidden);\r\n\r\n                        // Handle checkbox changes\r\n                        document.querySelectorAll('.process-checkbox-new').forEach(checkbox => {\r\n                            checkbox.addEventListener('change', handleProcessCheckboxChanges);\r\n                        });\r\n\r\n                        // Toggle dates on checkbox change\r\n                        $('#toggleUniformLocation').change(toggleUniformLocation);\r\n                        // Toggle dates on checkbox change\r\n                        $('#newEntryLocationUniform').change(updateAllLocations);\r\n                    }\r\n\r\n                    //// ----- Deletion Mode ----- ////\r\n                    {\r\n                        // Delete button click handler to enter Delete mode\r\n                        $('#deleteBtn').click(enterDeleteMode);\r\n\r\n                        //// Exit Deletion Mode ////\r\n                        // Cancel delete button click handler (default für DB reload is false)\r\n                        $('#cancelDeleteBtn').click(exitDeleteMode);\r\n\r\n                        // Confirm delete button click handler\r\n                        $('#confirmDeleteModeBtn').click(function() {\r\n                            if (rowsToDelete.size === 0) {\r\n                                showToast(\"No rows selected for deletion\", \"finish\", \"info\");\r\n                                // (default für DB reload is false)\r\n                                exitDeleteMode();\r\n                                return;\r\n                            }\r\n\r\n                            $('#confirmDeleteModal').modal('show');\r\n                        });\r\n                        //// Confirmation Modals Delete Mode ////\r\n                        // Final delete confirmation handler\r\n                        $('#finalConfirmDeleteBtn').click(processDeletion);\r\n                        // Delete checkbox change handler\r\n                        $('#institutesTable').on('change', '.delete-checkbox', toggleSelectedForDeletion);\r\n                    }\r\n\r\n\r\n\r\n                    // Initialize Bootstrap tooltips\r\n                    $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n                    // Toggle dates on checkbox change\r\n                    $('#toggleDates').change(function() {\r\n                        table.rows().invalidate().draw(); // Redraw the table to reflect changes\r\n                        $('[data-toggle=\"tooltip\"]').tooltip(); // Reinitialize tooltips after redraw\r\n                    });\r\n\r\n                    // Event listener for the checkboxes in the dropdown\r\n                    $('#processMenu input[type=\"checkbox\"]').change(function() {\r\n                        const selectedProcesses = $('#processMenu input[type=\"checkbox\"]:checked').map(function() {\r\n                            return $(this).val();\r\n                        }).get(); // Get selected process names\r\n                        let nonProcessColumns = exclude(table.columns(':visible').titles().toArray(), processNames);\r\n                        selectedProcesses.push(...nonProcessColumns); // Always show non process columns (that are visible)\r\n\r\n                        // Loop through all columns and set visibility based on selection\r\n                        const columns = table.columns().indexes(); // Get all column indexes\r\n                        columns.each(function(index) {\r\n                            const columnName = table.column(index).header().textContent;\r\n                            if (selectedProcesses.includes(columnName)) {\r\n                                table.column(index).visible(true);\r\n                            } else {\r\n                                table.column(index).visible(false);\r\n                            }\r\n                        });\r\n                    });\r\n                },\r\n                error: function(xhr, status, error) {\r\n                    console.error('Error fetching data:', error);\r\n                },\r\n            });\r\n\r\n        });\r\n    </script>\r\n\r\n</body>\r\n\r\n</html>\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->id) || !isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    // Check if the new abbreviation is already used by another location\r\n    $checkQuery = \"SELECT Standort FROM USEAP_RPA_Standort WHERE Standort_Kuerzel = ? AND pk_RPA_Standort != ?\";\r\n    $stmt = sqlsrv_query($conn, $checkQuery, array($data->abbreviation, $data->id));\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error checking abbreviation: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    if (sqlsrv_fetch_array($stmt, SQLSRV_FETCH_ASSOC)) {\r\n        echo json_encode([\r\n            \"success\" => false,\r\n            \"status\" => \"error\",\r\n            \"duplicate\" => true,\r\n            \"message\" => \"This abbreviation is already in use by another location\"\r\n        ]);\r\n        exit;\r\n    }\r\n\r\n    // Update the location\r\n    $updateQuery = \"UPDATE USEAP_RPA_Standort SET Standort = ?, Standort_Kuerzel = ? WHERE pk_RPA_Standort = ?\";\r\n    $params = array($data->location, $data->abbreviation, $data->id);\r\n    \r\n    $stmt = sqlsrv_query($conn, $updateQuery, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error updating location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location updated successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    // Get JSON data\r\n    $data = json_decode(file_get_contents('php://input'));\r\n\r\n    if (!isset($data->location) || !isset($data->abbreviation)) {\r\n        throw new Exception(\"Missing required fields\");\r\n    }\r\n\r\n    $query = \"INSERT INTO USEAP_RPA_Standort (Standort, Standort_Kuerzel) VALUES (?, ?)\";\r\n    $params = array($data->location, $data->abbreviation);\r\n    \r\n    $stmt = sqlsrv_query($conn, $query, $params);\r\n    \r\n    if ($stmt === false) {\r\n        throw new Exception(\"Error saving location: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    echo json_encode([\r\n        \"success\" => true,\r\n        \"status\" => \"success\",\r\n        \"message\" => \"Location added successfully\"\r\n    ]);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode([\r\n        \"success\" => false,\r\n        \"status\" => \"error\",\r\n        \"message\" => $e->getMessage()\r\n    ]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n<file>\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php\n<?php\r\nheader('Content-Type: application/json');\r\nrequire_once 'db_config.php';\r\n\r\ntry {\r\n    $conn = Database::getConnection();\r\n    \r\n    $query = \"SELECT pk_RPA_Standort, Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\r\n    $result = sqlsrv_query($conn, $query);\r\n\r\n    if (!$result) {\r\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\r\n    }\r\n\r\n    $data = array();\r\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\r\n        $data[] = $row;\r\n    }\r\n\r\n    echo json_encode($data);\r\n    sqlsrv_free_stmt($result);\r\n\r\n} catch (Exception $e) {\r\n    http_response_code(500);\r\n    echo json_encode(['error' => $e->getMessage()]);\r\n} finally {\r\n    Database::closeConnection();\r\n}\n```\n</file>\n\n<reminder>\nAvoid repeating existing code, instead use `// ...existing code...` comments to represent regions of unchanged code.\nEach file's code block must start with a comment containing the filepath. This includes Markdown files.\n</reminder>\n<prompt>\nPerfect. Now going back to #file:index.php I need a functionality to refresh the locations similar to what we already do with the institutes in #file:populateAddModal.js and the function refreshInstitutes(). So we need to update the variable locationMapping that originally gets populated through #file:check_standort.php . Please do this through a similar function as refreshInstitutes() and also call it alongside it in index.html for the refresh button.\n</prompt>",
            "response": "I'll help you implement the location refresh functionality. Here's what we need to do:\n\n1. Create a new endpoint for refreshing locations\n2. Add a refresh function to utils.js (since it's a general utility)\n3. Update the refresh button handler in index.php\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\n    $result = sqlsrv_query($conn, $query);\n\n    if ($result === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $locations = array();\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\n        $locations[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"locations\" => $locations\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"error\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js\n```javascript\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js\n// ...existing code...\n\n// Add new function for refreshing locations\nasync function refreshLocations() {\n    try {\n        const response = await fetch('./db/refresh_locations.php');\n        if (!response.ok) throw new Error('Network response was not ok');\n        const data = await response.json();\n        \n        if (data.success) {\n            locationMapping = data.locations;\n            showToast('Locations have been updated', 'refresh', 'success');\n        } else {\n            throw new Error(data.error || 'Unknown error occurred');\n        }\n    } catch (error) {\n        console.error('Error refreshing locations:', error);\n        showToast('Error updating locations', 'error', 'danger');\n    }\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\nUpdate the refresh button action in the DataTable initialization:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n// ...existing code...\n                        buttons: [{\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                            action: async function(e, dt, node, config) {\n                                await Promise.all([\n                                    refreshInstitutes(),\n                                    refreshLocations()\n                                ]);\n                                dt.ajax.reload();\n                            },\n                        },\n// ...existing code...\n```\n\nThis implementation:\n1. Creates a new endpoint `refresh_locations.php` that returns the updated location mapping\n2. Adds a `refreshLocations()` function to utils.js following the same pattern as `refreshInstitutes()`\n3. Updates the refresh button to run both refresh functions in parallel before reloading the table\n4. Uses proper error handling and toast notifications\n\nThe changes maintain consistency with the existing refresh functionality while adding the location refresh capability."
          },
          "codeBlocks": [
            {
              "code": "<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\n    $result = sqlsrv_query($conn, $query);\n\n    if ($result === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $locations = array();\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\n        $locations[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"locations\" => $locations\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"error\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "I'll help you implement the location refresh functionality. Here's what we need to do:\n\n1. Create a new endpoint for refreshing locations\n2. Add a refresh function to utils.js (since it's a general utility)\n3. Update the refresh button handler in index.php\n\n### [refresh_locations.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php)\n"
            },
            {
              "code": "// ...existing code...\n\n// Add new function for refreshing locations\nasync function refreshLocations() {\n    try {\n        const response = await fetch('./db/refresh_locations.php');\n        if (!response.ok) throw new Error('Network response was not ok');\n        const data = await response.json();\n        \n        if (data.success) {\n            locationMapping = data.locations;\n            showToast('Locations have been updated', 'refresh', 'success');\n        } else {\n            throw new Error(data.error || 'Unknown error occurred');\n        }\n    } catch (error) {\n        console.error('Error refreshing locations:', error);\n        showToast('Error updating locations', 'error', 'danger');\n    }\n}\n",
              "resource": {
                "$mid": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/utils.js",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js",
                "scheme": "file"
              },
              "language": "javascript",
              "markdownBeforeBlock": "\n### [utils.js](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/utils.js)\n"
            },
            {
              "code": "// ...existing code...\n                        buttons: [{\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                            action: async function(e, dt, node, config) {\n                                await Promise.all([\n                                    refreshInstitutes(),\n                                    refreshLocations()\n                                ]);\n                                dt.ajax.reload();\n                            },\n                        },\n// ...existing code...\n",
              "resource": {
                "$mid": 1,
                "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
                "_sep": 1,
                "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
                "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
                "scheme": "file"
              },
              "language": "php",
              "markdownBeforeBlock": "\n### [index.php](file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php)\nUpdate the refresh button action in the DataTable initialization:\n\n"
            }
          ],
          "messages": [
            {
              "role": "user",
              "content": "Perfect. Now going back to #file:index.php I need a functionality to refresh the locations similar to what we already do with the institutes in #file:populateAddModal.js and the function refreshInstitutes(). So we need to update the variable locationMapping that originally gets populated through #file:check_standort.php . Please do this through a similar function as refreshInstitutes() and also call it alongside it in index.html for the refresh button."
            },
            {
              "role": "assistant",
              "content": "I'll help you implement the location refresh functionality. Here's what we need to do:\n\n1. Create a new endpoint for refreshing locations\n2. Add a refresh function to utils.js (since it's a general utility)\n3. Update the refresh button handler in index.php\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/refresh_locations.php\n<?php\nheader('Content-Type: application/json');\nrequire_once 'db_config.php';\n\ntry {\n    $conn = Database::getConnection();\n    \n    $query = \"SELECT pk_RPA_Standort, Standort_Kuerzel FROM USEAP_RPA_Standort\";\n    $result = sqlsrv_query($conn, $query);\n\n    if ($result === false) {\n        throw new Exception(\"Query failed: \" . print_r(sqlsrv_errors(), true));\n    }\n\n    $locations = array();\n    while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC)) {\n        $locations[$row['pk_RPA_Standort']] = $row['Standort_Kuerzel'];\n    }\n\n    echo json_encode([\n        \"success\" => true,\n        \"locations\" => $locations\n    ]);\n\n} catch (Exception $e) {\n    http_response_code(500);\n    echo json_encode([\n        \"success\" => false,\n        \"error\" => $e->getMessage()\n    ]);\n} finally {\n    Database::closeConnection();\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js\n```javascript\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/utils.js\n// ...existing code...\n\n// Add new function for refreshing locations\nasync function refreshLocations() {\n    try {\n        const response = await fetch('./db/refresh_locations.php');\n        if (!response.ok) throw new Error('Network response was not ok');\n        const data = await response.json();\n        \n        if (data.success) {\n            locationMapping = data.locations;\n            showToast('Locations have been updated', 'refresh', 'success');\n        } else {\n            throw new Error(data.error || 'Unknown error occurred');\n        }\n    } catch (error) {\n        console.error('Error refreshing locations:', error);\n        showToast('Error updating locations', 'error', 'danger');\n    }\n}\n```\n\n### /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\nUpdate the refresh button action in the DataTable initialization:\n\n```php\n// filepath: /c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php\n// ...existing code...\n                        buttons: [{\n                            text: '<i class=\"bi bi-arrow-clockwise\"></i> Refresh',\n                            action: async function(e, dt, node, config) {\n                                await Promise.all([\n                                    refreshInstitutes(),\n                                    refreshLocations()\n                                ]);\n                                dt.ajax.reload();\n                            },\n                        },\n// ...existing code...\n```\n\nThis implementation:\n1. Creates a new endpoint `refresh_locations.php` that returns the updated location mapping\n2. Adds a `refreshLocations()` function to utils.js following the same pattern as `refreshInstitutes()`\n3. Updates the refresh button to run both refresh functions in parallel before reloading the table\n4. Uses proper error handling and toast notifications\n\nThe changes maintain consistency with the existing refresh functionality while adding the location refresh capability."
            }
          ],
          "modelMessageId": "6ae30d6d-7d43-4a12-9264-fc529aa0f461",
          "responseId": "2bedfb6a-04ef-4241-b10e-7550783fd698",
          "sessionId": "5504303a-3ab2-4172-9ec5-6d87b276b6d9",
          "agentId": "github.copilot.editingSession"
        }
      },
      "followups": [],
      "isCanceled": false,
      "agent": {
        "extensionId": {
          "value": "GitHub.copilot-chat",
          "_lower": "github.copilot-chat"
        },
        "publisherDisplayName": "GitHub",
        "extensionPublisherId": "GitHub",
        "extensionDisplayName": "GitHub Copilot Chat",
        "id": "github.copilot.editingSession",
        "description": "Edit files in your workspace",
        "metadata": {
          "themeIcon": {
            "id": "copilot"
          },
          "hasFollowups": false,
          "supportIssueReporting": false,
          "supportsSlowVariables": true
        },
        "name": "GitHubCopilot",
        "fullName": "GitHub Copilot",
        "isDefault": true,
        "locations": [
          "editing-session"
        ],
        "slashCommands": [],
        "disambiguation": []
      },
      "workingSet": [
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\update_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\js\\populateAddModal.js",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\get_locations.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/get_locations.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\save_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/save_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\update_location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/update_location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\index.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/index.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/index.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\location.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/location.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/location.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_standort.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_standort.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\js\\populateAddModal.js",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "path": "/C:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/js/populateAddModal.js",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_duplicate.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\institute.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/institute.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/institute.php",
          "scheme": "file"
        },
        {
          "$mid": 1,
          "fsPath": "c:\\Users\\Linus\\Desktop\\OneDrive - beckhaus consulting\\HtmlDBForm\\DatabaseManager\\db\\check_location_duplicate.php",
          "_sep": 1,
          "external": "file:///c%3A/Users/Linus/Desktop/OneDrive%20-%20beckhaus%20consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "path": "/c:/Users/Linus/Desktop/OneDrive - beckhaus consulting/HtmlDBForm/DatabaseManager/db/check_location_duplicate.php",
          "scheme": "file"
        }
      ],
      "contentReferences": [],
      "codeCitations": [],
      "timestamp": 1738247599079
    }
  ]
}